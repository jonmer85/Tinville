function checkMode(){if($(window).width()<753){return'xs';}
else if($(window).width()>=753&&$(window).width()<992){return'sm';}
else if($(window).width()>=992&&$(window).width()<1200){return'md';}
else{return'lg';}}
function apply_form_field_error(form_id,fieldname,error){var form=$("#"+form_id)
input=form.find("#id_"+fieldname),container=form.find("#div_id_"+fieldname),error_msg=$("<span />").addClass("help-block ajax-error");$(error_msg).append("<strong>"+error[0]+"</strong>")
container.addClass("has-error");error_msg.insertAfter(input);}
function clear_form_field_errors(form){$(".ajax-error",$(form)).remove();$(".error",$(form)).removeClass("error");}
function django_message(msg,level,messageElement){var levels={warning:'alert',error:'danger',success:'success',info:'info'},source=$('#message_template').html(),template=Handlebars.compile(source),context={'tags':levels[level],'message':msg},html=template(context);messageElement.append(html);}
function clear_django_messages(messageElement){messageElement.empty();}
function django_block_message(msg,level,messageElement){var source=$("#message_block_template").html(),template=Handlebars.compile(source),context={level:level,body:msg},html=template(context);messageElement.append(html);}
var feedbackToggle;(function($){feedbackToggle=function(){$('#feedback_tab, #feedback_panel').toggle();}
$(document).ready(function(){$('#feedback_tab button, #feedback_panel button').click(feedbackToggle);$('#feedback_form').submit(function(e){e.preventDefault();var action=this.action;$.ajax(action,{'type':'POST','data':$(this).serialize(),'success':function(data,textStatus,jqXHR){alert("Your feedback has been successfully submitted, thank you.");$("#feedback_panel form textarea").val("");feedbackToggle();},'error':function(jqXHR,textStatus,errorThrown){if(jqXHR.status==400)
{var errors="The following field error(s) ocurred: \n";errors+=jqXHR.responseText;alert(errors);}
else if(jqXHR.responseText!=''){alert("The following error ocurred: \n"+jqXHR.responseText);}
else{alert('An unknown error occurred.');}}});});});})(jQuery);;window.Modernizr=function(a,b,c){function D(a){j.cssText=a}function E(a,b){return D(n.join(a+";")+(b||""))}function F(a,b){return typeof a===b}function G(a,b){return!!~(""+a).indexOf(b)}function H(a,b){for(var d in a){var e=a[d];if(!G(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function I(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:F(f,"function")?f.bind(d||b):f}return!1}function J(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return F(b,"string")||F(b,"undefined")?H(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),I(e,b,c))}function K(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.6.1",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,x,y=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),k.id=h,(l?k:m).innerHTML+=f,m.appendChild(k),l||(m.style.background="",g.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},z=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return y("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},A=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=F(e[d],"function"),F(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),B={}.hasOwnProperty,C;!F(B,"undefined")&&!F(B.call,"undefined")?C=function(a,b){return B.call(a,b)}:C=function(a,b){return b in a&&F(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e}),s.flexbox=function(){return J("flexWrap")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!F(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},s.geolocation=function(){return"geolocation"in navigator},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!J("indexedDB",a)},s.hashchange=function(){return A("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!!a.history&&!!history.pushState},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},s.rgba=function(){return D("background-color:rgba(150,255,150,.5)"),G(j.backgroundColor,"rgba")},s.hsla=function(){return D("background-color:hsla(120,40%,100%,.5)"),G(j.backgroundColor,"rgba")||G(j.backgroundColor,"hsla")},s.multiplebgs=function(){return D("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return J("backgroundSize")},s.borderimage=function(){return J("borderImage")},s.borderradius=function(){return J("borderRadius")},s.boxshadow=function(){return J("boxShadow")},s.textshadow=function(){return b.createElement("div").style.textShadow===""},s.opacity=function(){return E("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return J("animationName")},s.csscolumns=function(){return J("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return D((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),G(j.backgroundImage,"gradient")},s.cssreflections=function(){return J("boxReflect")},s.csstransforms=function(){return!!J("transform")},s.csstransforms3d=function(){var a=!!J("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},s.csstransitions=function(){return J("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&g.indexOf(d.split(" ")[0])===0}),a},s.generatedcontent=function(){var a;return y(['#modernizr:after{content:"',l,'";visibility:hidden}'].join(""),function(b){a=b.offsetHeight>=1}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var L in s)C(s,L)&&(x=L.toLowerCase(),e[x]=s[L](),v.push((e[x]?"":"no-")+x));return e.input||K(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)C(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},D(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.mq=z,e.hasEvent=A,e.testProp=function(a){return H([a])},e.testAllProps=J,e.testStyles=y,e.prefixed=function(a,b,c){return b?J(a,b,c):J(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+v.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&o.call(a.opera)=="[object Opera]",l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};ï»¿
(function($){$.fn.shorten=function(settings){"use strict";if($(this).data('jquery.shorten')){}
$(this).data('jquery.shorten',true);var config={showChars:100,ellipsesText:"...",moreText:"more",lessText:"less",errMsg:null};if(settings){$.extend(config,settings);}
$(document).off("click",'.morelink');$(document).on({click:function(){var $this=$(this);if($this.hasClass('less')){$this.removeClass('less');$this.html(config.moreText);$this.parent().prev().prev().show();$this.parent().prev().hide();}else{$this.addClass('less');$this.html(config.lessText);$this.parent().prev().prev().hide();$this.parent().prev().show();}
return false;}},'.morelink');return this.each(function(){var $this=$(this);var content=$this.html();var contentlen=$this.text().length;if(contentlen>config.showChars){var c=content.substr(0,config.showChars);if(c.indexOf('<')>=0)
{var inTag=false;var bag='';var countChars=0;var openTags=[];var tagName=null;for(var i=0,r=0;r<=config.showChars;i++){if(content[i]=='<'&&!inTag){inTag=true;tagName=content.substring(i+1,content.indexOf('>',i));if(tagName[0]=='/'){if(tagName!='/'+openTags[0]){config.errMsg='ERROR en HTML: the top of the stack should be the tag that closes';}else{openTags.shift();}}else{if(tagName.toLowerCase()!='br'){openTags.unshift(tagName);}}}
if(inTag&&content[i]=='>'){inTag=false;}
if(inTag){bag+=content.charAt(i);}
else{r++;if(countChars<=config.showChars){bag+=content.charAt(i);countChars++;}else
{if(openTags.length>0)
{for(j=0;j<openTags.length;j++){bag+='</'+openTags[j]+'>';}
break;}}}}
c=bag;}
var html='<span class="shortcontent">'+c+'&nbsp;'+config.ellipsesText+'</span><span class="allcontent">'+content+'</span>&nbsp;&nbsp;<span><a href="javascript://nop/" class="morelink">'+config.moreText+'</a></span>';$this.html(html);$this.find(".allcontent").hide();}});};})(jQuery);(function($){$.transit={version:"0.9.9",propertyMap:{marginLeft:'margin',marginRight:'margin',marginBottom:'margin',marginTop:'margin',paddingLeft:'padding',paddingRight:'padding',paddingBottom:'padding',paddingTop:'padding'},enabled:true,useTransitionEnd:false};var div=document.createElement('div');var support={};function getVendorPropertyName(prop){if(prop in div.style)return prop;var prefixes=['Moz','Webkit','O','ms'];var prop_=prop.charAt(0).toUpperCase()+prop.substr(1);if(prop in div.style){return prop;}
for(var i=0;i<prefixes.length;++i){var vendorProp=prefixes[i]+prop_;if(vendorProp in div.style){return vendorProp;}}}
function checkTransform3dSupport(){div.style[support.transform]='';div.style[support.transform]='rotateY(90deg)';return div.style[support.transform]!=='';}
var isChrome=navigator.userAgent.toLowerCase().indexOf('chrome')>-1;support.transition=getVendorPropertyName('transition');support.transitionDelay=getVendorPropertyName('transitionDelay');support.transform=getVendorPropertyName('transform');support.transformOrigin=getVendorPropertyName('transformOrigin');support.filter=getVendorPropertyName('Filter');support.transform3d=checkTransform3dSupport();var eventNames={'transition':'transitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd','WebkitTransition':'webkitTransitionEnd','msTransition':'MSTransitionEnd'};var transitionEnd=support.transitionEnd=eventNames[support.transition]||null;for(var key in support){if(support.hasOwnProperty(key)&&typeof $.support[key]==='undefined'){$.support[key]=support[key];}}
div=null;$.cssEase={'_default':'ease','in':'ease-in','out':'ease-out','in-out':'ease-in-out','snap':'cubic-bezier(0,1,.5,1)','easeOutCubic':'cubic-bezier(.215,.61,.355,1)','easeInOutCubic':'cubic-bezier(.645,.045,.355,1)','easeInCirc':'cubic-bezier(.6,.04,.98,.335)','easeOutCirc':'cubic-bezier(.075,.82,.165,1)','easeInOutCirc':'cubic-bezier(.785,.135,.15,.86)','easeInExpo':'cubic-bezier(.95,.05,.795,.035)','easeOutExpo':'cubic-bezier(.19,1,.22,1)','easeInOutExpo':'cubic-bezier(1,0,0,1)','easeInQuad':'cubic-bezier(.55,.085,.68,.53)','easeOutQuad':'cubic-bezier(.25,.46,.45,.94)','easeInOutQuad':'cubic-bezier(.455,.03,.515,.955)','easeInQuart':'cubic-bezier(.895,.03,.685,.22)','easeOutQuart':'cubic-bezier(.165,.84,.44,1)','easeInOutQuart':'cubic-bezier(.77,0,.175,1)','easeInQuint':'cubic-bezier(.755,.05,.855,.06)','easeOutQuint':'cubic-bezier(.23,1,.32,1)','easeInOutQuint':'cubic-bezier(.86,0,.07,1)','easeInSine':'cubic-bezier(.47,0,.745,.715)','easeOutSine':'cubic-bezier(.39,.575,.565,1)','easeInOutSine':'cubic-bezier(.445,.05,.55,.95)','easeInBack':'cubic-bezier(.6,-.28,.735,.045)','easeOutBack':'cubic-bezier(.175, .885,.32,1.275)','easeInOutBack':'cubic-bezier(.68,-.55,.265,1.55)'};$.cssHooks['transit:transform']={get:function(elem){return $(elem).data('transform')||new Transform();},set:function(elem,v){var value=v;if(!(value instanceof Transform)){value=new Transform(value);}
if(support.transform==='WebkitTransform'&&!isChrome){elem.style[support.transform]=value.toString(true);}else{elem.style[support.transform]=value.toString();}
$(elem).data('transform',value);}};$.cssHooks.transform={set:$.cssHooks['transit:transform'].set};$.cssHooks.filter={get:function(elem){return elem.style[support.filter];},set:function(elem,value){elem.style[support.filter]=value;}};if($.fn.jquery<"1.8"){$.cssHooks.transformOrigin={get:function(elem){return elem.style[support.transformOrigin];},set:function(elem,value){elem.style[support.transformOrigin]=value;}};$.cssHooks.transition={get:function(elem){return elem.style[support.transition];},set:function(elem,value){elem.style[support.transition]=value;}};}
registerCssHook('scale');registerCssHook('translate');registerCssHook('rotate');registerCssHook('rotateX');registerCssHook('rotateY');registerCssHook('rotate3d');registerCssHook('perspective');registerCssHook('skewX');registerCssHook('skewY');registerCssHook('x',true);registerCssHook('y',true);function Transform(str){if(typeof str==='string'){this.parse(str);}
return this;}
Transform.prototype={setFromString:function(prop,val){var args=(typeof val==='string')?val.split(','):(val.constructor===Array)?val:[val];args.unshift(prop);Transform.prototype.set.apply(this,args);},set:function(prop){var args=Array.prototype.slice.apply(arguments,[1]);if(this.setter[prop]){this.setter[prop].apply(this,args);}else{this[prop]=args.join(',');}},get:function(prop){if(this.getter[prop]){return this.getter[prop].apply(this);}else{return this[prop]||0;}},setter:{rotate:function(theta){this.rotate=unit(theta,'deg');},rotateX:function(theta){this.rotateX=unit(theta,'deg');},rotateY:function(theta){this.rotateY=unit(theta,'deg');},scale:function(x,y){if(y===undefined){y=x;}
this.scale=x+","+y;},skewX:function(x){this.skewX=unit(x,'deg');},skewY:function(y){this.skewY=unit(y,'deg');},perspective:function(dist){this.perspective=unit(dist,'px');},x:function(x){this.set('translate',x,null);},y:function(y){this.set('translate',null,y);},translate:function(x,y){if(this._translateX===undefined){this._translateX=0;}
if(this._translateY===undefined){this._translateY=0;}
if(x!==null&&x!==undefined){this._translateX=unit(x,'px');}
if(y!==null&&y!==undefined){this._translateY=unit(y,'px');}
this.translate=this._translateX+","+this._translateY;}},getter:{x:function(){return this._translateX||0;},y:function(){return this._translateY||0;},scale:function(){var s=(this.scale||"1,1").split(',');if(s[0]){s[0]=parseFloat(s[0]);}
if(s[1]){s[1]=parseFloat(s[1]);}
return(s[0]===s[1])?s[0]:s;},rotate3d:function(){var s=(this.rotate3d||"0,0,0,0deg").split(',');for(var i=0;i<=3;++i){if(s[i]){s[i]=parseFloat(s[i]);}}
if(s[3]){s[3]=unit(s[3],'deg');}
return s;}},parse:function(str){var self=this;str.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(x,prop,val){self.setFromString(prop,val);});},toString:function(use3d){var re=[];for(var i in this){if(this.hasOwnProperty(i)){if((!support.transform3d)&&((i==='rotateX')||(i==='rotateY')||(i==='perspective')||(i==='transformOrigin'))){continue;}
if(i[0]!=='_'){if(use3d&&(i==='scale')){re.push(i+"3d("+this[i]+",1)");}else if(use3d&&(i==='translate')){re.push(i+"3d("+this[i]+",0)");}else{re.push(i+"("+this[i]+")");}}}}
return re.join(" ");}};function callOrQueue(self,queue,fn){if(queue===true){self.queue(fn);}else if(queue){self.queue(queue,fn);}else{fn();}}
function getProperties(props){var re=[];$.each(props,function(key){key=$.camelCase(key);key=$.transit.propertyMap[key]||$.cssProps[key]||key;key=uncamel(key);if(support[key])
key=uncamel(support[key]);if($.inArray(key,re)===-1){re.push(key);}});return re;}
function getTransition(properties,duration,easing,delay){var props=getProperties(properties);if($.cssEase[easing]){easing=$.cssEase[easing];}
var attribs=''+toMS(duration)+' '+easing;if(parseInt(delay,10)>0){attribs+=' '+toMS(delay);}
var transitions=[];$.each(props,function(i,name){transitions.push(name+' '+attribs);});return transitions.join(', ');}
$.fn.transition=$.fn.transit=function(properties,duration,easing,callback){var self=this;var delay=0;var queue=true;var theseProperties=jQuery.extend(true,{},properties);if(typeof duration==='function'){callback=duration;duration=undefined;}
if(typeof duration==='object'){easing=duration.easing;delay=duration.delay||0;queue=duration.queue||true;callback=duration.complete;duration=duration.duration;}
if(typeof easing==='function'){callback=easing;easing=undefined;}
if(typeof theseProperties.easing!=='undefined'){easing=theseProperties.easing;delete theseProperties.easing;}
if(typeof theseProperties.duration!=='undefined'){duration=theseProperties.duration;delete theseProperties.duration;}
if(typeof theseProperties.complete!=='undefined'){callback=theseProperties.complete;delete theseProperties.complete;}
if(typeof theseProperties.queue!=='undefined'){queue=theseProperties.queue;delete theseProperties.queue;}
if(typeof theseProperties.delay!=='undefined'){delay=theseProperties.delay;delete theseProperties.delay;}
if(typeof duration==='undefined'){duration=$.fx.speeds._default;}
if(typeof easing==='undefined'){easing=$.cssEase._default;}
duration=toMS(duration);var transitionValue=getTransition(theseProperties,duration,easing,delay);var work=$.transit.enabled&&support.transition;var i=work?(parseInt(duration,10)+parseInt(delay,10)):0;if(i===0){var fn=function(next){self.css(theseProperties);if(callback){callback.apply(self);}
if(next){next();}};callOrQueue(self,queue,fn);return self;}
var oldTransitions={};var run=function(nextCall){var bound=false;var cb=function(){if(bound){self.unbind(transitionEnd,cb);}
if(i>0){self.each(function(){this.style[support.transition]=(oldTransitions[this]||null);});}
if(typeof callback==='function'){callback.apply(self);}
if(typeof nextCall==='function'){nextCall();}};if((i>0)&&(transitionEnd)&&($.transit.useTransitionEnd)){bound=true;self.bind(transitionEnd,cb);}else{window.setTimeout(cb,i);}
self.each(function(){if(i>0){this.style[support.transition]=transitionValue;}
$(this).css(properties);});};var deferredRun=function(next){this.offsetWidth;run(next);};callOrQueue(self,queue,deferredRun);return this;};function registerCssHook(prop,isPixels){if(!isPixels){$.cssNumber[prop]=true;}
$.transit.propertyMap[prop]=support.transform;$.cssHooks[prop]={get:function(elem){var t=$(elem).css('transit:transform');return t.get(prop);},set:function(elem,value){var t=$(elem).css('transit:transform');t.setFromString(prop,value);$(elem).css({'transit:transform':t});}};}
function uncamel(str){return str.replace(/([A-Z])/g,function(letter){return'-'+letter.toLowerCase();});}
function unit(i,units){if((typeof i==="string")&&(!i.match(/^[\-0-9\.]+$/))){return i;}else{return""+i+units;}}
function toMS(duration){var i=duration;if(typeof i==='string'&&(!i.match(/^[\-0-9\.]+/))){i=$.fx.speeds[i]||$.fx.speeds._default;}
return unit(i,'ms');}
$.transit.getTransitionValue=getTransition;})(jQuery);!function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return"[object Function]"===Object.prototype.toString.call(a)}function g(a){var b=Object.prototype.toString.call(a);return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(b)&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)}function h(a,b){var c=a;return"string"==typeof a?r.Easings[a]||(c=!1):c=p(a)&&2===a.length?t.apply(null,a.concat([b])):p(a)&&4===a.length?s.apply(null,a):!1,c===!1&&(c=r.Easings[r.defaults.easing]?r.defaults.easing:m),c}function i(a){if(a)for(var b=(new Date).getTime(),c=0,e=r.State.calls.length;e>c;c++)if(r.State.calls[c]){var f=r.State.calls[c],g=f[0],h=f[2],l=f[3];l||(l=r.State.calls[c][3]=b-16);for(var m=Math.min((b-l)/h.duration,1),n=0,p=g.length;p>n;n++){var s=g[n],t=s.element;if(q.data(t,k)){var v=!1;h.display&&"none"!==h.display&&u.setPropertyValue(t,"display",h.display);for(var w in s)if("element"!==w){var x,y=s[w],z="string"==typeof y.easing?r.Easings[y.easing]:y.easing;if(x=1===m?y.endValue:y.startValue+(y.endValue-y.startValue)*z(m),y.currentValue=x,u.Hooks.registered[w]){var A=u.Hooks.getRoot(w),B=q.data(t,k).rootPropertyValueCache[A];B&&(y.rootPropertyValue=B)}var C=u.setPropertyValue(t,w,y.currentValue+(0===parseFloat(x)?"":y.unitType),y.rootPropertyValue,y.scrollData);u.Hooks.registered[w]&&(q.data(t,k).rootPropertyValueCache[A]=u.Normalizations.registered[A]?u.Normalizations.registered[A]("extract",null,C[1]):C[1]),"transform"===C[0]&&(v=!0)}h.mobileHA&&q.data(t,k).transformCache.translate3d===d&&(q.data(t,k).transformCache.translate3d="(0px, 0px, 0px)",v=!0),v&&u.flushTransformCache(t)}}h.display&&"none"!==h.display&&(r.State.calls[c][2].display=!1),1===m&&j(c)}r.State.isTicking&&o(i)}function j(a){for(var b=r.State.calls[a][0],c=r.State.calls[a][1],e=r.State.calls[a][2],f=!1,g=0,h=b.length;h>g;g++){var i=b[g].element;if("none"!==e.display||e.loop||u.setPropertyValue(i,"display",e.display),(q.queue(i)[1]===d||!/\.velocityQueueEntryFlag/i.test(q.queue(i)[1]))&&q.data(i,k)){q.data(i,k).isAnimating=!1,q.data(i,k).rootPropertyValueCache={};var j,l=["transformPerspective","translateZ","rotateX","rotateY"],m=!1;for(var n in l)j=l[n],/^\(0[^.]/.test(q.data(i,k).transformCache[j])&&(m=!0,delete q.data(i,k).transformCache[j]);e.mobileHA&&(m=!0,delete q.data(i,k).transformCache.translate3d),m&&u.flushTransformCache(i)}if(g===h-1&&!e.loop&&e.complete){var o=c.jquery?c.get():c;e.complete.call(o,o)}e.queue!==!1&&q.dequeue(i,e.queue)}r.State.calls[a]=!1;for(var p=0,s=r.State.calls.length;s>p;p++)if(r.State.calls[p]!==!1){f=!0;break}f===!1&&(r.State.isTicking=!1,delete r.State.calls,r.State.calls=[])}var k="velocity",l=400,m="swing",n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=b.requestAnimationFrame||function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},q=b.jQuery||a.Velocity&&a.Velocity.Utilities;if(!q)throw new Error("Velocity: Either jQuery or Velocity's jQuery shim must first be loaded.");if(a.Velocity!==d&&!a.Velocity.Utilities)throw new Error("Velocity: Namespace is occupied.");if(7>=n){if(b.jQuery)return void(b.jQuery.fn.velocity=b.jQuery.fn.animate);throw new Error("Velocity: For IE<=7, Velocity falls back to jQuery, which must first be loaded.")}if(8===n&&!b.jQuery)throw new Error("Velocity: For IE8, Velocity requires jQuery to be loaded. (Velocity's jQuery shim does not work with IE8.)");var r=a.Velocity=a.velocity=q.extend(a.Velocity||{},{State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:{},Sequences:{},Easings:{},defaults:{queue:"",duration:l,easing:m,complete:null,display:null,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},animate:function(){},debug:!1});b.pageYOffset!==d?(r.State.scrollAnchor=b,r.State.scrollPropertyLeft="pageXOffset",r.State.scrollPropertyTop="pageYOffset"):(r.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,r.State.scrollPropertyLeft="scrollLeft",r.State.scrollPropertyTop="scrollTop");var s=function(){function a(a,b){return 1-3*b+3*a}function b(a,b){return 3*b-6*a}function c(a){return 3*a}function d(d,e,f){return((a(e,f)*d+b(e,f))*d+c(e))*d}function e(d,e,f){return 3*a(e,f)*d*d+2*b(e,f)*d+c(e)}return function(a,b,c,f){function g(b){for(var f=b,g=0;8>g;++g){var h=e(f,a,c);if(0===h)return f;var i=d(f,a,c)-b;f-=i/h}return f}if(4!==arguments.length)return!1;for(var h=0;4>h;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;return a=Math.min(a,1),c=Math.min(c,1),a=Math.max(a,0),c=Math.max(c,0),function(e){return a===b&&c===f?e:d(g(e),b,f)}}}(),t=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||600,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;;)if(h=c(h||i,g),j.push(1+h.x),k+=16,!(Math.abs(h.x)>l&&Math.abs(h.v)>l))break;return f?function(a){return j[a*(j.length-1)|0]}:k}}();!function(){var a={};q.each(["Quad","Cubic","Quart","Quint","Expo"],function(b,c){a[c]=function(a){return Math.pow(a,b+2)}}),q.extend(a,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),q.each(a,function(a,b){r.Easings["easeIn"+a]=b,r.Easings["easeOut"+a]=function(a){return 1-b(1-a)},r.Easings["easeInOut"+a]=function(a){return.5>a?b(2*a)/2:1-b(-2*a+2)/2}}),r.Easings.linear=function(a){return a},r.Easings.swing=function(a){return.5-Math.cos(a*Math.PI)/2},r.Easings.ease=s(.25,.1,.25,1),r.Easings["ease-in"]=s(.42,0,1,1),r.Easings["ease-out"]=s(0,0,.58,1),r.Easings["ease-in-out"]=s(.42,0,.58,1),r.Easings.spring=function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}}();var u=r.CSS={RegEx:{valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Hooks:{templates:{color:["Red Green Blue Alpha","255 255 255 1"],backgroundColor:["Red Green Blue Alpha","255 255 255 1"],borderColor:["Red Green Blue Alpha","255 255 255 1"],borderTopColor:["Red Green Blue Alpha","255 255 255 1"],borderRightColor:["Red Green Blue Alpha","255 255 255 1"],borderBottomColor:["Red Green Blue Alpha","255 255 255 1"],borderLeftColor:["Red Green Blue Alpha","255 255 255 1"],outlineColor:["Red Green Blue Alpha","255 255 255 1"],textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0%"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){var a,b,c;if(n)for(a in u.Hooks.templates){b=u.Hooks.templates[a],c=b[0].split(" ");var d=b[1].match(u.RegEx.valueSplit);"Color"===c[0]&&(c.push(c.shift()),d.push(d.shift()),u.Hooks.templates[a]=[c.join(" "),d.join(" ")])}for(a in u.Hooks.templates){b=u.Hooks.templates[a],c=b[0].split(" ");for(var e in c){var f=a+c[e],g=e;u.Hooks.registered[f]=[a,g]}}},getRoot:function(a){var b=u.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return u.RegEx.valueUnwrap.test(b)&&(b=b.match(u.Hooks.RegEx.valueUnwrap)[1]),u.Values.isCSSNullValue(b)&&(b=u.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=u.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=u.Hooks.cleanRootPropertyValue(d,b),b.toString().match(u.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=u.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=u.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(u.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return u.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(u.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){function a(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?"rgb("+(parseInt(b[1],16)+" "+parseInt(b[2],16)+" "+parseInt(b[3],16))+")":"rgb(0 0 0)"}var b=["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"];9>=n||r.State.isGingerbread||(b=b.concat(["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]));for(var c=0,e=b.length;e>c;c++)!function(){var a=b[c];u.Normalizations.registered[a]=function(b,c,e){switch(b){case"name":return"transform";case"extract":return q.data(c,k).transformCache[a]===d?/^scale/i.test(a)?1:0:q.data(c,k).transformCache[a].replace(/[()]/g,"");case"inject":var f=!1;switch(a.substr(0,a.length-1)){case"translate":f=!/(%|px|em|rem|\d)$/i.test(e);break;case"scal":case"scale":r.State.isAndroid&&q.data(c,k).transformCache[a]===d&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(q.data(c,k).transformCache[a]="("+e+")"),q.data(c,k).transformCache[a]}}}();for(var f=["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],c=0,g=f.length;g>c;c++)!function(){var b=f[c];u.Normalizations.registered[b]=function(c,e,f){switch(c){case"name":return b;case"extract":var g;if(u.RegEx.wrappedValueAlreadyExtracted.test(f))g=f;else{var h,i={aqua:"rgb(0, 255, 255);",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",white:"rgb(255, 255, 255)",yellow:"rgb(255, 255, 0)"};/^[A-z]+$/i.test(f)?h=i[f]!==d?i[f]:i.black:/^#([A-f\d]{3}){1,2}$/i.test(f)?h=a(f):/^rgba?\(/i.test(f)||(h=i.black),g=(h||f).toString().match(u.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==g.split(" ").length||(g+=" 1"),g;case"inject":return 8>=n?4===f.split(" ").length&&(f=f.split(/\s+/).slice(0,3).join(" ")):3===f.split(" ").length&&(f+=" 1"),(8>=n?"rgb":"rgba")+"("+f.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},prefixCheck:function(a){if(r.State.prefixMatches[a])return[r.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),"string"==typeof r.State.prefixElement.style[e])return r.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|opacity|alpha|fillOpacity|flexGrow|flexHeight|zIndex|fontWeight)$)|color/i.test(a)?"":"px"},getDisplayType:function(a){var b=a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":"block"}},getPropertyValue:function(a,c,e,f){function g(a,c){var e=0;if(8>=n)e=q.css(a,c);else{if(!f){if("height"===c&&"border-box"!==u.getPropertyValue(a,"boxSizing").toString().toLowerCase())return a.offsetHeight-(parseFloat(u.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(u.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(u.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(u.getPropertyValue(a,"paddingBottom"))||0);if("width"===c&&"border-box"!==u.getPropertyValue(a,"boxSizing").toString().toLowerCase())return a.offsetWidth-(parseFloat(u.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(u.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(u.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(u.getPropertyValue(a,"paddingRight"))||0)}var h;h=q.data(a,k)===d?b.getComputedStyle(a,null):q.data(a,k).computedStyle?q.data(a,k).computedStyle:q.data(a,k).computedStyle=b.getComputedStyle(a,null),n&&"borderColor"===c&&(c="borderTopColor"),e=9===n&&"filter"===c?h.getPropertyValue(c):h[c],(""===e||null===e)&&(e=a.style[c])}if("auto"===e&&/^(top|right|bottom|left)$/i.test(c)){var i=g(a,"position");("fixed"===i||"absolute"===i&&/top|left/i.test(c))&&(e=q(a).position()[c]+"px")}return e}var h;if(u.Hooks.registered[c]){var i=c,j=u.Hooks.getRoot(i);e===d&&(e=u.getPropertyValue(a,u.Names.prefixCheck(j)[0])),u.Normalizations.registered[j]&&(e=u.Normalizations.registered[j]("extract",a,e)),h=u.Hooks.extractValue(i,e)}else if(u.Normalizations.registered[c]){var l,m;l=u.Normalizations.registered[c]("name",a),"transform"!==l&&(m=g(a,u.Names.prefixCheck(l)[0]),u.Values.isCSSNullValue(m)&&u.Hooks.templates[c]&&(m=u.Hooks.templates[c][1])),h=u.Normalizations.registered[c]("extract",a,m)}return/^[\d-]/.test(h)||(h=g(a,u.Names.prefixCheck(c)[0])),u.Values.isCSSNullValue(h)&&(h=0),r.debug>=2&&console.log("Get "+c+": "+h),h},setPropertyValue:function(a,c,d,e,f){var g=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(u.Normalizations.registered[c]&&"transform"===u.Normalizations.registered[c]("name",a))u.Normalizations.registered[c]("inject",a,d),g="transform",d=q.data(a,k).transformCache[c];else{if(u.Hooks.registered[c]){var h=c,i=u.Hooks.getRoot(c);e=e||u.getPropertyValue(a,i),d=u.Hooks.injectValue(h,d,e),c=i}if(u.Normalizations.registered[c]&&(d=u.Normalizations.registered[c]("inject",a,d),c=u.Normalizations.registered[c]("name",a)),g=u.Names.prefixCheck(c)[0],8>=n)try{a.style[g]=d}catch(j){console.log("Error setting ["+g+"] to ["+d+"]")}else a.style[g]=d;r.debug>=2&&console.log("Set "+c+" ("+g+"): "+d)}return[g,d]},flushTransformCache:function(a){var b,c,d,e="";for(b in q.data(a,k).transformCache)c=q.data(a,k).transformCache[b],"transformPerspective"!==b?(9===n&&"rotateZ"===b&&(b="rotate"),e+=b+c+" "):d=c;d&&(e="perspective"+d+" "+e),u.setPropertyValue(a,"transform",e)}};u.Hooks.register(),u.Normalizations.register(),r.animate=function(){function a(){function a(){function a(a){var c=d,e=d,i=d;return p(a)?(c=a[0],!p(a[1])&&/^[\d-]/.test(a[1])||f(a[1])?i=a[1]:("string"==typeof a[1]||p(a[1]))&&(e=h(a[1],g.duration),a[2]&&(i=a[2]))):c=a,e=e||g.easing,f(c)&&(c=c.call(b,v,t)),f(i)&&(i=i.call(b,v,t)),[c||0,e,i]}function l(a,b){var c,d;return d=(b||0).toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=u.Values.getUnitType(a)),[d,c]}function w(){var a={parent:b.parentNode,position:u.getPropertyValue(b,"position"),fontSize:u.getPropertyValue(b,"fontSize")},d=a.position===B.lastPosition&&a.parent===B.lastParent,e=a.fontSize===B.lastFontSize&&a.parent===B.lastParent;B.lastParent=a.parent,B.lastPosition=a.position,B.lastFontSize=a.fontSize,null===B.remToPxRatio&&(B.remToPxRatio=parseFloat(u.getPropertyValue(c.body,"fontSize"))||16);var f={overflowX:null,overflowY:null,boxSizing:null,width:null,minWidth:null,maxWidth:null,height:null,minHeight:null,maxHeight:null,paddingLeft:null},g={},h=10;if(g.remToPxRatio=B.remToPxRatio,n)var i=/^auto$/i.test(b.currentStyle.width),j=/^auto$/i.test(b.currentStyle.height);d&&e||(f.overflowX=u.getPropertyValue(b,"overflowX"),f.overflowY=u.getPropertyValue(b,"overflowY"),f.boxSizing=u.getPropertyValue(b,"boxSizing"),f.width=u.getPropertyValue(b,"width",null,!0),f.minWidth=u.getPropertyValue(b,"minWidth"),f.maxWidth=u.getPropertyValue(b,"maxWidth")||"none",f.height=u.getPropertyValue(b,"height",null,!0),f.minHeight=u.getPropertyValue(b,"minHeight"),f.maxHeight=u.getPropertyValue(b,"maxHeight")||"none",f.paddingLeft=u.getPropertyValue(b,"paddingLeft")),d?(g.percentToPxRatioWidth=B.lastPercentToPxWidth,g.percentToPxRatioHeight=B.lastPercentToPxHeight):(u.setPropertyValue(b,"overflowX","hidden"),u.setPropertyValue(b,"overflowY","hidden"),u.setPropertyValue(b,"boxSizing","content-box"),u.setPropertyValue(b,"width",h+"%"),u.setPropertyValue(b,"minWidth",h+"%"),u.setPropertyValue(b,"maxWidth",h+"%"),u.setPropertyValue(b,"height",h+"%"),u.setPropertyValue(b,"minHeight",h+"%"),u.setPropertyValue(b,"maxHeight",h+"%")),e?g.emToPxRatio=B.lastEmToPx:u.setPropertyValue(b,"paddingLeft",h+"em"),d||(g.percentToPxRatioWidth=B.lastPercentToPxWidth=(parseFloat(u.getPropertyValue(b,"width",null,!0))||1)/h,g.percentToPxRatioHeight=B.lastPercentToPxHeight=(parseFloat(u.getPropertyValue(b,"height",null,!0))||1)/h),e||(g.emToPxRatio=B.lastEmToPx=(parseFloat(u.getPropertyValue(b,"paddingLeft"))||1)/h);for(var k in f)null!==f[k]&&u.setPropertyValue(b,k,f[k]);return n?(i&&u.setPropertyValue(b,"width","auto"),j&&u.setPropertyValue(b,"height","auto")):(u.setPropertyValue(b,"height","auto"),f.height!==u.getPropertyValue(b,"height",null,!0)&&u.setPropertyValue(b,"height",f.height),u.setPropertyValue(b,"width","auto"),f.width!==u.getPropertyValue(b,"width",null,!0)&&u.setPropertyValue(b,"width",f.width)),r.debug>=1&&console.log("Unit ratios: "+JSON.stringify(g),b),g}if(0===v&&s&&f(s.begin)){var x=m.jquery?m.get():m;s.begin.call(x,x)}if("scroll"===y){var z,A,D,E=/^x$/i.test(g.axis)?"Left":"Top",F=parseFloat(g.offset)||0;g.container?g.container.jquery||g.container.nodeType?(g.container=g.container[0]||g.container,z=g.container["scroll"+E],D=z+q(b).position()[E.toLowerCase()]+F):g.container=null:(z=r.State.scrollAnchor[r.State["scrollProperty"+E]],A=r.State.scrollAnchor[r.State["scrollProperty"+("Left"===E?"Top":"Left")]],D=q(b).offset()[E.toLowerCase()]+F),j={scroll:{rootPropertyValue:!1,startValue:z,currentValue:z,endValue:D,unitType:"",easing:g.easing,scrollData:{container:g.container,direction:E,alternateValue:A}},element:b}}else if("reverse"===y){if(!q.data(b,k).tweensContainer)return void q.dequeue(b,g.queue);"none"===q.data(b,k).opts.display&&(q.data(b,k).opts.display="block"),q.data(b,k).opts.loop=!1,q.data(b,k).opts.begin=null,q.data(b,k).opts.complete=null,s.easing||delete g.easing,s.duration||delete g.duration,g=q.extend({},q.data(b,k).opts,g);var G=q.extend(!0,{},q.data(b,k).tweensContainer);for(var H in G)if("element"!==H){var I=G[H].startValue;G[H].startValue=G[H].currentValue=G[H].endValue,G[H].endValue=I,s&&(G[H].easing=g.easing)}j=G}else if("start"===y){var G;q.data(b,k).tweensContainer&&q.data(b,k).isAnimating===!0&&(G=q.data(b,k).tweensContainer);for(var J in o){var K=a(o[J]),L=K[0],M=K[1],N=K[2];J=u.Names.camelCase(J);var O=u.Hooks.getRoot(J),P=!1;if(u.Names.prefixCheck(O)[1]!==!1||u.Normalizations.registered[O]!==d){g.display&&"none"!==g.display&&/opacity|filter/.test(J)&&!N&&0!==L&&(N=0),g._cacheValues&&G&&G[J]?(N===d&&(N=G[J].endValue+G[J].unitType),P=q.data(b,k).rootPropertyValueCache[O]):u.Hooks.registered[J]?N===d?(P=u.getPropertyValue(b,O),N=u.getPropertyValue(b,J,P)):P=u.Hooks.templates[O][1]:N===d&&(N=u.getPropertyValue(b,J));var Q,R,S,T;Q=l(J,N),N=Q[0],S=Q[1],Q=l(J,L),L=Q[0].replace(/^([+-\/*])=/,function(a,b){return T=b,""}),R=Q[1],N=parseFloat(N)||0,L=parseFloat(L)||0;var U;if("%"===R&&(/^(fontSize|lineHeight)$/.test(J)?(L/=100,R="em"):/^scale/.test(J)?(L/=100,R=""):/(Red|Green|Blue)$/i.test(J)&&(L=L/100*255,R="")),/[\/*]/.test(T))R=S;else if(S!==R&&0!==N)if(0===L)R=S;else{U=U||w();var V=/margin|padding|left|right|width|text|word|letter/i.test(J)||/X$/.test(J)?"x":"y";switch(S){case"%":N*="x"===V?U.percentToPxRatioWidth:U.percentToPxRatioHeight;break;case"em":N*=U.emToPxRatio;break;case"rem":N*=U.remToPxRatio;break;case"px":}switch(R){case"%":N*=1/("x"===V?U.percentToPxRatioWidth:U.percentToPxRatioHeight);break;case"em":N*=1/U.emToPxRatio;break;case"rem":N*=1/U.remToPxRatio;break;case"px":}}switch(T){case"+":L=N+L;break;case"-":L=N-L;break;case"*":L=N*L;break;case"/":L=N/L}j[J]={rootPropertyValue:P,startValue:N,currentValue:N,endValue:L,unitType:R,easing:M},r.debug&&console.log("tweensContainer ("+J+"): "+JSON.stringify(j[J]),b)}else r.debug&&console.log("Skipping ["+O+"] due to a lack of browser support.")}j.element=b}j.element&&(C.push(j),q.data(b,k).tweensContainer=j,q.data(b,k).opts=g,q.data(b,k).isAnimating=!0,v===t-1?(r.State.calls.length>1e4&&(r.State.calls=e(r.State.calls)),r.State.calls.push([C,m,g]),r.State.isTicking===!1&&(r.State.isTicking=!0,i())):v++)}var b=this,g=q.extend({},r.defaults,s),j={};if("stop"===y)return q.queue(b,"string"==typeof s?s:"",[]),!0;switch(q.data(b,k)===d&&q.data(b,k,{isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}}),/^\d/.test(g.delay)&&g.queue!==!1&&q.queue(b,g.queue,function(a){r.velocityQueueEntryFlag=!0,setTimeout(a,parseFloat(g.delay))}),g.duration.toString().toLowerCase()){case"fast":g.duration=200;break;case"normal":g.duration=l;break;case"slow":g.duration=600;break;default:g.duration=parseFloat(g.duration)||1}g.easing=h(g.easing,g.duration),s&&s.complete&&!f(s.complete)&&(s.complete=null),g.display&&(g.display=g.display.toString().toLowerCase()),g.mobileHA=g.mobileHA&&r.State.isMobile&&!r.State.isGingerbread,g.queue===!1?g.delay?setTimeout(a,g.delay):a():q.queue(b,g.queue,function(b){r.velocityQueueEntryFlag=!0,a(b)}),""!==g.queue&&"fx"!==g.queue||"inprogress"===q.queue(b)[0]||q.dequeue(b)}var j,m,o,s;this.jquery||b.Zepto&&b.Zepto.zepto.isZ(this)?(j=!0,m=this,o=arguments[0],s=arguments[1]):(j=!1,m=arguments[0].jquery?[].slice.call(arguments[0]):arguments[0],o=arguments[1],s=arguments[2]);var t=g(m)||p(m)?m.length:1,v=0;if("stop"!==o&&!q.isPlainObject(s)){var w=j?1:2;s={};for(var x=w;x<arguments.length;x++)!p(arguments[x])&&/^\d/.test(arguments[x])?s.duration=parseFloat(arguments[x]):"string"==typeof arguments[x]?s.easing=arguments[x]:!p(arguments[x])||2!==arguments[x].length&&4!==arguments[x].length?f(arguments[x])&&(s.complete=arguments[x]):s.easing=arguments[x]}var y;switch(o){case"scroll":y="scroll";break;case"reverse":y="reverse";break;case"stop":y="stop";break;default:if(!q.isPlainObject(o)||q.isEmptyObject(o)){if("string"==typeof o&&r.Sequences[o]){var z=m,A=s.duration;return s.backwards===!0&&(m=(m.jquery?[].slice.call(m):m).reverse()),q.each(m,function(a,b){parseFloat(s.stagger)&&(s.delay=parseFloat(s.stagger)*a),s.drag&&(s.duration=parseFloat(A)||(/^(callout|transition)/.test(o)?1e3:l),s.duration=Math.max(s.duration*(s.backwards?1-a/t:(a+1)/t),.75*s.duration,200)),r.Sequences[o].call(b,b,s||{},a,t)}),z}return console.log("First argument was not a property map, a known action, or a registered sequence. Aborting."),m}y="start"}var B={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPxRatio:null},C=[];if(j)m.each(a);else if(1===t&&m.nodeType)a.call(m);else for(var D in m)m[D].nodeType&&a.call(m[D]);var E,F=q.extend({},r.defaults,s);if(F.loop=parseInt(F.loop),E=2*F.loop-1,F.loop)for(var G=0;E>G;G++){var H={delay:F.delay};F.complete&&G===E-1&&(H.complete=F.complete),j?m.velocity("reverse",H):r.animate(m,"reverse",H)}return m};var v=b.jQuery||b.Zepto;v&&(v.fn.velocity=r.animate,v.fn.velocity.defaults=r.defaults),q.each(["Down","Up"],function(a,b){r.Sequences["slide"+b]=function(a,c){var d=q.extend({},c),e={height:null,marginTop:null,marginBottom:null,paddingTop:null,paddingBottom:null,overflow:null,overflowX:null,overflowY:null},f=d.begin,g=d.complete,h=!1;d.display="Down"===b?d.display||"block":d.display||"none",d.begin=function(){function c(){a.style.display="block",e.height=r.CSS.getPropertyValue(a,"height"),a.style.height="auto",r.CSS.getPropertyValue(a,"height")===e.height&&(h=!0),r.CSS.setPropertyValue(a,"height",e.height+"px")}if("Down"===b){e.overflow=[r.CSS.getPropertyValue(a,"overflow"),0],e.overflowX=[r.CSS.getPropertyValue(a,"overflowX"),0],e.overflowY=[r.CSS.getPropertyValue(a,"overflowY"),0],a.style.overflow="hidden",a.style.overflowX="visible",a.style.overflowY="hidden",c();for(var d in e)/^overflow/.test(d)||(e[d]=[r.CSS.getPropertyValue(a,d),0]);a.style.display="none"}else{c();for(var d in e)e[d]=[0,r.CSS.getPropertyValue(a,d)];a.style.overflow="hidden",a.style.overflowX="visible",a.style.overflowY="hidden"}f&&f.call(a,a)},d.complete=function(a){var c="Down"===b?0:1;h===!0?e.height[c]="auto":e.height[c]+="px";for(var d in e)a.style[d]=e[d][c];g&&g.call(a,a)},r.animate(a,e,d)}}),q.each(["In","Out"],function(a,b){r.Sequences["fade"+b]=function(a,c,d,e){var f=q.extend({},c),g={opacity:"In"===b?1:0};d!==e-1&&(f.complete=f.begin=null),null!==f.display&&(f.display="In"===b?r.CSS.Values.getDisplayType(a):"none"),r.animate(this,g,f)}})}(window.jQuery||window.Zepto||window,window,document);(function(f){jQuery.fn.extend({slimScroll:function(g){var a=f.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},g);this.each(function(){function u(d){if(r){d=d||window.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(c,!0);d.preventDefault&&!k&&d.preventDefault();k||(d.returnValue=!1)}}function m(d,f,g){k=!1;var e=d,h=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),h),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+"px"}));l=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight());e=l*(b[0].scrollHeight-b.outerHeight());g&&(e=d,d=e/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),h),c.css({top:d+"px"}));b.scrollTop(e);b.trigger("slimscrolling",~~e);v();p()}function C(){window.addEventListener?(this.addEventListener("DOMMouseScroll",u,!1),this.addEventListener("mousewheel",u,!1)):document.attachEvent("onmousewheel",u)}function w(){s=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),D);c.css({height:s+"px"});var a=s==b.outerHeight()?"none":"block";c.css({display:a})}
function v(){w();clearTimeout(A);l==~~l?(k=a.allowPageScroll,B!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1;B=l;s>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function p(){a.alwaysVisible||(A=setTimeout(function(){a.disableFadeOut&&r||x||y||(c.fadeOut("slow"),h.fadeOut("slow"))},1E3))}var r,x,y,A,z,s,l,B,D=30,k=!1,b=f(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),c=b.parent().find("."+a.barClass),h=b.parent().find("."+
a.railClass);w();if(f.isPlainObject(g)){if("height"in g&&"auto"==g.height){b.parent().css("height","auto");b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",q);b.css("height",q)}if("scrollTo"in g)n=parseInt(a.scrollTo);else if("scrollBy"in g)n+=parseInt(a.scrollBy);else if("destroy"in g){c.remove();h.remove();b.unwrap();return}m(n,!1,!0)}}else{a.height="auto"==g.height?b.parent().height():g.height;n=f("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var h=f("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?{right:a.distance}:{left:a.distance};h.css(q);c.css(q);b.wrap(n);b.parent().append(c);b.parent().append(h);a.railDraggable&&c.bind("mousedown",function(a){var b=f(document);y=!0;t=parseFloat(c.css("top"));pageY=a.pageY;b.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;c.css("top",currTop);m(0,c.position().top,!1)});b.bind("mouseup.slimscroll",function(a){y=!1;p();b.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(a){a.stopPropagation();a.preventDefault();return!1});h.hover(function(){v()},function(){p()});c.hover(function(){x=!0},function(){x=!1});b.hover(function(){r=!0;v();p()},function(){r=!1;p()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(z=a.originalEvent.touches[0].pageY)});b.bind("touchmove",function(b){k||b.originalEvent.preventDefault();b.originalEvent.touches.length&&(m((z-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),z=b.originalEvent.touches[0].pageY)});w();"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):"top"!==a.start&&(m(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());C()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);(function(w){"use strict";w.picturefill=function(){var ps=w.document.getElementsByTagName("span");for(var i=0,il=ps.length;i<il;i++){if(ps[i].getAttribute("data-picture")!==null){var sources=ps[i].getElementsByTagName("span"),matches=[];for(var j=0,jl=sources.length;j<jl;j++){var media=sources[j].getAttribute("data-media");if(!media||(w.matchMedia&&w.matchMedia(media).matches)){matches.push(sources[j]);}}
var picImg=ps[i].getElementsByTagName("img")[0];if(matches.length){var matchedEl=matches.pop();if(!picImg||picImg.parentNode.nodeName==="NOSCRIPT"){picImg=w.document.createElement("img");picImg.alt=ps[i].getAttribute("data-alt");}
else if(matchedEl===picImg.parentNode){continue;}
picImg.src=matchedEl.getAttribute("data-src");matchedEl.appendChild(picImg);picImg.removeAttribute("width");picImg.removeAttribute("height");}
else if(picImg){picImg.parentNode.removeChild(picImg);}}}};if(w.addEventListener){w.addEventListener("resize",w.picturefill,false);w.addEventListener("DOMContentLoaded",function(){w.picturefill();w.removeEventListener("load",w.picturefill,false);},false);w.addEventListener("load",w.picturefill,false);}
else if(w.attachEvent){w.attachEvent("onload",w.picturefill);}}(this));var Handlebars={};(function(Handlebars,undefined){;Handlebars.VERSION="1.0.0";Handlebars.COMPILER_REVISION=4;Handlebars.REVISION_CHANGES={1:'<= 1.0.rc.2',2:'== 1.0.0-rc.3',3:'== 1.0.0-rc.4',4:'>= 1.0.0'};Handlebars.helpers={};Handlebars.partials={};var toString=Object.prototype.toString,functionType='[object Function]',objectType='[object Object]';Handlebars.registerHelper=function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Handlebars.Exception('Arg not supported with multiple helpers');}
Handlebars.Utils.extend(this.helpers,name);}else{if(inverse){fn.not=inverse;}
this.helpers[name]=fn;}};Handlebars.registerPartial=function(name,str){if(toString.call(name)===objectType){Handlebars.Utils.extend(this.partials,name);}else{this.partials[name]=str;}};Handlebars.registerHelper('helperMissing',function(arg){if(arguments.length===2){return undefined;}else{throw new Error("Missing helper: '"+arg+"'");}});Handlebars.registerHelper('blockHelperMissing',function(context,options){var inverse=options.inverse||function(){},fn=options.fn;var type=toString.call(context);if(type===functionType){context=context.call(this);}
if(context===true){return fn(this);}else if(context===false||context==null){return inverse(this);}else if(type==="[object Array]"){if(context.length>0){return Handlebars.helpers.each(context,options);}else{return inverse(this);}}else{return fn(context);}});Handlebars.K=function(){};Handlebars.createFrame=Object.create||function(object){Handlebars.K.prototype=object;var obj=new Handlebars.K();Handlebars.K.prototype=null;return obj;};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:'debug',1:'info',2:'warn',3:'error'},log:function(level,obj){if(Handlebars.logger.level<=level){var method=Handlebars.logger.methodMap[level];if(typeof console!=='undefined'&&console[method]){console[method].call(console,obj);}}}};Handlebars.log=function(level,obj){Handlebars.logger.log(level,obj);};Handlebars.registerHelper('each',function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var type=toString.call(context);if(type===functionType){context=context.call(this);}
if(options.data){data=Handlebars.createFrame(options.data);}
if(context&&typeof context==='object'){if(context instanceof Array){for(var j=context.length;i<j;i++){if(data){data.index=i;}
ret=ret+fn(context[i],{data:data});}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key;}
ret=ret+fn(context[key],{data:data});i++;}}}}
if(i===0){ret=inverse(this);}
return ret;});Handlebars.registerHelper('if',function(conditional,options){var type=toString.call(conditional);if(type===functionType){conditional=conditional.call(this);}
if(!conditional||Handlebars.Utils.isEmpty(conditional)){return options.inverse(this);}else{return options.fn(this);}});Handlebars.registerHelper('unless',function(conditional,options){return Handlebars.helpers['if'].call(this,conditional,{fn:options.inverse,inverse:options.fn});});Handlebars.registerHelper('with',function(context,options){var type=toString.call(context);if(type===functionType){context=context.call(this);}
if(!Handlebars.Utils.isEmpty(context))return options.fn(context);});Handlebars.registerHelper('log',function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;Handlebars.log(level,context);});;var handlebars=(function(){var parser={trace:function trace(){},yy:{},symbols_:{"error":2,"root":3,"program":4,"EOF":5,"simpleInverse":6,"statements":7,"statement":8,"openInverse":9,"closeBlock":10,"openBlock":11,"mustache":12,"partial":13,"CONTENT":14,"COMMENT":15,"OPEN_BLOCK":16,"inMustache":17,"CLOSE":18,"OPEN_INVERSE":19,"OPEN_ENDBLOCK":20,"path":21,"OPEN":22,"OPEN_UNESCAPED":23,"CLOSE_UNESCAPED":24,"OPEN_PARTIAL":25,"partialName":26,"params":27,"hash":28,"dataName":29,"param":30,"STRING":31,"INTEGER":32,"BOOLEAN":33,"hashSegments":34,"hashSegment":35,"ID":36,"EQUALS":37,"DATA":38,"pathSegments":39,"SEP":40,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=new yy.ProgramNode([],$$[$0]);break;case 3:this.$=new yy.ProgramNode($$[$0-2],$$[$0]);break;case 4:this.$=new yy.ProgramNode($$[$0-1],[]);break;case 5:this.$=new yy.ProgramNode($$[$0]);break;case 6:this.$=new yy.ProgramNode([],[]);break;case 7:this.$=new yy.ProgramNode([]);break;case 8:this.$=[$$[$0]];break;case 9:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 10:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0]);break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0]);break;case 12:this.$=$$[$0];break;case 13:this.$=$$[$0];break;case 14:this.$=new yy.ContentNode($$[$0]);break;case 15:this.$=new yy.CommentNode($$[$0]);break;case 16:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 17:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 18:this.$=$$[$0-1];break;case 19:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],$$[$0-2][2]==='&');break;case 20:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],true);break;case 21:this.$=new yy.PartialNode($$[$0-1]);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1]);break;case 23:break;case 24:this.$=[[$$[$0-2]].concat($$[$0-1]),$$[$0]];break;case 25:this.$=[[$$[$0-1]].concat($$[$0]),null];break;case 26:this.$=[[$$[$0-1]],$$[$0]];break;case 27:this.$=[[$$[$0]],null];break;case 28:this.$=[[$$[$0]],null];break;case 29:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 30:this.$=[$$[$0]];break;case 31:this.$=$$[$0];break;case 32:this.$=new yy.StringNode($$[$0]);break;case 33:this.$=new yy.IntegerNode($$[$0]);break;case 34:this.$=new yy.BooleanNode($$[$0]);break;case 35:this.$=$$[$0];break;case 36:this.$=new yy.HashNode($$[$0]);break;case 37:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 38:this.$=[$$[$0]];break;case 39:this.$=[$$[$0-2],$$[$0]];break;case 40:this.$=[$$[$0-2],new yy.StringNode($$[$0])];break;case 41:this.$=[$$[$0-2],new yy.IntegerNode($$[$0])];break;case 42:this.$=[$$[$0-2],new yy.BooleanNode($$[$0])];break;case 43:this.$=[$$[$0-2],$$[$0]];break;case 44:this.$=new yy.PartialNameNode($$[$0]);break;case 45:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0]));break;case 46:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0]));break;case 47:this.$=new yy.DataNode($$[$0]);break;case 48:this.$=new yy.IdNode($$[$0]);break;case 49:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 50:this.$=[{part:$$[$0]}];break;}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function parseError(str,hash){throw new Error(str);},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")
this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")
this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n;}
function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token;}
return token;}
var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state];}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex();}
action=table[state]&&table[state][symbol];}
if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])
if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'");}
if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'";}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'");}
this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected});}}
if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);}
switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)
recovering--;}else{symbol=preErrorSymbol;preErrorSymbol=null;}
break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]];}
r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r;}
if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len);}
stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true;}}
return true;}};var lexer=(function(){var lexer=({EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash);}else{throw new Error(str);}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match='';this.conditionStack=['INITIAL'];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this;},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++;}else{this.yylloc.last_column++;}
if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch;},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len];}
return this;},more:function(){this._more=true;return this;},less:function(n){this.unput(this.match.slice(n));},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?'...':'')+past.substr(-20).replace(/\n/g,"");},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length);}
return(next.substr(0,20)+(next.length>20?'...':'')).replace(/\n/g,"");},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^";},next:function(){if(this.done){return this.EOF;}
if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext='';this.match='';}
var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex)break;}}
if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng];}
this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token)return token;else return;}
if(this._input===""){return this.EOF;}else{return this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),{text:"",token:null,line:this.yylineno});}},lex:function lex(){var r=this.next();if(typeof r!=='undefined'){return r;}else{return this.lex();}},begin:function begin(condition){this.conditionStack.push(condition);},popState:function popState(){return this.conditionStack.pop();},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;},topState:function(){return this.conditionStack[this.conditionStack.length-2];},pushState:function begin(condition){this.begin(condition);}});lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START
switch($avoiding_name_collisions){case 0:yy_.yytext="\\";return 14;break;case 1:if(yy_.yytext.slice(-1)!=="\\")this.begin("mu");if(yy_.yytext.slice(-1)==="\\")yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1),this.begin("emu");if(yy_.yytext)return 14;break;case 2:return 14;break;case 3:if(yy_.yytext.slice(-1)!=="\\")this.popState();if(yy_.yytext.slice(-1)==="\\")yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1);return 14;break;case 4:yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-4);this.popState();return 15;break;case 5:return 25;break;case 6:return 16;break;case 7:return 20;break;case 8:return 19;break;case 9:return 19;break;case 10:return 23;break;case 11:return 22;break;case 12:this.popState();this.begin('com');break;case 13:yy_.yytext=yy_.yytext.substr(3,yy_.yyleng-5);this.popState();return 15;break;case 14:return 22;break;case 15:return 37;break;case 16:return 36;break;case 17:return 36;break;case 18:return 40;break;case 19:break;case 20:this.popState();return 24;break;case 21:this.popState();return 18;break;case 22:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"');return 31;break;case 23:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\'/g,"'");return 31;break;case 24:return 38;break;case 25:return 33;break;case 26:return 33;break;case 27:return 32;break;case 28:return 36;break;case 29:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2);return 36;break;case 30:return'INVALID';break;case 31:return 5;break;}};lexer.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={"mu":{"rules":[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],"inclusive":false},"emu":{"rules":[3],"inclusive":false},"com":{"rules":[4],"inclusive":false},"INITIAL":{"rules":[0,1,2,31],"inclusive":true}};return lexer;})()
parser.lexer=lexer;function Parser(){this.yy={};}Parser.prototype=parser;parser.Parser=Parser;return new Parser;})();;Handlebars.Parser=handlebars;Handlebars.parse=function(input){if(input.constructor===Handlebars.AST.ProgramNode){return input;}
Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(input);};;Handlebars.AST={};Handlebars.AST.ProgramNode=function(statements,inverse){this.type="program";this.statements=statements;if(inverse){this.inverse=new Handlebars.AST.ProgramNode(inverse);}};Handlebars.AST.MustacheNode=function(rawParams,hash,unescaped){this.type="mustache";this.escaped=!unescaped;this.hash=hash;var id=this.id=rawParams[0];var params=this.params=rawParams.slice(1);var eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash);};Handlebars.AST.PartialNode=function(partialName,context){this.type="partial";this.partialName=partialName;this.context=context;};Handlebars.AST.BlockNode=function(mustache,program,inverse,close){var verifyMatch=function(open,close){if(open.original!==close.original){throw new Handlebars.Exception(open.original+" doesn't match "+close.original);}};verifyMatch(mustache.id,close);this.type="block";this.mustache=mustache;this.program=program;this.inverse=inverse;if(this.inverse&&!this.program){this.isInverse=true;}};Handlebars.AST.ContentNode=function(string){this.type="content";this.string=string;};Handlebars.AST.HashNode=function(pairs){this.type="hash";this.pairs=pairs;};Handlebars.AST.IdNode=function(parts){this.type="ID";var original="",dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||'')+part;if(part===".."||part==="."||part==="this"){if(dig.length>0){throw new Handlebars.Exception("Invalid path: "+original);}
else if(part===".."){depth++;}
else{this.isScoped=true;}}
else{dig.push(part);}}
this.original=original;this.parts=dig;this.string=dig.join('.');this.depth=depth;this.isSimple=parts.length===1&&!this.isScoped&&depth===0;this.stringModeValue=this.string;};Handlebars.AST.PartialNameNode=function(name){this.type="PARTIAL_NAME";this.name=name.original;};Handlebars.AST.DataNode=function(id){this.type="DATA";this.id=id;};Handlebars.AST.StringNode=function(string){this.type="STRING";this.original=this.string=this.stringModeValue=string;};Handlebars.AST.IntegerNode=function(integer){this.type="INTEGER";this.original=this.integer=integer;this.stringModeValue=Number(integer);};Handlebars.AST.BooleanNode=function(bool){this.type="BOOLEAN";this.bool=bool;this.stringModeValue=bool==="true";};Handlebars.AST.CommentNode=function(comment){this.type="comment";this.comment=comment;};;var errorProps=['description','fileName','lineNumber','message','name','number','stack'];Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]];}};Handlebars.Exception.prototype=new Error();Handlebars.SafeString=function(string){this.string=string;};Handlebars.SafeString.prototype.toString=function(){return this.string.toString();};var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;var escapeChar=function(chr){return escape[chr]||"&amp;";};Handlebars.Utils={extend:function(obj,value){for(var key in value){if(value.hasOwnProperty(key)){obj[key]=value[key];}}},escapeExpression:function(string){if(string instanceof Handlebars.SafeString){return string.toString();}else if(string==null||string===false){return"";}
string=string.toString();if(!possible.test(string)){return string;}
return string.replace(badChars,escapeChar);},isEmpty:function(value){if(!value&&value!==0){return true;}else if(toString.call(value)==="[object Array]"&&value.length===0){return true;}else{return false;}}};;var Compiler=Handlebars.Compiler=function(){};var JavaScriptCompiler=Handlebars.JavaScriptCompiler=function(){};Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,out=[],params,param;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode.opcode==='DECLARE'){out.push("DECLARE "+opcode.name+"="+opcode.value);}else{params=[];for(var j=0;j<opcode.args.length;j++){param=opcode.args[j];if(typeof param==="string"){param="\""+param.replace("\n","\\n")+"\"";}
params.push(param);}
out.push(opcode.opcode+" "+params.join(" "));}}
return out.join("\n");},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return false;}
for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length){return false;}
for(var j=0;j<opcode.args.length;j++){if(opcode.args[j]!==otherOpcode.args[j]){return false;}}}
len=this.children.length;if(other.children.length!==len){return false;}
for(i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return false;}}
return true;},guid:0,compile:function(program,options){this.children=[];this.depths={list:[]};this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={'helperMissing':true,'blockHelperMissing':true,'each':true,'if':true,'unless':true,'with':true,'log':true};if(knownHelpers){for(var name in knownHelpers){this.options.knownHelpers[name]=knownHelpers[name];}}
return this.program(program);},accept:function(node){return this[node.type](node);},program:function(program){var statements=program.statements,statement;this.opcodes=[];for(var i=0,l=statements.length;i<l;i++){statement=statements[i];this[statement.type](statement);}
this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b;});return this;},compileProgram:function(program){var result=new this.compiler().compile(program,this.options);var guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue;}
else{this.addDepth(depth-1);}}
return guid;},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;if(program){program=this.compileProgram(program);}
if(inverse){inverse=this.compileProgram(inverse);}
var type=this.classifyMustache(mustache);if(type==="helper"){this.helperMustache(mustache,program,inverse);}else if(type==="simple"){this.simpleMustache(mustache);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);this.opcode('emptyHash');this.opcode('blockValue');}else{this.ambiguousMustache(mustache,program,inverse);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);this.opcode('emptyHash');this.opcode('ambiguousBlockValue');}
this.opcode('append');},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode('pushHash');for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];if(this.options.stringParams){if(val.depth){this.addDepth(val.depth);}
this.opcode('getContext',val.depth||0);this.opcode('pushStringParam',val.stringModeValue,val.type);}else{this.accept(val);}
this.opcode('assignToHash',pair[0]);}
this.opcode('popHash');},partial:function(partial){var partialName=partial.partialName;this.usePartial=true;if(partial.context){this.ID(partial.context);}else{this.opcode('push','depth0');}
this.opcode('invokePartial',partialName.name);this.opcode('append');},content:function(content){this.opcode('appendContent',content.string);},mustache:function(mustache){var options=this.options;var type=this.classifyMustache(mustache);if(type==="simple"){this.simpleMustache(mustache);}else if(type==="helper"){this.helperMustache(mustache);}else{this.ambiguousMustache(mustache);}
if(mustache.escaped&&!options.noEscape){this.opcode('appendEscaped');}else{this.opcode('append');}},ambiguousMustache:function(mustache,program,inverse){var id=mustache.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode('getContext',id.depth);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);this.opcode('invokeAmbiguous',name,isBlock);},simpleMustache:function(mustache){var id=mustache.id;if(id.type==='DATA'){this.DATA(id);}else if(id.parts.length){this.ID(id);}else{this.addDepth(id.depth);this.opcode('getContext',id.depth);this.opcode('pushContext');}
this.opcode('resolvePossibleLambda');},helperMustache:function(mustache,program,inverse){var params=this.setupFullMustacheParams(mustache,program,inverse),name=mustache.id.parts[0];if(this.options.knownHelpers[name]){this.opcode('invokeKnownHelper',params.length,name);}else if(this.options.knownHelpersOnly){throw new Error("You specified knownHelpersOnly, but used the unknown helper "+name);}else{this.opcode('invokeHelper',params.length,name);}},ID:function(id){this.addDepth(id.depth);this.opcode('getContext',id.depth);var name=id.parts[0];if(!name){this.opcode('pushContext');}else{this.opcode('lookupOnContext',id.parts[0]);}
for(var i=1,l=id.parts.length;i<l;i++){this.opcode('lookup',id.parts[i]);}},DATA:function(data){this.options.data=true;if(data.id.isScoped||data.id.depth){throw new Handlebars.Exception('Scoped data references are not supported: '+data.original);}
this.opcode('lookupData');var parts=data.id.parts;for(var i=0,l=parts.length;i<l;i++){this.opcode('lookup',parts[i]);}},STRING:function(string){this.opcode('pushString',string.string);},INTEGER:function(integer){this.opcode('pushLiteral',integer.integer);},BOOLEAN:function(bool){this.opcode('pushLiteral',bool.bool);},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)});},declare:function(name,value){this.opcodes.push({opcode:'DECLARE',name:name,value:value});},addDepth:function(depth){if(isNaN(depth)){throw new Error("EWOT");}
if(depth===0){return;}
if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth);}},classifyMustache:function(mustache){var isHelper=mustache.isHelper;var isEligible=mustache.eligibleHelper;var options=this.options;if(isEligible&&!isHelper){var name=mustache.id.parts[0];if(options.knownHelpers[name]){isHelper=true;}else if(options.knownHelpersOnly){isEligible=false;}}
if(isHelper){return"helper";}
else if(isEligible){return"ambiguous";}
else{return"simple";}},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth);}
this.opcode('getContext',param.depth||0);this.opcode('pushStringParam',param.stringModeValue,param.type);}else{this[param.type](param);}}},setupMustacheParams:function(mustache){var params=mustache.params;this.pushParams(params);if(mustache.hash){this.hash(mustache.hash);}else{this.opcode('emptyHash');}
return params;},setupFullMustacheParams:function(mustache,program,inverse){var params=mustache.params;this.pushParams(params);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);if(mustache.hash){this.hash(mustache.hash);}else{this.opcode('emptyHash');}
return params;}};var Literal=function(value){this.value=value;};JavaScriptCompiler.prototype={nameLookup:function(parent,name){if(/^[0-9]+$/.test(name)){return parent+"["+name+"]";}else if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){return parent+"."+name;}
else{return parent+"['"+name+"']";}},appendToBuffer:function(string){if(this.environment.isSimple){return"return "+string+";";}else{return{appendToBuffer:true,content:string,toString:function(){return"buffer += "+string+";";}};}},initializeBuffer:function(){return this.quotedString("");},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options||{};Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(l=opcodes.length;this.i<l;this.i++){opcode=opcodes[this.i];if(opcode.opcode==='DECLARE'){this[opcode.name]=opcode.value;}else{this[opcode.opcode].apply(this,opcode.args);}}
return this.createFunctionContext(asObject);},nextOpcode:function(){var opcodes=this.environment.opcodes;return opcodes[this.i+1];},eat:function(){this.i=this.i+1;},preamble:function(){var out=[];if(!this.isChild){var namespace=this.namespace;var copies="helpers = this.merge(helpers, "+namespace+".helpers);";if(this.environment.usePartial){copies=copies+" partials = this.merge(partials, "+namespace+".partials);";}
if(this.options.data){copies=copies+" data = data || {};";}
out.push(copies);}else{out.push('');}
if(!this.environment.isSimple){out.push(", buffer = "+this.initializeBuffer());}else{out.push("");}
this.lastContext=0;this.source=out;},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){this.source[1]=this.source[1]+", "+locals.join(", ");}
if(!this.isChild){for(var alias in this.context.aliases){if(this.context.aliases.hasOwnProperty(alias)){this.source[1]=this.source[1]+', '+alias+'='+this.context.aliases[alias];}}}
if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";";}
if(!this.isChild){this.source[1]+='\n'+this.context.programs.join('\n')+'\n';}
if(!this.environment.isSimple){this.source.push("return buffer;");}
var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i]);}
var source=this.mergeSource();if(!this.isChild){var revision=Handlebars.COMPILER_REVISION,versions=Handlebars.REVISION_CHANGES[revision];source="this.compilerInfo = ["+revision+",'"+versions+"'];\n"+source;}
if(asObject){params.push(source);return Function.apply(this,params);}else{var functionSource='function '+(this.name||'')+'('+params.join(',')+') {\n  '+source+'}';Handlebars.log(Handlebars.logger.DEBUG,functionSource+"\n\n");return functionSource;}},mergeSource:function(){var source='',buffer;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];if(line.appendToBuffer){if(buffer){buffer=buffer+'\n    + '+line.content;}else{buffer=line.content;}}else{if(buffer){source+='buffer += '+buffer+';\n  ';buffer=undefined;}
source+=line+'\n  ';}}
return source;},blockValue:function(){this.context.aliases.blockHelperMissing='helpers.blockHelperMissing';var params=["depth0"];this.setupParams(0,params);this.replaceStack(function(current){params.splice(1,0,current);return"blockHelperMissing.call("+params.join(", ")+")";});},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing='helpers.blockHelperMissing';var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current);params[params.length-1]='options';this.source.push("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }");},appendContent:function(content){this.source.push(this.appendToBuffer(this.quotedString(content)));},append:function(){this.flushInline();var local=this.popStack();this.source.push("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }");}},appendEscaped:function(){this.context.aliases.escapeExpression='this.escapeExpression';this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"));},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth;}},lookupOnContext:function(name){this.push(this.nameLookup('depth'+this.lastContext,name,'context'));},pushContext:function(){this.pushStackLiteral('depth'+this.lastContext);},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current;});},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,'context');});},lookupData:function(id){this.push('data');},pushStringParam:function(string,type){this.pushStackLiteral('depth'+this.lastContext);this.pushString(type);if(typeof string==='string'){this.pushString(string);}else{this.pushStackLiteral(string);}},emptyHash:function(){this.pushStackLiteral('{}');if(this.options.stringParams){this.register('hashTypes','{}');this.register('hashContexts','{}');}},pushHash:function(){this.hash={values:[],types:[],contexts:[]};},popHash:function(){var hash=this.hash;this.hash=undefined;if(this.options.stringParams){this.register('hashContexts','{'+hash.contexts.join(',')+'}');this.register('hashTypes','{'+hash.types.join(',')+'}');}
this.push('{\n    '+hash.values.join(',\n    ')+'\n  }');},pushString:function(string){this.pushStackLiteral(this.quotedString(string));},push:function(expr){this.inlineStack.push(expr);return expr;},pushLiteral:function(value){this.pushStackLiteral(value);},pushProgram:function(guid){if(guid!=null){this.pushStackLiteral(this.programExpression(guid));}else{this.pushStackLiteral(null);}},invokeHelper:function(paramSize,name){this.context.aliases.helperMissing='helpers.helperMissing';var helper=this.lastHelper=this.setupHelper(paramSize,name,true);var nonHelper=this.nameLookup('depth'+this.lastContext,name,'context');this.push(helper.name+' || '+nonHelper);this.replaceStack(function(name){return name+' ? '+name+'.call('+
helper.callParams+") "+": helperMissing.call("+
helper.helperMissingParams+")";});},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")");},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"';this.pushStackLiteral('{}');var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup('helpers',name,'helper');var nonHelper=this.nameLookup('depth'+this.lastContext,name,'context');var nextStack=this.nextStack();this.source.push('if ('+nextStack+' = '+helperName+') { '+nextStack+' = '+nextStack+'.call('+helper.callParams+'); }');this.source.push('else { '+nextStack+' = '+nonHelper+'; '+nextStack+' = typeof '+nextStack+' === functionType ? '+nextStack+'.apply(depth0) : '+nextStack+'; }');},invokePartial:function(name){var params=[this.nameLookup('partials',name,'partial'),"'"+name+"'",this.popStack(),"helpers","partials"];if(this.options.data){params.push("data");}
this.context.aliases.self="this";this.push("self.invokePartial("+params.join(", ")+")");},assignToHash:function(key){var value=this.popStack(),context,type;if(this.options.stringParams){type=this.popStack();context=this.popStack();}
var hash=this.hash;if(context){hash.contexts.push("'"+key+"': "+context);}
if(type){hash.types.push("'"+key+"': "+type);}
hash.values.push("'"+key+"': ("+value+")");},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler();var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push('');index=this.context.programs.length;child.index=index;child.name='program'+index;this.context.programs[index]=compiler.compile(child,options,this.context);this.context.environments[index]=child;}else{child.index=index;child.name='program'+index;}}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child)){return i;}}},programExpression:function(guid){this.context.aliases.self="this";if(guid==null){return"self.noop";}
var child=this.environment.children[guid],depths=child.depths.list,depth;var programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++){depth=depths[i];if(depth===1){programParams.push("depth0");}
else{programParams.push("depth"+(depth-1));}}
return(depths.length===0?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")";},register:function(name,val){this.useRegister(name);this.source.push(name+" = "+val+";");},useRegister:function(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name);}},pushStackLiteral:function(item){return this.push(new Literal(item));},pushStack:function(item){this.flushInline();var stack=this.incrStack();if(item){this.source.push(stack+" = "+item+";");}
this.compileStack.push(stack);return stack;},replaceStack:function(callback){var prefix='',inline=this.isInline(),stack;if(inline){var top=this.popStack(true);if(top instanceof Literal){stack=top.value;}else{var name=this.stackSlot?this.topStackName():this.incrStack();prefix='('+this.push(name)+' = '+top+'),';stack=this.topStack();}}else{stack=this.topStack();}
var item=callback.call(this,stack);if(inline){if(this.inlineStack.length||this.compileStack.length){this.popStack();}
this.push('('+prefix+item+')');}else{if(!/^stack/.test(stack)){stack=this.nextStack();}
this.source.push(stack+" = ("+prefix+item+");");}
return stack;},nextStack:function(){return this.pushStack();},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot);}
return this.topStackName();},topStackName:function(){return"stack"+this.stackSlot;},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal){this.compileStack.push(entry);}else{this.pushStack(entry);}}}},isInline:function(){return this.inlineStack.length;},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&(item instanceof Literal)){return item.value;}else{if(!inline){this.stackSlot--;}
return item;}},topStack:function(wrapped){var stack=(this.isInline()?this.inlineStack:this.compileStack),item=stack[stack.length-1];if(!wrapped&&(item instanceof Literal)){return item.value;}else{return item;}},quotedString:function(str){return'"'+str.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/\u2028/g,'\\u2028').replace(/\u2029/g,'\\u2029')+'"';},setupHelper:function(paramSize,name,missingParams){var params=[];this.setupParams(paramSize,params,missingParams);var foundHelper=this.nameLookup('helpers',name,'helper');return{params:params,name:foundHelper,callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")};},setupParams:function(paramSize,params,useRegister){var options=[],contexts=[],types=[],param,inverse,program;options.push("hash:"+this.popStack());inverse=this.popStack();program=this.popStack();if(program||inverse){if(!program){this.context.aliases.self="this";program="self.noop";}
if(!inverse){this.context.aliases.self="this";inverse="self.noop";}
options.push("inverse:"+inverse);options.push("fn:"+program);}
for(var i=0;i<paramSize;i++){param=this.popStack();params.push(param);if(this.options.stringParams){types.push(this.popStack());contexts.push(this.popStack());}}
if(this.options.stringParams){options.push("contexts:["+contexts.join(",")+"]");options.push("types:["+types.join(",")+"]");options.push("hashContexts:hashContexts");options.push("hashTypes:hashTypes");}
if(this.options.data){options.push("data:data");}
options="{"+options.join(",")+"}";if(useRegister){this.register('options',options);params.push('options');}else{params.push(options);}
return params.join(", ");}};var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true;}
JavaScriptCompiler.isValidJavaScriptVariableName=function(name){if(!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(name)){return true;}
return false;};Handlebars.precompile=function(input,options){if(input==null||(typeof input!=='string'&&input.constructor!==Handlebars.AST.ProgramNode)){throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);}
options=options||{};if(!('data'in options)){options.data=true;}
var ast=Handlebars.parse(input);var environment=new Compiler().compile(ast,options);return new JavaScriptCompiler().compile(environment,options);};Handlebars.compile=function(input,options){if(input==null||(typeof input!=='string'&&input.constructor!==Handlebars.AST.ProgramNode)){throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);}
options=options||{};if(!('data'in options)){options.data=true;}
var compiled;function compile(){var ast=Handlebars.parse(input);var environment=new Compiler().compile(ast,options);var templateSpec=new JavaScriptCompiler().compile(environment,options,undefined,true);return Handlebars.template(templateSpec);}
return function(context,options){if(!compiled){compiled=compile();}
return compiled.call(this,context,options);};};;Handlebars.VM={template:function(templateSpec){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){programWrapper=Handlebars.VM.program(i,fn,data);}else if(!programWrapper){programWrapper=this.programs[i]=Handlebars.VM.program(i,fn);}
return programWrapper;},merge:function(param,common){var ret=param||common;if(param&&common){ret={};Handlebars.Utils.extend(ret,common);Handlebars.Utils.extend(ret,param);}
return ret;},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var result=templateSpec.call(container,Handlebars,context,options.helpers,options.partials,options.data);var compilerInfo=container.compilerInfo||[],compilerRevision=compilerInfo[0]||1,currentRevision=Handlebars.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=Handlebars.REVISION_CHANGES[currentRevision],compilerVersions=Handlebars.REVISION_CHANGES[compilerRevision];throw"Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").";}else{throw"Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").";}}
return result;};},programWithDepth:function(i,fn,data){var args=Array.prototype.slice.call(arguments,3);var program=function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args));};program.program=i;program.depth=args.length;return program;},program:function(i,fn,data){var program=function(context,options){options=options||{};return fn(context,options.data||data);};program.program=i;program.depth=0;return program;},noop:function(){return"";},invokePartial:function(partial,name,context,helpers,partials,data){var options={helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Handlebars.Exception("The partial "+name+" could not be found");}else if(partial instanceof Function){return partial(context,options);}else if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+name+" could not be compiled when running in runtime-only mode");}else{partials[name]=Handlebars.compile(partial,{data:data!==undefined});return partials[name](context,options);}}};Handlebars.template=Handlebars.VM.template;;})(Handlebars);;if(!(window.console&&console.log)){(function(){var noop=function(){};var methods=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','markTimeline','table','time','timeEnd','timeStamp','trace','warn'];var length=methods.length;var console=window.console={};while(length--){console[methods[length]]=noop;}}());}
(function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),r=0;i.length>r;r++)t.addEventListener(i[r],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!s){(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which)&&(o=!0),u.match(/touch|pointer/)&&(s=!0);var h=0;o&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,c):u.match(/touch/)?h=c.touches.length:s||(h=u.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),h||null===r?r=c:c=r,n.call(i.detection,a.collectEventData(t,e,c)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,c))),h||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var r=this.getTouchList(n,e),o=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(r),timeStamp:(new Date).getTime(),target:n.target,touches:r,eventType:e,pointerType:o,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,r=t.length;r>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var r=0;i.length>r;r++)for(var o in e)e.hasOwnProperty(o)&&(n=o,i[r]&&(n=i[r]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,c=i.utils.getVelocity(o,s,a);return i.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?0>t.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>t.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&i.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(2>t.touches.length))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var r=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(n.options.transform_min_scale>r&&n.options.transform_min_rotation>o)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),o>n.options.transform_min_rotation&&n.trigger("rotate",t),r>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),e):(n.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&n.trigger(this.name,t),e)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))})(this),function(t,e){"use strict";t!==e&&(Hammer.event.bindDom=function(n,i,r){t(n).on(i,function(t){var n=t.originalEvent||t;n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n.target||(n.target=t.target),n.which===e&&(n.which=n.button),n.preventDefault||(n.preventDefault=t.preventDefault),n.stopPropagation||(n.stopPropagation=t.stopPropagation),r.call(this,n)})},Hammer.Instance.prototype.on=function(e,n){return t(this.element).on(e,n)},Hammer.Instance.prototype.off=function(e,n){return t(this.element).off(e,n)},Hammer.Instance.prototype.trigger=function(e,n){var i=t(this.element);return i.has(n.target).length&&(i=t(n.target)),i.trigger({type:e,gesture:n})},t.fn.hammer=function(e){return this.each(function(){var n=t(this),i=n.data("hammer");i?i&&e&&Hammer.utils.extend(i.options,e):n.data("hammer",new Hammer(this,e||{}))})})}(window.jQuery||window.Zepto);(function(c,f){var g=c(f),h=c(document.body),j={pageContainer:"ul",pageElements:"li",direction:"horizontal",minTouchDistance:"0",onSwipeStart:c.noop,onSwipeEnd:c.noop,onDrag:c.noop,onDragEnd:c.noop,keyboardNavigation:!1,scribe:0,borderBetweenPages:0,duration:300,hammerSettings:{drag_min_distance:0,css_hacks:!1,prevent_default:!0}},k={37:"left",38:"up",39:"right",40:"down"},l={overflow:"hidden",padding:0,cursor:"grab"},e=function(a,b){this.settings=c.extend({},j,b);this.container=a;this.pageContainer=a.find(this.settings.pageContainer);this.scrollBorder={x:0,y:0};this.page=0;this.preventScroll=!1;this.pageCssProperties={margin:0};this.container.css(l);this.updateInstance(b);this._observe()},m={_scroll:function(a){switch(this.settings.direction){case"horizontal":this.pageContainer.css("-webkit-transform","translate3d("+a.x+"px, 0, 0)");break;case"vertical":this.pageContainer.css("-webkit-transform","translate3d(0, "+a.y+"px, 0)")}},_animateScroll:function(){this.activeElement=this.pages.eq(this.page);this.pageContainer.css("-webkit-transition","-webkit-transform "+this.settings.duration+"ms ease-out");this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y});f.setTimeout(c.proxy(this.afterScroll,this),this.settings.duration)},afterScroll:function(){this._onSwipeEnd();this.pageContainer.css("-webkit-transition","-webkit-transform 0")}},n={_scroll:function(a){switch(this.settings.direction){case"horizontal":this.pageContainer.css({"margin-left":a.x});break;case"vertical":this.pageContainer.css({"margin-top":a.y})}},_animateScroll:function(){var a;this.activeElement=this.pages.eq(this.page);switch(this.settings.direction){case"horizontal":a={"margin-left":-this.scrollBorder.x};break;case"vertical":a={"margin-top":-this.scrollBorder.y}}this.pageContainer.animate(a,this.settings.duration,"linear",c.proxy(this._onSwipeEnd,this))}};"WebKitCSSMatrix"in f&&"m11"in new WebKitCSSMatrix?c.extend(e.prototype,m):c.extend(e.prototype,n);c.extend(e.prototype,{_checkOverscroll:function(a,b,c){var d={x:b,y:c,overscroll:!0};switch(a){case"right":if(!this.scrollBorder.x)return Math.round(d.x=(b-this.scrollBorder.x)/5),d;break;case"left":if((this.pages.length-1)*this.pageDimentions.width<=this.scrollBorder.x)return d.x=Math.round(-((this.pages.length-1)*(this.pageDimentions.width+this.settings.borderBetweenPages))+b/5),d;break;case"down":if(!this.scrollBorder.y)return d.y=Math.round((c-this.scrollBorder.y)/5),d;break;case"up":if((this.pages.length-1)*this.pageDimentions.height<=this.scrollBorder.y)return d.y=Math.round(-((this.pages.length-
1)*(this.pageDimentions.height+this.settings.borderBetweenPages))+c/5),d}return{x:b-this.scrollBorder.x,y:c-this.scrollBorder.y,overscroll:!1}},_observe:function(){this.container.hammer().on("drag",this.settings.hammerSettings,c.proxy(this._onDrag,this)).on("dragend",this.settings.hammerSettings,c.proxy(this._onDragend,this));g.on("resize",c.proxy(this._sizePages,this));if(this.settings.keyboardNavigation)h.on("keydown",c.proxy(this._onKeydown,this))},_onDrag:function(a){var b;a.stopPropagation();if(a.gesture)a=a.gesture,b=this._checkOverscroll(a.direction,a.deltaX,a.deltaY),this.settings.onDrag(this.activeElement,a,b.overscroll);else throw Error("Dragend JS detected some problems with the event handling. Maybe the user-drag CSS attribute can help");this.preventScroll||this._scroll(b)},_onDragend:function(a){var b;a.stopPropagation();a.preventDefault();if(a.gesture)b=a.gesture;else throw Error("Dragend JS detected some problems with the event handling. Maybe the user-drag CSS attribute can help");a.gesture.distance>this.settings.minTouchDistance&&!(("left"===b.direction||"right"===b.direction)&&"vertical"===this.settings.direction)&&!(("up"===b.direction||"down"===b.direction)&&"horizontal"===this.settings.direction)?this.swipe(b.direction):this._scrollToPage();this.settings.onDragEnd(this.activeElement)},_onKeydown:function(a){(a=k[a.keyCode])&&this._scrollToPage(a)},setHorizontalContainerCssValues:function(){c.extend(this.pageCssProperties,{"float":"left","overflow-y":"auto","overflow-x":"hidden",padding:0,display:"block"});this.pageContainer.css({overflow:"hidden",width:this.pageDimentions.width*this.pages.length+this.settings.borderBetweenPages*this.pages.length,"box-sizing":"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1E3,margin:0,padding:0})},setVerticalContainerCssValues:function(){c.extend(this.pageCssProperties,{overflow:"hidden",padding:0,display:"block"});this.pageContainer.css({"padding-bottom":this.settings.scribe,"box-sizing":"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1E3,margin:0})},setContainerCssValues:function(){switch(this.settings.direction){case"horizontal":this.setHorizontalContainerCssValues();break;case"vertical":this.setVerticalContainerCssValues()}},_setPageDimentions:function(){var a=this.container.width(),b=this.container.height();"horizontal"===this.settings.direction?a-=parseInt(this.settings.scribe,10):b-=parseInt(this.settings.scribe,10);this.pageDimentions={width:a,height:b}},_sizePages:function(){this._setPageDimentions();this.setContainerCssValues();c.extend(this.pageCssProperties,{height:this.pageDimentions.height,width:this.pageDimentions.width});this.pages.css(this.pageCssProperties);this.settings.scrollToPage?(this._scrollToPage("page",this.page),delete this.settings.scrollToPage):this._jumpToPage("page",this.page)},_calcNewPage:function(a,b){switch(a){case"up":this.page<this.pages.length-1&&(this.scrollBorder.y=this.scrollBorder.y+this.pageDimentions.height+this.settings.borderBetweenPages,this.page++);break;case"down":0<this.page&&(this.scrollBorder.y=this.scrollBorder.y-this.pageDimentions.height-this.settings.borderBetweenPages,this.page--);break;case"left":this.page<this.pages.length-1&&(this.scrollBorder.x=this.scrollBorder.x+this.pageDimentions.width+this.settings.borderBetweenPages,this.page++);break;case"right":0<this.page&&(this.scrollBorder.x=this.scrollBorder.x-this.pageDimentions.width-this.settings.borderBetweenPages,this.page--);break;case"page":switch(this.settings.direction){case"horizontal":this.scrollBorder.x=(this.pageDimentions.width+this.settings.borderBetweenPages)*b;break;case"vertical":this.scrollBorder.y=(this.pageDimentions.height+this.settings.borderBetweenPages)*b}this.page=b;break;default:this.scrollBorder.y=0,this.page=this.scrollBorder.x=0}},_onSwipeEnd:function(){this.preventScroll=!1;this.activeElement.trigger("active");this.settings.onSwipeEnd(this.container,this.activeElement,this.page)},_jumpToPage:function(a,b){a&&this._calcNewPage(a,b);this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y})},_scrollToPage:function(a,b){this.preventScroll=!0;a&&this._calcNewPage(a,b);this._animateScroll()},swipe:function(a){this.activeElement=this.pages.eq(this.page);this.settings.onSwipeStart(this.container,this.activeElement,this.page);this._scrollToPage(a)},updateInstance:function(a){"object"===typeof a&&c.extend(this.settings,a);this.page=this.settings.jumpToPage||this.settings.scrollToPage||this.page;this.pages=this.container.find(this.settings.pageElements);this.activeElement=this.pages.eq(this.page);this._sizePages()}});c.fn.dragend=function(a){var b=this.data("dragend");b?b.updateInstance(a):(b=new e(this,a),this.data("dragend",b));"string"===typeof a&&b.swipe(a);return this}})(jQuery,window);(function(c,f){var g=c(f),h=c(document.body),j={pageContainer:"ul",pageElements:"li",direction:"horizontal",minTouchDistance:"0",onSwipeStart:c.noop,onSwipeEnd:c.noop,onDrag:c.noop,onDragEnd:c.noop,keyboardNavigation:!1,scribe:0,borderBetweenPages:0,duration:300,hammerSettings:{drag_min_distance:0,css_hacks:!1,prevent_default:!0}},k={37:"left",38:"up",39:"right",40:"down"},l={overflow:"hidden",padding:0,cursor:"grab"},e=function(a,b){this.settings=c.extend({},j,b);this.container=a;this.pageContainer=a.find(this.settings.pageContainer);this.scrollBorder={x:0,y:0};this.page=0;this.preventScroll=!1;this.pageCssProperties={margin:0};this.container.css(l);this.updateInstance(b);this._observe()},m={_scroll:function(a){switch(this.settings.direction){case"horizontal":this.pageContainer.css("-webkit-transform","translate3d("+a.x+"px, 0, 0)");break;case"vertical":this.pageContainer.css("-webkit-transform","translate3d(0, "+a.y+"px, 0)")}},_animateScroll:function(){this.activeElement=this.pages.eq(this.page);this.pageContainer.css("-webkit-transition","-webkit-transform "+this.settings.duration+"ms ease-out");this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y});f.setTimeout(c.proxy(this.afterScroll,this),this.settings.duration)},afterScroll:function(){this._onSwipeEnd();this.pageContainer.css("-webkit-transition","-webkit-transform 0")}},n={_scroll:function(a){switch(this.settings.direction){case"horizontal":this.pageContainer.css({"margin-left":a.x});break;case"vertical":this.pageContainer.css({"margin-top":a.y})}},_animateScroll:function(){var a;this.activeElement=this.pages.eq(this.page);switch(this.settings.direction){case"horizontal":a={"margin-left":-this.scrollBorder.x};break;case"vertical":a={"margin-top":-this.scrollBorder.y}}this.pageContainer.animate(a,this.settings.duration,"linear",c.proxy(this._onSwipeEnd,this))}};"WebKitCSSMatrix"in f&&"m11"in new WebKitCSSMatrix?c.extend(e.prototype,m):c.extend(e.prototype,n);c.extend(e.prototype,{_checkOverscroll:function(a,b,c){var d={x:b,y:c,overscroll:!0};switch(a){case"right":if(!this.scrollBorder.x)return Math.round(d.x=(b-this.scrollBorder.x)/5),d;break;case"left":if((this.pages.length-1)*this.pageDimentions.width<=this.scrollBorder.x)return d.x=Math.round(-((this.pages.length-1)*(this.pageDimentions.width+this.settings.borderBetweenPages))+b/5),d;break;case"down":if(!this.scrollBorder.y)return d.y=Math.round((c-this.scrollBorder.y)/5),d;break;case"up":if((this.pages.length-1)*this.pageDimentions.height<=this.scrollBorder.y)return d.y=Math.round(-((this.pages.length-
1)*(this.pageDimentions.height+this.settings.borderBetweenPages))+c/5),d}return{x:b-this.scrollBorder.x,y:c-this.scrollBorder.y,overscroll:!1}},_observe:function(){this.container.hammer().on("drag",this.settings.hammerSettings,c.proxy(this._onDrag,this)).on("dragend",this.settings.hammerSettings,c.proxy(this._onDragend,this));g.on("resize",c.proxy(this._sizePages,this));if(this.settings.keyboardNavigation)h.on("keydown",c.proxy(this._onKeydown,this))},_onDrag:function(a){var b;a.stopPropagation();if(a.gesture)a=a.gesture,b=this._checkOverscroll(a.direction,a.deltaX,a.deltaY),this.settings.onDrag(this.activeElement,a,b.overscroll);else throw Error("Dragend JS detected some problems with the event handling. Maybe the user-drag CSS attribute can help");this.preventScroll||this._scroll(b)},_onDragend:function(a){var b;a.stopPropagation();a.preventDefault();if(a.gesture)b=a.gesture;else throw Error("Dragend JS detected some problems with the event handling. Maybe the user-drag CSS attribute can help");a.gesture.distance>this.settings.minTouchDistance&&!(("left"===b.direction||"right"===b.direction)&&"vertical"===this.settings.direction)&&!(("up"===b.direction||"down"===b.direction)&&"horizontal"===this.settings.direction)?this.swipe(b.direction):this._scrollToPage();this.settings.onDragEnd(this.activeElement)},_onKeydown:function(a){(a=k[a.keyCode])&&this._scrollToPage(a)},setHorizontalContainerCssValues:function(){c.extend(this.pageCssProperties,{"float":"left","overflow-y":"auto","overflow-x":"hidden",padding:0,display:"block"});this.pageContainer.css({overflow:"hidden",width:this.pageDimentions.width*this.pages.length+this.settings.borderBetweenPages*this.pages.length,"box-sizing":"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1E3,margin:0,padding:0})},setVerticalContainerCssValues:function(){c.extend(this.pageCssProperties,{overflow:"hidden",padding:0,display:"block"});this.pageContainer.css({"padding-bottom":this.settings.scribe,"box-sizing":"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1E3,margin:0})},setContainerCssValues:function(){switch(this.settings.direction){case"horizontal":this.setHorizontalContainerCssValues();break;case"vertical":this.setVerticalContainerCssValues()}},_setPageDimentions:function(){var a=this.container.width(),b=this.container.height();"horizontal"===this.settings.direction?a-=parseInt(this.settings.scribe,10):b-=parseInt(this.settings.scribe,10);this.pageDimentions={width:a,height:b}},_sizePages:function(){this._setPageDimentions();this.setContainerCssValues();c.extend(this.pageCssProperties,{height:this.pageDimentions.height,width:this.pageDimentions.width});this.pages.css(this.pageCssProperties);this.settings.scrollToPage?(this._scrollToPage("page",this.page),delete this.settings.scrollToPage):this._jumpToPage("page",this.page)},_calcNewPage:function(a,b){switch(a){case"up":this.page<this.pages.length-1&&(this.scrollBorder.y=this.scrollBorder.y+this.pageDimentions.height+this.settings.borderBetweenPages,this.page++);break;case"down":0<this.page&&(this.scrollBorder.y=this.scrollBorder.y-this.pageDimentions.height-this.settings.borderBetweenPages,this.page--);break;case"left":this.page<this.pages.length-1&&(this.scrollBorder.x=this.scrollBorder.x+this.pageDimentions.width+this.settings.borderBetweenPages,this.page++);break;case"right":0<this.page&&(this.scrollBorder.x=this.scrollBorder.x-this.pageDimentions.width-this.settings.borderBetweenPages,this.page--);break;case"page":switch(this.settings.direction){case"horizontal":this.scrollBorder.x=(this.pageDimentions.width+this.settings.borderBetweenPages)*b;break;case"vertical":this.scrollBorder.y=(this.pageDimentions.height+this.settings.borderBetweenPages)*b}this.page=b;break;default:this.scrollBorder.y=0,this.page=this.scrollBorder.x=0}},_onSwipeEnd:function(){this.preventScroll=!1;this.activeElement.trigger("active");this.settings.onSwipeEnd(this.container,this.activeElement,this.page)},_jumpToPage:function(a,b){a&&this._calcNewPage(a,b);this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y})},_scrollToPage:function(a,b){this.preventScroll=!0;a&&this._calcNewPage(a,b);this._animateScroll()},swipe:function(a){this.activeElement=this.pages.eq(this.page);this.settings.onSwipeStart(this.container,this.activeElement,this.page);this._scrollToPage(a)},updateInstance:function(a){"object"===typeof a&&c.extend(this.settings,a);this.page=this.settings.jumpToPage||this.settings.scrollToPage||this.page;this.pages=this.container.find(this.settings.pageElements);this.activeElement=this.pages.eq(this.page);this._sizePages()}});c.fn.dragend=function(a){var b=this.data("dragend");b?b.updateInstance(a):(b=new e(this,a),this.data("dragend",b));"string"===typeof a&&b.swipe(a);return this}})(jQuery,window);!(function($){var ParsleyUtils={attr:function($element,namespace,checkAttr){var attribute,obj={},regex=new RegExp('^'+namespace,'i');if('undefined'===typeof $element||'undefined'===typeof $element[0])
return{};for(var i in $element[0].attributes){attribute=$element[0].attributes[i];if('undefined'!==typeof attribute&&null!==attribute&&attribute.specified&&regex.test(attribute.name)){if('undefined'!==typeof checkAttr&&new RegExp(checkAttr,'i').test(attribute.name))
return true;obj[this.camelize(attribute.name.replace(namespace,''))]=this.deserializeValue(attribute.value);}}
return'undefined'===typeof checkAttr?obj:false;},setAttr:function($element,namespace,attr,value){$element[0].setAttribute(this.dasherize(namespace+attr),String(value));},get:function(obj,path,placeholder){var i=0,paths=(path||'').split('.');while(this.isObject(obj)||this.isArray(obj)){obj=obj[paths[i++]];if(i===paths.length)
return obj||placeholder;}
return placeholder;},hash:function(length){return String(Math.random()).substring(2,length?length+2:9);},isArray:function(mixed){return Object.prototype.toString.call(mixed)==='[object Array]';},isObject:function(mixed){return mixed===Object(mixed);},deserializeValue:function(value){var num;try{return value?value=="true"||(value=="false"?false:value=="null"?null:!isNaN(num=Number(value))?num:/^[\[\{]/.test(value)?$.parseJSON(value):value):value;}catch(e){return value;}},camelize:function(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():'';});},dasherize:function(str){return str.replace(/::/g,'/').replace(/([A-Z]+)([A-Z][a-z])/g,'$1_$2').replace(/([a-z\d])([A-Z])/g,'$1_$2').replace(/_/g,'-').toLowerCase();}};var ParsleyDefaults={namespace:'data-parsley-',inputs:'input, textarea, select',excluded:'input[type=button], input[type=submit], input[type=reset]',priorityEnabled:true,uiEnabled:true,validationThreshold:3,focus:'first',trigger:false,errorClass:'parsley-error',successClass:'parsley-success',classHandler:function(ParsleyField){},errorsContainer:function(ParsleyField){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:'<li></li>'};var ParsleyAbstract=function(){};ParsleyAbstract.prototype={asyncSupport:false,actualizeOptions:function(){this.options=this.parsleyInstance.OptionsFactory.get(this);return this;},validateThroughValidator:function(value,constraints,priority){return window.ParsleyValidator.validate.apply(window.ParsleyValidator,arguments);},subscribe:function(name,fn){$.listenTo(this,name.toLowerCase(),fn);return this;},unsubscribe:function(name){$.unsubscribeTo(this,name.toLowerCase());return this;},reset:function(){if('ParsleyForm'!==this.__class__)
return $.emit('parsley:field:reset',this);for(var i=0;i<this.fields.length;i++)
$.emit('parsley:field:reset',this.fields[i]);$.emit('parsley:form:reset',this);},destroy:function(){if('ParsleyForm'!==this.__class__){$.emit('parsley:field:destroy',this);this.$element.removeData('Parsley');return;}
for(var i=0;i<this.fields.length;i++)
this.fields[i].destroy();$.emit('parsley:form:destroy',this);this.$element.removeData('Parsley');}};(function(exports){var Validator=function(options){this.__class__='Validator';this.__version__='0.5.7';this.options=options||{};this.bindingKey=this.options.bindingKey||'_validatorjsConstraint';return this;};Validator.prototype={constructor:Validator,validate:function(objectOrString,AssertsOrConstraintOrGroup,group){if('string'!==typeof objectOrString&&'object'!==typeof objectOrString)
throw new Error('You must validate an object or a string');if('string'===typeof objectOrString||_isArray(objectOrString))
return this._validateString(objectOrString,AssertsOrConstraintOrGroup,group);if(this.isBinded(objectOrString))
return this._validateBindedObject(objectOrString,AssertsOrConstraintOrGroup);return this._validateObject(objectOrString,AssertsOrConstraintOrGroup,group);},bind:function(object,constraint){if('object'!==typeof object)
throw new Error('Must bind a Constraint to an object');object[this.bindingKey]=new Constraint(constraint);return this;},unbind:function(object){if('undefined'===typeof object._validatorjsConstraint)
return this;delete object[this.bindingKey];return this;},isBinded:function(object){return'undefined'!==typeof object[this.bindingKey];},getBinded:function(object){return this.isBinded(object)?object[this.bindingKey]:null;},_validateString:function(string,assert,group){var result,failures=[];if(!_isArray(assert))
assert=[assert];for(var i=0;i<assert.length;i++){if(!(assert[i]instanceof Assert))
throw new Error('You must give an Assert or an Asserts array to validate a string');result=assert[i].check(string,group);if(result instanceof Violation)
failures.push(result);}
return failures.length?failures:true;},_validateObject:function(object,constraint,group){if('object'!==typeof constraint)
throw new Error('You must give a constraint to validate an object');if(constraint instanceof Constraint)
return constraint.check(object,group);return new Constraint(constraint).check(object,group);},_validateBindedObject:function(object,group){return object[this.bindingKey].check(object,group);}};Validator.errorCode={must_be_a_string:'must_be_a_string',must_be_an_array:'must_be_an_array',must_be_a_number:'must_be_a_number',must_be_a_string_or_array:'must_be_a_string_or_array'};var Constraint=function(data,options){this.__class__='Constraint';this.options=options||{};this.nodes={};if(data){try{this._bootstrap(data);}catch(err){throw new Error('Should give a valid mapping object to Constraint',err,data);}}
return this;};Constraint.prototype={constructor:Constraint,check:function(object,group){var result,failures={};for(var property in this.options.strict?this.nodes:object){if(this.options.strict?this.has(property,object):this.has(property)){result=this._check(property,object[property],group);if((_isArray(result)&&result.length>0)||(!_isArray(result)&&!_isEmptyObject(result)))
failures[property]=result;}else if(this.options.strict){try{new Assert().HaveProperty(property).validate(object);}catch(violation){failures[property]=violation;}}}
return _isEmptyObject(failures)?true:failures;},add:function(node,object){if(object instanceof Assert||(_isArray(object)&&object[0]instanceof Assert)){this.nodes[node]=object;return this;}
if('object'===typeof object&&!_isArray(object)){this.nodes[node]=object instanceof Constraint?object:new Constraint(object);return this;}
throw new Error('Should give an Assert, an Asserts array, a Constraint',object);},has:function(node,nodes){var nodes='undefined'!==typeof nodes?nodes:this.nodes;return'undefined'!==typeof nodes[node];},get:function(node,placeholder){return this.has(node)?this.nodes[node]:placeholder||null;},remove:function(node){var _nodes=[];for(var i in this.nodes)
if(i!==node)
_nodes[i]=this.nodes[i];this.nodes=_nodes;return this;},_bootstrap:function(data){if(data instanceof Constraint)
return this.nodes=data.nodes;for(var node in data)
this.add(node,data[node]);},_check:function(node,value,group){if(this.nodes[node]instanceof Assert)
return this._checkAsserts(value,[this.nodes[node]],group);if(_isArray(this.nodes[node]))
return this._checkAsserts(value,this.nodes[node],group);if(this.nodes[node]instanceof Constraint)
return this.nodes[node].check(value,group);throw new Error('Invalid node',this.nodes[node]);},_checkAsserts:function(value,asserts,group){var result,failures=[];for(var i=0;i<asserts.length;i++){result=asserts[i].check(value,group);if('undefined'!==typeof result&&true!==result)
failures.push(result);}
return failures;}};var Violation=function(assert,value,violation){this.__class__='Violation';if(!(assert instanceof Assert))
throw new Error('Should give an assertion implementing the Assert interface');this.assert=assert;this.value=value;if('undefined'!==typeof violation)
this.violation=violation;};Violation.prototype={show:function(){var show={assert:this.assert.__class__,value:this.value};if(this.violation)
show.violation=this.violation;return show;},__toString:function(){if('undefined'!==typeof this.violation)
var violation='", '+this.getViolation().constraint+' expected was '+this.getViolation().expected;return this.assert.__class__+' assert failed for "'+this.value+violation||'';},getViolation:function(){var constraint,expected;for(constraint in this.violation)
expected=this.violation[constraint];return{constraint:constraint,expected:expected};}};var Assert=function(group){this.__class__='Assert';this.__parentClass__=this.__class__;this.groups=[];if('undefined'!==typeof group)
this.addGroup(group);return this;};Assert.prototype={construct:Assert,check:function(value,group){if(group&&!this.hasGroup(group))
return;if(!group&&this.hasGroups())
return;try{return this.validate(value,group);}catch(violation){return violation;}},hasGroup:function(group){if(_isArray(group))
return this.hasOneOf(group);if('Any'===group)
return true;if(!this.hasGroups())
return'Default'===group;return-1!==this.groups.indexOf(group);},hasOneOf:function(groups){for(var i=0;i<groups.length;i++)
if(this.hasGroup(groups[i]))
return true;return false;},hasGroups:function(){return this.groups.length>0;},addGroup:function(group){if(_isArray(group))
return this.addGroups(group);if(!this.hasGroup(group))
this.groups.push(group);return this;},removeGroup:function(group){var _groups=[];for(var i=0;i<this.groups.length;i++)
if(group!==this.groups[i])
_groups.push(this.groups[i]);this.groups=_groups;return this;},addGroups:function(groups){for(var i=0;i<groups.length;i++)
this.addGroup(groups[i]);return this;},HaveProperty:function(node){this.__class__='HaveProperty';this.node=node;this.validate=function(object){if('undefined'===typeof object[this.node])
throw new Violation(this,object,{value:this.node});return true;};return this;},Blank:function(){this.__class__='Blank';this.validate=function(value){if('string'!==typeof value)
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(''!==value.replace(/^\s+/g,'').replace(/\s+$/g,''))
throw new Violation(this,value);return true;};return this;},Callback:function(fn){this.__class__='Callback';this.arguments=Array.prototype.slice.call(arguments);if(1===this.arguments.length)
this.arguments=[]
else
this.arguments.splice(0,1);if('function'!==typeof fn)
throw new Error('Callback must be instanciated with a function');this.fn=fn;this.validate=function(value){var arguments=[value].concat(this.arguments);var result=this.fn.apply(this,arguments);if(true!==result)
throw new Violation(this,value,{result:result});return true;};return this;},Choice:function(list){this.__class__='Choice';if(!_isArray(list)&&'function'!==typeof list)
throw new Error('Choice must be instanciated with an array or a function');this.list=list;this.validate=function(value){var list='function'===typeof this.list?this.list():this.list;for(var i=0;i<list.length;i++)
if(value===list[i])
return true;throw new Violation(this,value,{choices:list});};return this;},Collection:function(constraint){this.__class__='Collection';this.constraint='undefined'!==typeof constraint?new Constraint(constraint):false;this.validate=function(collection,group){var result,validator=new Validator(),count=0,failures={},groups=this.groups.length?this.groups:group;if(!_isArray(collection))
throw new Violation(this,array,{value:Validator.errorCode.must_be_an_array});for(var i=0;i<collection.length;i++){result=this.constraint?validator.validate(collection[i],this.constraint,groups):validator.validate(collection[i],groups);if(!_isEmptyObject(result))
failures[count]=result;count++;}
return!_isEmptyObject(failures)?failures:true;};return this;},Count:function(count){this.__class__='Count';this.count=count;this.validate=function(array){if(!_isArray(array))
throw new Violation(this,array,{value:Validator.errorCode.must_be_an_array});var count='function'===typeof this.count?this.count(array):this.count;if(isNaN(Number(count)))
throw new Error('Count must be a valid interger',count);if(count!==array.length)
throw new Violation(this,array,{count:count});return true;};return this;},Email:function(){this.__class__='Email';this.validate=function(value){var regExp=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if('string'!==typeof value)
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!regExp.test(value))
throw new Violation(this,value);return true;};return this;},Eql:function(eql){this.__class__='Eql';if('undefined'===typeof eql)
throw new Error('Equal must be instanciated with an Array or an Object');this.eql=eql;this.validate=function(value){var eql='function'===typeof this.eql?this.eql(value):this.eql;if(!expect.eql(eql,value))
throw new Violation(this,value,{eql:eql});return true;};return this;},EqualTo:function(reference){this.__class__='EqualTo';if('undefined'===typeof reference)
throw new Error('EqualTo must be instanciated with a value or a function');this.reference=reference;this.validate=function(value){var reference='function'===typeof this.reference?this.reference(value):this.reference;if(reference!==value)
throw new Violation(this,value,{value:reference});return true;};return this;},GreaterThan:function(threshold){this.__class__='GreaterThan';if('undefined'===typeof threshold)
throw new Error('Should give a threshold value');this.threshold=threshold;this.validate=function(value){if(''===value||isNaN(Number(value)))
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold>=value)
throw new Violation(this,value,{threshold:this.threshold});return true;};return this;},GreaterThanOrEqual:function(threshold){this.__class__='GreaterThanOrEqual';if('undefined'===typeof threshold)
throw new Error('Should give a threshold value');this.threshold=threshold;this.validate=function(value){if(''===value||isNaN(Number(value)))
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold>value)
throw new Violation(this,value,{threshold:this.threshold});return true;};return this;},InstanceOf:function(classRef){this.__class__='InstanceOf';if('undefined'===typeof classRef)
throw new Error('InstanceOf must be instanciated with a value');this.classRef=classRef;this.validate=function(value){if(true!==(value instanceof this.classRef))
throw new Violation(this,value,{classRef:this.classRef});return true;};return this;},IPv4:function(){this.__class__='IPv4';this.validate=function(value){var regExp=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;if('string'!==typeof value)
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!regExp.test(value))
throw new Violation(this,value);return true;};return this;},Length:function(boundaries){this.__class__='Length';if(!boundaries.min&&!boundaries.max)
throw new Error('Lenth assert must be instanciated with a { min: x, max: y } object');this.min=boundaries.min;this.max=boundaries.max;this.validate=function(value){if('string'!==typeof value&&!_isArray(value))
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string_or_array});if('undefined'!==typeof this.min&&this.min===this.max&&value.length!==this.min)
throw new Violation(this,value,{min:this.min,max:this.max});if('undefined'!==typeof this.max&&value.length>this.max)
throw new Violation(this,value,{max:this.max});if('undefined'!==typeof this.min&&value.length<this.min)
throw new Violation(this,value,{min:this.min});return true;};return this;},LessThan:function(threshold){this.__class__='LessThan';if('undefined'===typeof threshold)
throw new Error('Should give a threshold value');this.threshold=threshold;this.validate=function(value){if(''===value||isNaN(Number(value)))
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold<=value)
throw new Violation(this,value,{threshold:this.threshold});return true;};return this;},LessThanOrEqual:function(threshold){this.__class__='LessThanOrEqual';if('undefined'===typeof threshold)
throw new Error('Should give a threshold value');this.threshold=threshold;this.validate=function(value){if(''===value||isNaN(Number(value)))
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold<value)
throw new Violation(this,value,{threshold:this.threshold});return true;};return this;},Mac:function(){this.__class__='Mac';this.validate=function(value){var regExp=/^(?:[0-9A-F]{2}:){5}[0-9A-F]{2}$/i;if('string'!==typeof value)
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!regExp.test(value))
throw new Violation(this,value);return true;};return this;},NotNull:function(){this.__class__='NotNull';this.validate=function(value){if(null===value||'undefined'===typeof value)
throw new Violation(this,value);return true;};return this;},NotBlank:function(){this.__class__='NotBlank';this.validate=function(value){if('string'!==typeof value)
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(''===value.replace(/^\s+/g,'').replace(/\s+$/g,''))
throw new Violation(this,value);return true;};return this;},Null:function(){this.__class__='Null';this.validate=function(value){if(null!==value)
throw new Violation(this,value);return true;};return this;},Range:function(min,max){this.__class__='Range';if('undefined'===typeof min||'undefined'===typeof max)
throw new Error('Range assert expects min and max values');this.min=min;this.max=max;this.validate=function(value){try{if(('string'===typeof value&&isNaN(Number(value)))||_isArray(value))
new Assert().Length({min:this.min,max:this.max}).validate(value);else
new Assert().GreaterThanOrEqual(this.min).validate(value)&&new Assert().LessThanOrEqual(this.max).validate(value);return true;}catch(violation){throw new Violation(this,value,violation.violation);}
return true;};return this;},Regexp:function(regexp,flag){this.__class__='Regexp';if('undefined'===typeof regexp)
throw new Error('You must give a regexp');this.regexp=regexp;this.flag=flag||'';this.validate=function(value){if('string'!==typeof value)
throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(value))
throw new Violation(this,value,{regexp:this.regexp,flag:this.flag});return true;};return this;},Required:function(){this.__class__='Required';this.validate=function(value){if('undefined'===typeof value)
throw new Violation(this,value);if('string'===typeof value)
try{new Assert().NotNull().validate(value)&&new Assert().NotBlank().validate(value);}catch(violation){throw new Violation(this,value);}
return true;};return this;},Unique:function(object){this.__class__='Unique';if('object'===typeof object)
this.key=object.key;this.validate=function(array){var value,store=[];if(!_isArray(array))
throw new Violation(this,array,{value:Validator.errorCode.must_be_an_array});for(var i=0;i<array.length;i++){value='object'===typeof array[i]?array[i][this.key]:array[i];if('undefined'===typeof value)
continue;if(-1!==store.indexOf(value))
throw new Violation(this,array,{value:value});store.push(value);}
return true;};return this;}};exports.Assert=Assert;exports.Validator=Validator;exports.Violation=Violation;exports.Constraint=Constraint;if(!Array.prototype.indexOf)
Array.prototype.indexOf=function(searchElement){if(this==null){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1;}
var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}
if(n>=len){return-1;}
var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}
return-1;};var _isEmptyObject=function(obj){for(var property in obj)
return false;return true;};var _isArray=function(obj){return Object.prototype.toString.call(obj)==='[object Array]';}
var expect={eql:function(actual,expected){if(actual===expected){return true;}else if('undefined'!==typeof Buffer&&Buffer.isBuffer(actual)&&Buffer.isBuffer(expected)){if(actual.length!==expected.length)return false;for(var i=0;i<actual.length;i++)
if(actual[i]!==expected[i])return false;return true;}else if(actual instanceof Date&&expected instanceof Date){return actual.getTime()===expected.getTime();}else if(typeof actual!=='object'&&typeof expected!=='object'){return actual==expected;}else{return this.objEquiv(actual,expected);}},isUndefinedOrNull:function(value){return value===null||typeof value==='undefined';},isArguments:function(object){return Object.prototype.toString.call(object)=='[object Arguments]';},keys:function(obj){if(Object.keys)
return Object.keys(obj);var keys=[];for(var i in obj)
if(Object.prototype.hasOwnProperty.call(obj,i))
keys.push(i);return keys;},objEquiv:function(a,b){if(this.isUndefinedOrNull(a)||this.isUndefinedOrNull(b))
return false;if(a.prototype!==b.prototype)return false;if(this.isArguments(a)){if(!this.isArguments(b))
return false;return eql(pSlice.call(a),pSlice.call(b));}
try{var ka=this.keys(a),kb=this.keys(b),key,i;}catch(e){return false;}
if(ka.length!==kb.length)
return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--)
if(ka[i]!=kb[i])
return false;for(i=ka.length-1;i>=0;i--){key=ka[i];if(!this.eql(a[key],b[key]))
return false;}
return true;}};if("function"===typeof define&&define.amd){define('validator',[],function(){return exports;});}})('undefined'===typeof exports?this['undefined'!==typeof validatorjs_ns?validatorjs_ns:'Validator']={}:exports);var ParsleyValidator=function(validators,catalog){this.__class__='ParsleyValidator';this.Validator=Validator;this.locale='en';this.init(validators||{},catalog||{});};ParsleyValidator.prototype={init:function(validators,catalog){this.catalog=catalog;for(var name in validators)
this.addValidator(name,validators[name].fn,validators[name].priority);$.emit('parsley:validator:init');},setLocale:function(locale){if('undefined'===typeof this.catalog[locale])
throw new Error(locale+' is not available in the catalog');this.locale=locale;return this;},addCatalog:function(locale,messages,set){if('object'===typeof messages)
this.catalog[locale]=messages;if(true===set)
return this.setLocale(locale);return this;},addMessage:function(locale,name,message){if(undefined===typeof this.catalog[locale])
this.catalog[locale]={};this.catalog[locale][name]=message;},validate:function(value,constraints,priority){return new this.Validator.Validator().validate.apply(new Validator.Validator(),arguments);},addValidator:function(name,fn,priority){this.validators[name]=function(requirements){return $.extend(new Validator.Assert().Callback(fn,requirements),{priority:priority});};return this;},updateValidator:function(name,fn,priority){return addValidator(name,fn,priority);},removeValidator:function(name){delete this.validators[name];return this;},getErrorMessage:function(constraint){var message;if('type'===constraint.name)
message=window.ParsleyConfig.i18n[this.locale][constraint.name][constraint.requirements];else
message=this.formatMesssage(window.ParsleyConfig.i18n[this.locale][constraint.name],constraint.requirements);return''!==message?message:window.ParsleyConfig.i18n[this.locale].defaultMessage;},formatMesssage:function(string,parameters){if('object'===typeof parameters){for(var i in parameters)
string=this.formatMesssage(string,parameters[i]);return string;}
return'string'===typeof string?string.replace(new RegExp('%s','i'),parameters):'';},validators:{notblank:function(){return $.extend(new Validator.Assert().NotBlank(),{priority:2});},required:function(){return $.extend(new Validator.Assert().Required(),{priority:512});},type:function(type){var assert;switch(type){case'email':assert=new Validator.Assert().Email();break;case'number':assert=new Validator.Assert().Regexp('^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$');break;case'integer':assert=new Validator.Assert().Regexp('^-?\\d+$');break;case'digits':assert=new Validator.Assert().Regexp('^\\d+$');break;case'alphanum':assert=new Validator.Assert().Regexp('^\\w+$','i');break;case'url':assert=new Validator.Assert().Regexp('(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)','i');break;default:throw new Error('validator type `'+type+'` is not supported');}
return $.extend(assert,{priority:256});},pattern:function(regexp){return $.extend(new Validator.Assert().Regexp(regexp),{priority:64});},minlength:function(length){return $.extend(new Validator.Assert().Length({min:length}),{priority:30});},maxlength:function(length){return $.extend(new Validator.Assert().Length({max:length}),{priority:30});},length:function(array){return $.extend(new Validator.Assert().Length({min:array[0],max:array[1]}),{priority:32});},mincheck:function(length){return this.minlength(length);},maxcheck:function(length){return this.maxlength(length);},check:function(array){return this.length(array);},min:function(value){return $.extend(new Validator.Assert().GreaterThanOrEqual(value),{priority:30,requirementsTransformer:function(){return'string'===typeof value&&!isNaN(value)?parseInt(value,10):value;}});},max:function(value){return $.extend(new Validator.Assert().LessThanOrEqual(value),{priority:30,requirementsTransformer:function(){return'string'===typeof value&&!isNaN(value)?parseInt(value,10):value;}});},range:function(array){return $.extend(new Validator.Assert().Range(array[0],array[1]),{priority:32,requirementsTransformer:function(){for(var i=0;i<array.length;i++)
array[i]='string'===typeof array[i]&&!isNaN(array[i])?parseInt(array[i],10):array[i];return array;}});},equalto:function(value){return $.extend(new Validator.Assert().EqualTo(value),{priority:256,requirementsTransformer:function(){return $(value).length?$(value).val():value;}});}}};var ParsleyUI=function(options){this.__class__='ParsleyUI';};ParsleyUI.prototype={listen:function(){$.listen('parsley:form:init',this,this.setupForm);$.listen('parsley:field:init',this,this.setupField);$.listen('parsley:field:validated',this,this.reflow);$.listen('parsley:form:validated',this,this.focus);$.listen('parsley:field:reset',this,this.reset);$.listen('parsley:form:destroy',this,this.destroy);$.listen('parsley:field:destroy',this,this.destroy);return this;},reflow:function(fieldInstance){if('undefined'===typeof fieldInstance._ui||false===fieldInstance._ui.active)
return;var diff=this._diff(fieldInstance.validationResult,fieldInstance._ui.lastValidationResult);fieldInstance._ui.lastValidationResult=fieldInstance.validationResult;fieldInstance._ui.validatedOnce=true;this.manageStatusClass(fieldInstance);this.manageErrorsMessages(fieldInstance,diff);this.actualizeTriggers(fieldInstance);if((diff.kept.length||diff.added.length)&&'undefined'===typeof fieldInstance._ui.failedOnce)
this.manageFailingFieldTrigger(fieldInstance);},manageStatusClass:function(fieldInstance){if(true===fieldInstance.validationResult)
this._successClass(fieldInstance);else if(fieldInstance.validationResult.length>0)
this._errorClass(fieldInstance);else
this._resetClass(fieldInstance);},manageErrorsMessages:function(fieldInstance,diff){if('undefined'!==typeof fieldInstance.options.errorsMessagesDisabled)
return;if('undefined'!==typeof fieldInstance.options.errorMessage){if((diff.added.length||diff.kept.length)){if(0===fieldInstance._ui.$errorsWrapper.find('.parsley-custom-error-message').length)
fieldInstance._ui.$errorsWrapper.append($(fieldInstance.options.errorTemplate).addClass('parsley-custom-error-message'));fieldInstance._ui.$errorsWrapper.addClass('filled').find('.parsley-custom-error-message').html(fieldInstance.options.errorMessage);}else{fieldInstance._ui.$errorsWrapper.removeClass('filled').find('.parsley-custom-error-message').remove();}
return;}
for(var i=0;i<diff.removed.length;i++)
this.removeError(fieldInstance,diff.removed[i].assert.name,true);for(i=0;i<diff.added.length;i++)
this.addError(fieldInstance,diff.added[i].assert.name,undefined,diff.added[i].assert,true);for(i=0;i<diff.kept.length;i++)
this.updateError(fieldInstance,diff.kept[i].assert.name,undefined,diff.kept[i].assert,true);},addError:function(fieldInstance,name,message,assert,doNotUpdateClass){fieldInstance._ui.$errorsWrapper.addClass('filled').append($(fieldInstance.options.errorTemplate).addClass('parsley-'+name).html(message||this._getErrorMessage(fieldInstance,assert)));if(true!==doNotUpdateClass)
this._errorClass(fieldInstance);},updateError:function(fieldInstance,name,message,assert,doNotUpdateClass){fieldInstance._ui.$errorsWrapper.addClass('filled').find('.parsley-'+name).html(message||this._getErrorMessage(fieldInstance,assert));if(true!==doNotUpdateClass)
this._errorClass(fieldInstance);},removeError:function(fieldInstance,name,doNotUpdateClass){fieldInstance._ui.$errorsWrapper.removeClass('filled').find('.parsley-'+name).remove();if(true!==doNotUpdateClass)
this.manageStatusClass(fieldInstance);},focus:function(formInstance){if(true===formInstance.validationResult||'none'===formInstance.options.focus)
return formInstance._focusedField=null;formInstance._focusedField=null;for(var i=0;i<formInstance.fields.length;i++)
if(true!==formInstance.fields[i].validationResult&&formInstance.fields[i].validationResult.length>0&&'undefined'===typeof formInstance.fields[i].options.noFocus){if('first'===formInstance.options.focus){formInstance._focusedField=formInstance.fields[i].$element;return formInstance._focusedField.focus();}
formInstance._focusedField=formInstance.fields[i].$element;}
if(null===formInstance._focusedField)
return null;return formInstance._focusedField.focus();},_getErrorMessage:function(fieldInstance,constraint){var customConstraintErrorMessage=constraint.name+'Message';if('undefined'!==typeof fieldInstance.options[customConstraintErrorMessage])
return fieldInstance.options[customConstraintErrorMessage];return window.ParsleyValidator.getErrorMessage(constraint);},_diff:function(newResult,oldResult,deep){var added=[],kept=[];for(var i=0;i<newResult.length;i++){var found=false;for(var j=0;j<oldResult.length;j++)
if(newResult[i].assert.name===oldResult[j].assert.name){found=true;break;}
if(found)
kept.push(newResult[i]);else
added.push(newResult[i]);}
return{kept:kept,added:added,removed:!deep?this._diff(oldResult,newResult,true).added:[]};},setupForm:function(formInstance){formInstance.$element.on('submit.Parsley',false,$.proxy(formInstance.onSubmitValidate,formInstance));if(false===formInstance.options.uiEnabled)
return;formInstance.$element.attr('novalidate','');},setupField:function(fieldInstance){var _ui={active:false};if(false===fieldInstance.options.uiEnabled)
return;_ui.active=true;fieldInstance.$element.attr(fieldInstance.options.namespace+'id',fieldInstance.__id__);_ui.$errorClassHandler=this._manageClassHandler(fieldInstance);_ui.errorsWrapperId='parsley-id-'+('undefined'!==typeof fieldInstance.options.multiple?'multiple-'+fieldInstance.options.multiple:fieldInstance.__id__);_ui.$errorsWrapper=$(fieldInstance.options.errorsWrapper).attr('id',_ui.errorsWrapperId);_ui.lastValidationResult=[];_ui.validatedOnce=false;_ui.validationInformationVisible=false;fieldInstance._ui=_ui;this._insertErrorWrapper(fieldInstance);this.actualizeTriggers(fieldInstance);},_manageClassHandler:function(fieldInstance){if('string'===typeof fieldInstance.options.classHandler&&$(fieldInstance.options.classHandler).length)
return $(fieldInstance.options.classHandler);var $handler=fieldInstance.options.classHandler(fieldInstance);if('undefined'!==typeof $handler&&$handler.length)
return $handler;return'undefined'===typeof fieldInstance.options.multiple?fieldInstance.$element:fieldInstance.$element.parent();},_insertErrorWrapper:function(fieldInstance){var $errorsContainer;if('string'===typeof fieldInstance.options.errorsContainer)
if($(fieldInstance.options.errorsContainer+'').length)
return $(fieldInstance.options.errorsContainer).append(fieldInstance._ui.$errorsWrapper);else if(window.console&&window.console.warn)
window.console.warn('The errors container `'+fieldInstance.options.errorsContainer+'` does not exist in DOM');if('function'===typeof fieldInstance.options.errorsContainer)
$errorsContainer=fieldInstance.options.errorsContainer(fieldInstance);if('undefined'!==typeof $errorsContainer&&$errorsContainer.length)
return $errorsContainer.append(fieldInstance._ui.$errorsWrapper);return'undefined'===typeof fieldInstance.options.multiple?fieldInstance.$element.after(fieldInstance._ui.$errorsWrapper):fieldInstance.$element.parent().after(fieldInstance._ui.$errorsWrapper);},actualizeTriggers:function(fieldInstance){fieldInstance.$element.off('.Parsley');if(false===fieldInstance.options.trigger)
return;var triggers=fieldInstance.options.trigger.replace(/^\s+/g,'').replace(/\s+$/g,'');if(''===triggers)
return;fieldInstance.$element.on(triggers.split(' ').join('.Parsley ')+'.Parsley',false,$.proxy('function'===typeof fieldInstance.eventValidate?fieldInstance.eventValidate:this.eventValidate,fieldInstance));},eventValidate:function(event){if(new RegExp('key').test(event.type))
if(!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold)
return;this._ui.validatedOnce=true;this.validate();},manageFailingFieldTrigger:function(fieldInstance){fieldInstance._ui.failedOnce=true;if(fieldInstance.options.multiple)
$('['+fieldInstance.options.namespace+'multiple="'+fieldInstance.options.multiple+'"]').each(function(){if(!new RegExp('change','i').test($(this).parsley().options.trigger||''))
return $(this).parsley().$element.on('change.ParsleyFailedOnce',false,$.proxy(fieldInstance.validate,fieldInstance));});if(!new RegExp('keyup','i').test(fieldInstance.options.trigger||''))
return fieldInstance.$element.on('keyup.ParsleyFailedOnce',false,$.proxy(fieldInstance.validate,fieldInstance));},reset:function(parsleyInstance){if('undefined'===typeof parsleyInstance._ui)
return;parsleyInstance.$element.off('.Parsley');parsleyInstance.$element.off('.ParsleyFailedOnce');if('ParsleyForm'===parsleyInstance.__class__)
return;parsleyInstance._ui.$errorsWrapper.children().each(function(){$(this).remove();});this._resetClass(parsleyInstance);parsleyInstance._ui.validatedOnce=false;parsleyInstance._ui.lastValidationResult=[];parsleyInstance._ui.validationInformationVisible=false;},destroy:function(parsleyInstance){if('undefined'===typeof parsleyInstance._ui)
return;this.reset(parsleyInstance);if('ParsleyForm'===parsleyInstance.__class__)
return;parsleyInstance._ui.$errorsWrapper.remove();delete parsleyInstance._ui;},_successClass:function(fieldInstance){fieldInstance._ui.validationInformationVisible=true;fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.errorClass).addClass(fieldInstance.options.successClass);},_errorClass:function(fieldInstance){fieldInstance._ui.validationInformationVisible=true;fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.successClass).addClass(fieldInstance.options.errorClass);},_resetClass:function(fieldInstance){fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.successClass).removeClass(fieldInstance.options.errorClass);}};var ParsleyOptionsFactory=function(defaultOptions,globalOptions,userOptions,namespace){this.__class__='OptionsFactory';this.__id__=ParsleyUtils.hash(4);this.formOptions=null;this.fieldOptions=null;this.staticOptions=$.extend(true,{},defaultOptions,globalOptions,userOptions,{namespace:namespace});};ParsleyOptionsFactory.prototype={get:function(parsleyInstance){if('undefined'===typeof parsleyInstance.__class__)
throw new Error('Parsley Instance expected');switch(parsleyInstance.__class__){case'Parsley':return this.staticOptions;case'ParsleyForm':return this.getFormOptions(parsleyInstance);case'ParsleyField':return this.getFieldOptions(parsleyInstance);default:throw new Error('Instance '+parsleyInstance.__class__+' is not supported');}},getFormOptions:function(formInstance){this.formOptions=ParsleyUtils.attr(formInstance.$element,this.staticOptions.namespace);return $.extend({},this.staticOptions,this.formOptions);},getFieldOptions:function(fieldInstance){this.fieldOptions=ParsleyUtils.attr(fieldInstance.$element,this.staticOptions.namespace);if(null===this.formOptions&&'ParsleyForm'===fieldInstance.parsleyInstance.__proxy__)
this.formOptions=getFormOptions(fieldInstance.parsleyInstance);return $.extend({},this.staticOptions,this.formOptions,this.fieldOptions);}};var ParsleyForm=function(element,parsleyInstance){this.__class__='ParsleyForm';this.__id__=ParsleyUtils.hash(4);if('Parsley'!==ParsleyUtils.get(parsleyInstance,'__class__'))
throw new Error('You must give a Parsley instance');this.parsleyInstance=parsleyInstance;this.$element=$(element);};ParsleyForm.prototype={init:function(){this.validationResult=null;this.options=this.parsleyInstance.OptionsFactory.get(this);this._bindFields();return this;},onSubmitValidate:function(event){this.validate(undefined,undefined,event);if(false===this.validationResult&&event instanceof $.Event)
event.preventDefault();return this;},validate:function(group,force,event){this.submitEvent=event;this.validationResult=true;var fieldValidationResult=[];this._refreshFields();$.emit('parsley:form:validate',this);for(var i=0;i<this.fields.length;i++){if(group&&group!==this.fields[i].options.group)
continue;fieldValidationResult=this.fields[i].validate(force);if(true!==fieldValidationResult&&fieldValidationResult.length>0&&this.validationResult)
this.validationResult=false;}
$.emit('parsley:form:validated',this);return this.validationResult;},isValid:function(group,force){this._refreshFields();for(var i=0;i<this.fields.length;i++){if(group&&group!==this.fields[i].options.group)
continue;if(false===this.fields[i].isValid(force))
return false;}
return true;},_refreshFields:function(){return this.actualizeOptions()._bindFields();},_bindFields:function(){var self=this;this.fields=[];this.$element.find(this.options.inputs).each(function(){var fieldInstance=new window.Parsley(this,{},self.parsleyInstance);if('ParsleyField'===fieldInstance.__class__&&!fieldInstance.$element.is(fieldInstance.options.excluded))
self.fields.push(fieldInstance);});return this;}};var ConstraintFactory=function(parsleyField,name,requirements,priority,isDomConstraint){if('ParsleyField'!==ParsleyUtils.get(parsleyField,'__class__'))
throw new Error('ParsleyField instance expected');if('function'!==typeof window.ParsleyValidator.validators[name]&&'Assert'!==window.ParsleyValidator.validators[name](requirements).__parentClass__)
throw new Error('Valid validator expected');var getPriority=function(parsleyField,name){if('undefined'!==typeof parsleyField.options[name+'Priority'])
return parsleyField.options[name+'Priority'];return ParsleyUtils.get(window.ParsleyValidator.validators[name](requirements),'priority',2);};priority=priority||getPriority(parsleyField,name);if('function'===typeof window.ParsleyValidator.validators[name](requirements).requirementsTransformer)
requirements=window.ParsleyValidator.validators[name](requirements).requirementsTransformer();return $.extend(window.ParsleyValidator.validators[name](requirements),{name:name,requirements:requirements,priority:priority,groups:[priority],isDomConstraint:isDomConstraint||ParsleyUtils.attr(parsleyField.$element,parsleyField.options.namespace,name)});};var ParsleyField=function(field,parsleyInstance){this.__class__='ParsleyField';this.__id__=ParsleyUtils.hash(4);if('Parsley'!==ParsleyUtils.get(parsleyInstance,'__class__'))
throw new Error('You must give a Parsley instance');this.parsleyInstance=parsleyInstance;this.$element=$(field);this.options=this.parsleyInstance.OptionsFactory.get(this);};ParsleyField.prototype={init:function(){this.constraints=[];this.validationResult=[];if((this.$element.is('input[type=radio], input[type=checkbox]')&&'undefined'===typeof this.options.multiple)||(this.$element.is('select')&&'undefined'!==typeof this.$element.attr('multiple'))){if('undefined'!==typeof this.$element.attr('name')&&this.$element.attr('name').length)
this.options.multiple=this.$element.attr('name');else if('undefined'!==typeof this.$element.attr('id')&&this.$element.attr('id').length)
this.options.multiple=this.$element.attr('id');if('undefined'===typeof this.options.multiple){if(window.console&&window.console.warn)
window.console.warn('To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name, and id or a multiple option.',this.$element);return this.parsleyInstance;}
this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\$)/g,'');ParsleyUtils.setAttr(this.$element,this.options.namespace,'multiple',this.options.multiple);}
this.bindConstraints();return this;},validate:function(force){this.value=this.getValue();$.emit('parsley:field:validate',this);$.emit('parsley:field:'+(this.isValid(force,this.value)?'success':'error'),this);$.emit('parsley:field:validated',this);return this.validationResult;},getConstraintsSortedPriorities:function(){var priorities=[];for(var i=0;i<this.constraints.length;i++)
if(-1===priorities.indexOf(this.constraints[i].priority))
priorities.push(this.constraints[i].priority);priorities.sort(function(a,b){return b-a;});return priorities;},isValid:function(force,value){var priorities=this.getConstraintsSortedPriorities();value=value||this.getValue();this.refreshConstraints();if(''===value&&!this.isRequired()&&'undefined'===typeof this.options.validateIfEmpty&&'undefined'===typeof this.options.multiple&&'undefined'===typeof force)
return this.validationResult=[];if(false===this.options.priorityEnabled)
return true===(this.validationResult=this.validateThroughValidator(value,this.constraints,'Any'));for(var i=0;i<priorities.length;i++)
if(true!==(this.validationResult=this.validateThroughValidator(value,this.constraints,priorities[i])))
return false;return true;},isRequired:function(){var constraintIndex=this._constraintIndex('required');return!(-1===constraintIndex||(-1!==constraintIndex&&false===this.constraints[constraintIndex].requirements));},getValue:function(){if('undefined'!==typeof this.options.value)
return this.options.value;if('undefined'===typeof this.options.multiple){var value=this.$element.val();if(true===this.options.trimValue)
return value.replace(/^\s+|\s+$/g,'');return value;}
if(this.$element.is('input[type=radio]'))
return $('['+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').val()||'';if(this.$element.is('input[type=checkbox]')){var values=[];$('['+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').each(function(){values.push($(this).val());});return values.length?values:'';}
if(this.$element.is('select'))
return null===this.$element.val()?'':this.$element.val();},refreshConstraints:function(){return this.actualizeOptions().bindConstraints();},bindConstraints:function(){var constraints=[];for(var i=0;i<this.constraints.length;i++)
if(false===this.constraints[i].isDomConstraint)
constraints.push(this.constraints[i]);this.constraints=constraints;for(var name in this.options)
this.addConstraint(name,this.options[name]);return this.bindHtml5Constraints();},bindHtml5Constraints:function(){if(this.$element.hasClass('required')||this.$element.attr('required'))
this.addConstraint('required',true,undefined,true);if('string'===typeof this.$element.attr('pattern'))
this.addConstraint('pattern',this.$element.attr('pattern'),undefined,true);if('undefined'!==typeof this.$element.attr('min')&&'undefined'!==typeof this.$element.attr('max'))
this.addConstraint('range',[this.$element.attr('min'),this.$element.attr('max')],undefined,true);else if('undefined'!==typeof this.$element.attr('min'))
this.addConstraint('min',this.$element.attr('min'),undefined,true);else if('undefined'!==typeof this.$element.attr('max'))
this.addConstraint('max',this.$element.attr('max'),undefined,true);var type=this.$element.attr('type');if('undefined'===typeof type)
return this;if('number'===type)
return this.addConstraint('type','integer',undefined,true);else if(new RegExp(type,'i').test('email url range'))
return this.addConstraint('type',type,undefined,true);},addConstraint:function(name,requirements,priority,isDomConstraint){name=name.toLowerCase();if('function'===typeof window.ParsleyValidator.validators[name]){var constraint=new ConstraintFactory(this,name,requirements,priority,isDomConstraint);if(-1!==this._constraintIndex(constraint.name))
this.removeConstraint(constraint.name);this.constraints.push(constraint);}
return this;},removeConstraint:function(name){for(var i=0;i<this.constraints.length;i++)
if(name===this.constraints[i].name){this.constraints.splice(i,1);break;}
return this;},updateConstraint:function(name,parameters,priority){return this.removeConstraint(name).addConstraint(name,parameters,priority);},_constraintIndex:function(name){for(var i=0;i<this.constraints.length;i++)
if(name===this.constraints[i].name)
return i;return-1;}};var ParsleyMultiple=function(){this.__class__='ParsleyFieldMultiple';};ParsleyMultiple.prototype={init:function(multiple){this.options.multiple=multiple;ParsleyUtils.setAttr(this.$element,this.options.namespace,'multiple',this.options.multiple);return this;}};var o=$({}),subscribed={};$.listen=function(name){if('undefined'===typeof subscribed[name])
subscribed[name]=[];if('function'===typeof arguments[1])
return subscribed[name].push({fn:arguments[1]});if('object'===typeof arguments[1]&&'function'===typeof arguments[2])
return subscribed[name].push({fn:arguments[2],ctxt:arguments[1]});throw new Error('Wrong parameters');};$.listenTo=function(instance,name,fn){if('undefined'===typeof subscribed[name])
subscribed[name]=[];if(!(instance instanceof ParsleyField)&&!(instance instanceof ParsleyForm))
throw new Error('Must give Parsley instance');if('string'!==typeof name||'function'!==typeof fn)
throw new Error('Wrong parameters');subscribed[name].push({instance:instance,fn:fn});};$.unsubscribe=function(name,fn){if('undefined'===typeof subscribed[name])
return;if('string'!==typeof name||'function'!==typeof fn)
throw new Error('Wrong arguments');for(var i=0;i<subscribed[name].length;i++)
if(subscribed[name][i].fn===fn)
return subscribed[name].splice(i,1);};$.unsubscribeTo=function(instance,name){if('undefined'===typeof subscribed[name])
return;if(!(instance instanceof ParsleyField)&&!(instance instanceof ParsleyForm))
throw new Error('Must give Parsley instance');for(var i=0;i<subscribed[name].length;i++)
if('undefined'!==typeof subscribed[name][i].instance&&subscribed[name][i].instance.__id__===instance.__id__)
return subscribed[name].splice(i,1);};$.unsubscribeAll=function(name){if('undefined'===typeof subscribed[name])
return;delete subscribed[name];};$.emit=function(name,instance){if('undefined'===typeof subscribed[name])
return;for(var i=0;i<subscribed[name].length;i++){if('undefined'===typeof subscribed[name][i].instance){subscribed[name][i].fn.apply('undefined'!==typeof subscribed[name][i].ctxt?subscribed[name][i].ctxt:o,Array.prototype.slice.call(arguments,1));continue;}
if(!(instance instanceof ParsleyField)&&!(instance instanceof ParsleyForm))
continue;if(subscribed[name][i].instance.__id__===instance.__id__){subscribed[name][i].fn.apply(o,Array.prototype.slice.call(arguments,1));continue;}
if(subscribed[name][i].instance instanceof ParsleyForm&&instance instanceof ParsleyField)
for(var j=0;j<subscribed[name][i].instance.fields.length;j++)
if(subscribed[name][i].instance.fields[j].__id__===instance.__id__){subscribed[name][i].fn.apply(o,Array.prototype.slice.call(arguments,1));continue;}}};$.subscribed=function(){return subscribed;};window.ParsleyConfig=window.ParsleyConfig||{};window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{};window.ParsleyConfig.i18n.en=$.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."});if('undefined'!==typeof window.ParsleyValidator)
window.ParsleyValidator.addCatalog('en',window.ParsleyConfig.i18n.en,true);var Parsley=function(element,options,parsleyInstance){this.__class__='Parsley';this.__version__='2.0.0-rc4';this.__id__=ParsleyUtils.hash(4);if('undefined'===typeof element)
throw new Error('You must give an element');return this.init($(element),options,parsleyInstance);};Parsley.prototype={init:function($element,options,parsleyInstance){if(!$element.length)
throw new Error('You must bind Parsley on an existing element.');this.$element=$element;if(this.$element.data('Parsley')){var savedParsleyInstance=this.$element.data('Parsley');if('undefined'!==typeof parsleyInstance&&'ParsleyField'===savedParsleyInstance.parsleyInstance.__proxy__)
savedParsleyInstance.parsleyInstance=parsleyInstance;return savedParsleyInstance;}
this.OptionsFactory=new ParsleyOptionsFactory(ParsleyDefaults,ParsleyUtils.get(window,'ParsleyConfig',{}),options,this.getNamespace(options));options=this.OptionsFactory.get(this);if(this.$element.is('form')||(ParsleyUtils.attr(this.$element,options.namespace,'validate')&&!this.$element.is(options.inputs))){return this.bind('parsleyForm',parsleyInstance);}else if(this.$element.is(options.inputs)){if((this.$element.is('input[type=radio], input[type=checkbox]')&&'undefined'===typeof options.multiple)||(this.$element.is('select')&&'undefined'!==typeof this.$element.attr('multiple'))){if('undefined'!==typeof this.$element.attr('name')&&this.$element.attr('name').length)
options.multiple=this.$element.attr('name');else if('undefined'!==typeof this.$element.attr('id')&&this.$element.attr('id').length)
options.multiple=this.$element.attr('id');if('undefined'===typeof options.multiple){if(window.console&&window.console.warn)
window.console.warn('To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name, and id or a multiple option.',this.$element);return this;}
options.multiple=options.multiple.replace(/(:|\.|\[|\]|\$)/g,'');return this.bind('parsleyFieldMultiple',parsleyInstance,options.multiple);}
return this.bind('parsleyField',parsleyInstance);}
return this;},getNamespace:function(options){if('undefined'!==typeof this.$element.data('parsleyNamespace'))
return this.$element.data('parsleyNamespace');if('undefined'!==typeof ParsleyUtils.get(options,'namespace'))
return options.namespace;if('undefined'!==typeof ParsleyUtils.get(window,'ParsleyConfig.namespace'))
return window.ParsleyConfig.namespace;return ParsleyDefaults.namespace;},bind:function(type,parentParsleyInstance,multiple){var parsleyInstance;switch(type){case'parsleyForm':parsleyInstance=$.extend(new ParsleyForm(this.$element,parentParsleyInstance||this),new ParsleyAbstract(),window.ParsleyExtend).init();break;case'parsleyField':parsleyInstance=$.extend(new ParsleyField(this.$element,parentParsleyInstance||this),new ParsleyAbstract(),window.ParsleyExtend).init();break;case'parsleyFieldMultiple':parsleyInstance=$.extend(new ParsleyField(this.$element,parentParsleyInstance||this),new ParsleyAbstract(),new ParsleyMultiple(),window.ParsleyExtend).init(multiple);break;default:throw new Error(type+'is not a supported Parsley type');}
if('ParsleyForm'===parsleyInstance.__class__||'ParsleyField'===parsleyInstance.__class__){this.$element.data('Parsley',parsleyInstance);this.__proxy__=parsleyInstance.__class__;$.emit('parsley:'+('parsleyForm'===type?'form':'field')+':init',parsleyInstance);}
return parsleyInstance;}};$.fn.parsley=$.fn.psly=function(options){if(this.length>1){var instances=[];this.each(function(){instances.push($(this).parsley(options));});return instances;}
if(!$(this).length){if(window.console&&window.console.warn)
window.console.warn('You must bind Parsley on an existing element.');return;}
return new Parsley(this,options);};window.ParsleyUI='function'===typeof ParsleyUtils.get(window.ParsleyConfig,'ParsleyUI')?new window.ParsleyConfig.ParsleyUI().listen():new ParsleyUI().listen();if('undefined'===typeof window.ParsleyExtend)
window.ParsleyExtend={};if('undefined'===typeof window.ParsleyConfig)
window.ParsleyConfig={};window.Parsley=window.psly=Parsley;window.ParsleyUtils=ParsleyUtils;window.ParsleyValidator=new ParsleyValidator(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);if(false!==ParsleyUtils.get(window,'ParsleyConfig.autoBind'))
$(document).ready(function(){$('[data-parsley-validate]').parsley();});})(window.jQuery);!function(a){var b={attr:function(a,b,c){var d,e={},f=new RegExp("^"+b,"i");if("undefined"==typeof a||"undefined"==typeof a[0])return{};for(var g in a[0].attributes)if(d=a[0].attributes[g],"undefined"!=typeof d&&null!==d&&d.specified&&f.test(d.name)){if("undefined"!=typeof c&&new RegExp(c,"i").test(d.name))return!0;e[this.camelize(d.name.replace(b,""))]=this.deserializeValue(d.value)}return"undefined"==typeof c?e:!1},setAttr:function(a,b,c,d){a[0].setAttribute(this.dasherize(b+c),String(d))},get:function(a,b,c){for(var d=0,e=(b||"").split(".");this.isObject(a)||this.isArray(a);)if(a=a[e[d++]],d===e.length)return a||c;return c},hash:function(a){return String(Math.random()).substring(2,a?a+2:9)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return a===Object(a)},deserializeValue:function(b){var c;try{return b?"true"==b||("false"==b?!1:"null"==b?null:isNaN(c=Number(b))?/^[\[\{]/.test(b)?a.parseJSON(b):b:c):b}catch(d){return b}},camelize:function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},dasherize:function(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}},c={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset]",priorityEnabled:!0,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},d=function(){};d.prototype={asyncSupport:!1,actualizeOptions:function(){return this.options=this.parsleyInstance.OptionsFactory.get(this),this},validateThroughValidator:function(){return window.ParsleyValidator.validate.apply(window.ParsleyValidator,arguments)},subscribe:function(b,c){return a.listenTo(this,b.toLowerCase(),c),this},unsubscribe:function(b){return a.unsubscribeTo(this,b.toLowerCase()),this},reset:function(){if("ParsleyForm"!==this.__class__)return a.emit("parsley:field:reset",this);for(var b=0;b<this.fields.length;b++)a.emit("parsley:field:reset",this.fields[b]);a.emit("parsley:form:reset",this)},destroy:function(){if("ParsleyForm"!==this.__class__)return a.emit("parsley:field:destroy",this),void this.$element.removeData("Parsley");for(var b=0;b<this.fields.length;b++)this.fields[b].destroy();a.emit("parsley:form:destroy",this),this.$element.removeData("Parsley")}},function(a){var b=function(a){return this.__class__="Validator",this.__version__="0.5.7",this.options=a||{},this.bindingKey=this.options.bindingKey||"_validatorjsConstraint",this};b.prototype={constructor:b,validate:function(a,b,c){if("string"!=typeof a&&"object"!=typeof a)throw new Error("You must validate an object or a string");return"string"==typeof a||g(a)?this._validateString(a,b,c):this.isBinded(a)?this._validateBindedObject(a,b):this._validateObject(a,b,c)},bind:function(a,b){if("object"!=typeof a)throw new Error("Must bind a Constraint to an object");return a[this.bindingKey]=new c(b),this},unbind:function(a){return"undefined"==typeof a._validatorjsConstraint?this:(delete a[this.bindingKey],this)},isBinded:function(a){return"undefined"!=typeof a[this.bindingKey]},getBinded:function(a){return this.isBinded(a)?a[this.bindingKey]:null},_validateString:function(a,b,c){var f,h=[];g(b)||(b=[b]);for(var i=0;i<b.length;i++){if(!(b[i]instanceof e))throw new Error("You must give an Assert or an Asserts array to validate a string");f=b[i].check(a,c),f instanceof d&&h.push(f)}return h.length?h:!0},_validateObject:function(a,b,d){if("object"!=typeof b)throw new Error("You must give a constraint to validate an object");return b instanceof c?b.check(a,d):new c(b).check(a,d)},_validateBindedObject:function(a,b){return a[this.bindingKey].check(a,b)}},b.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var c=function(a,b){if(this.__class__="Constraint",this.options=b||{},this.nodes={},a)try{this._bootstrap(a)}catch(c){throw new Error("Should give a valid mapping object to Constraint",c,a)}return this};c.prototype={constructor:c,check:function(a,b){var c,d={};for(var h in this.options.strict?this.nodes:a)if(this.options.strict?this.has(h,a):this.has(h))c=this._check(h,a[h],b),(g(c)&&c.length>0||!g(c)&&!f(c))&&(d[h]=c);else if(this.options.strict)try{(new e).HaveProperty(h).validate(a)}catch(i){d[h]=i}return f(d)?!0:d},add:function(a,b){if(b instanceof e||g(b)&&b[0]instanceof e)return this.nodes[a]=b,this;if("object"==typeof b&&!g(b))return this.nodes[a]=b instanceof c?b:new c(b),this;throw new Error("Should give an Assert, an Asserts array, a Constraint",b)},has:function(a,b){var b="undefined"!=typeof b?b:this.nodes;return"undefined"!=typeof b[a]},get:function(a,b){return this.has(a)?this.nodes[a]:b||null},remove:function(a){var b=[];for(var c in this.nodes)c!==a&&(b[c]=this.nodes[c]);return this.nodes=b,this},_bootstrap:function(a){if(a instanceof c)return this.nodes=a.nodes;for(var b in a)this.add(b,a[b])},_check:function(a,b,d){if(this.nodes[a]instanceof e)return this._checkAsserts(b,[this.nodes[a]],d);if(g(this.nodes[a]))return this._checkAsserts(b,this.nodes[a],d);if(this.nodes[a]instanceof c)return this.nodes[a].check(b,d);throw new Error("Invalid node",this.nodes[a])},_checkAsserts:function(a,b,c){for(var d,e=[],f=0;f<b.length;f++)d=b[f].check(a,c),"undefined"!=typeof d&&!0!==d&&e.push(d);return e}};var d=function(a,b,c){if(this.__class__="Violation",!(a instanceof e))throw new Error("Should give an assertion implementing the Assert interface");this.assert=a,this.value=b,"undefined"!=typeof c&&(this.violation=c)};d.prototype={show:function(){var a={assert:this.assert.__class__,value:this.value};return this.violation&&(a.violation=this.violation),a},__toString:function(){if("undefined"!=typeof this.violation)var a='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected;return this.assert.__class__+' assert failed for "'+this.value+a||""},getViolation:function(){var a,b;for(a in this.violation)b=this.violation[a];return{constraint:a,expected:b}}};var e=function(a){return this.__class__="Assert",this.__parentClass__=this.__class__,this.groups=[],"undefined"!=typeof a&&this.addGroup(a),this};e.prototype={construct:e,check:function(a,b){if(!(b&&!this.hasGroup(b)||!b&&this.hasGroups()))try{return this.validate(a,b)}catch(c){return c}},hasGroup:function(a){return g(a)?this.hasOneOf(a):"Any"===a?!0:this.hasGroups()?-1!==this.groups.indexOf(a):"Default"===a},hasOneOf:function(a){for(var b=0;b<a.length;b++)if(this.hasGroup(a[b]))return!0;return!1},hasGroups:function(){return this.groups.length>0},addGroup:function(a){return g(a)?this.addGroups(a):(this.hasGroup(a)||this.groups.push(a),this)},removeGroup:function(a){for(var b=[],c=0;c<this.groups.length;c++)a!==this.groups[c]&&b.push(this.groups[c]);return this.groups=b,this},addGroups:function(a){for(var b=0;b<a.length;b++)this.addGroup(a[b]);return this},HaveProperty:function(a){return this.__class__="HaveProperty",this.node=a,this.validate=function(a){if("undefined"==typeof a[this.node])throw new d(this,a,{value:this.node});return!0},this},Blank:function(){return this.__class__="Blank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""!==a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Callback:function(a){if(this.__class__="Callback",this.arguments=Array.prototype.slice.call(arguments),1===this.arguments.length?this.arguments=[]:this.arguments.splice(0,1),"function"!=typeof a)throw new Error("Callback must be instanciated with a function");return this.fn=a,this.validate=function(a){var b=[a].concat(this.arguments),c=this.fn.apply(this,b);if(!0!==c)throw new d(this,a,{result:c});return!0},this},Choice:function(a){if(this.__class__="Choice",!g(a)&&"function"!=typeof a)throw new Error("Choice must be instanciated with an array or a function");return this.list=a,this.validate=function(a){for(var b="function"==typeof this.list?this.list():this.list,c=0;c<b.length;c++)if(a===b[c])return!0;throw new d(this,a,{choices:b})},this},Collection:function(a){return this.__class__="Collection",this.constraint="undefined"!=typeof a?new c(a):!1,this.validate=function(a,c){var e,h=new b,i=0,j={},k=this.groups.length?this.groups:c;if(!g(a))throw new d(this,array,{value:b.errorCode.must_be_an_array});for(var l=0;l<a.length;l++)e=this.constraint?h.validate(a[l],this.constraint,k):h.validate(a[l],k),f(e)||(j[i]=e),i++;return f(j)?!0:j},this},Count:function(a){return this.__class__="Count",this.count=a,this.validate=function(a){if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});var c="function"==typeof this.count?this.count(a):this.count;if(isNaN(Number(c)))throw new Error("Count must be a valid interger",c);if(c!==a.length)throw new d(this,a,{count:c});return!0},this},Email:function(){return this.__class__="Email",this.validate=function(a){var c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},Eql:function(a){if(this.__class__="Eql","undefined"==typeof a)throw new Error("Equal must be instanciated with an Array or an Object");return this.eql=a,this.validate=function(a){var b="function"==typeof this.eql?this.eql(a):this.eql;if(!h.eql(b,a))throw new d(this,a,{eql:b});return!0},this},EqualTo:function(a){if(this.__class__="EqualTo","undefined"==typeof a)throw new Error("EqualTo must be instanciated with a value or a function");return this.reference=a,this.validate=function(a){var b="function"==typeof this.reference?this.reference(a):this.reference;if(b!==a)throw new d(this,a,{value:b});return!0},this},GreaterThan:function(a){if(this.__class__="GreaterThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>=a)throw new d(this,a,{threshold:this.threshold});return!0},this},GreaterThanOrEqual:function(a){if(this.__class__="GreaterThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>a)throw new d(this,a,{threshold:this.threshold});return!0},this},InstanceOf:function(a){if(this.__class__="InstanceOf","undefined"==typeof a)throw new Error("InstanceOf must be instanciated with a value");return this.classRef=a,this.validate=function(a){if(!0!=a instanceof this.classRef)throw new d(this,a,{classRef:this.classRef});return!0},this},IPv4:function(){return this.__class__="IPv4",this.validate=function(a){var c=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},Length:function(a){if(this.__class__="Length",!a.min&&!a.max)throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object");return this.min=a.min,this.max=a.max,this.validate=function(a){if("string"!=typeof a&&!g(a))throw new d(this,a,{value:b.errorCode.must_be_a_string_or_array});if("undefined"!=typeof this.min&&this.min===this.max&&a.length!==this.min)throw new d(this,a,{min:this.min,max:this.max});if("undefined"!=typeof this.max&&a.length>this.max)throw new d(this,a,{max:this.max});if("undefined"!=typeof this.min&&a.length<this.min)throw new d(this,a,{min:this.min});return!0},this},LessThan:function(a){if(this.__class__="LessThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<=a)throw new d(this,a,{threshold:this.threshold});return!0},this},LessThanOrEqual:function(a){if(this.__class__="LessThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<a)throw new d(this,a,{threshold:this.threshold});return!0},this},Mac:function(){return this.__class__="Mac",this.validate=function(a){var c=/^(?:[0-9A-F]{2}:){5}[0-9A-F]{2}$/i;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},NotNull:function(){return this.__class__="NotNull",this.validate=function(a){if(null===a||"undefined"==typeof a)throw new d(this,a);return!0},this},NotBlank:function(){return this.__class__="NotBlank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""===a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Null:function(){return this.__class__="Null",this.validate=function(a){if(null!==a)throw new d(this,a);return!0},this},Range:function(a,b){if(this.__class__="Range","undefined"==typeof a||"undefined"==typeof b)throw new Error("Range assert expects min and max values");return this.min=a,this.max=b,this.validate=function(a){try{return"string"==typeof a&&isNaN(Number(a))||g(a)?(new e).Length({min:this.min,max:this.max}).validate(a):(new e).GreaterThanOrEqual(this.min).validate(a)&&(new e).LessThanOrEqual(this.max).validate(a),!0}catch(b){throw new d(this,a,b.violation)}return!0},this},Regexp:function(a,c){if(this.__class__="Regexp","undefined"==typeof a)throw new Error("You must give a regexp");return this.regexp=a,this.flag=c||"",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(a))throw new d(this,a,{regexp:this.regexp,flag:this.flag});return!0},this},Required:function(){return this.__class__="Required",this.validate=function(a){if("undefined"==typeof a)throw new d(this,a);if("string"==typeof a)try{(new e).NotNull().validate(a)&&(new e).NotBlank().validate(a)}catch(b){throw new d(this,a)}return!0},this},Unique:function(a){return this.__class__="Unique","object"==typeof a&&(this.key=a.key),this.validate=function(a){var c,e=[];if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var f=0;f<a.length;f++)if(c="object"==typeof a[f]?a[f][this.key]:a[f],"undefined"!=typeof c){if(-1!==e.indexOf(c))throw new d(this,a,{value:c});e.push(c)}return!0},this}},a.Assert=e,a.Validator=b,a.Violation=d,a.Constraint=c,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var f=function(a){for(var b in a)return!1;return!0},g=function(a){return"[object Array]"===Object.prototype.toString.call(a)},h={eql:function(a,b){if(a===b)return!0;if("undefined"!=typeof Buffer&&Buffer.isBuffer(a)&&Buffer.isBuffer(b)){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():"object"!=typeof a&&"object"!=typeof b?a==b:this.objEquiv(a,b)},isUndefinedOrNull:function(a){return null===a||"undefined"==typeof a},isArguments:function(a){return"[object Arguments]"==Object.prototype.toString.call(a)},keys:function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},objEquiv:function(a,b){if(this.isUndefinedOrNull(a)||this.isUndefinedOrNull(b))return!1;if(a.prototype!==b.prototype)return!1;if(this.isArguments(a))return this.isArguments(b)?eql(pSlice.call(a),pSlice.call(b)):!1;try{var c,d,e=this.keys(a),f=this.keys(b)}catch(g){return!1}if(e.length!==f.length)return!1;for(e.sort(),f.sort(),d=e.length-1;d>=0;d--)if(e[d]!=f[d])return!1;for(d=e.length-1;d>=0;d--)if(c=e[d],!this.eql(a[c],b[c]))return!1;return!0}};"function"==typeof define&&define.amd&&define("validator",[],function(){return a})}("undefined"==typeof exports?this["undefined"!=typeof validatorjs_ns?validatorjs_ns:"Validator"]={}:exports);var e=function(a,b){this.__class__="ParsleyValidator",this.Validator=Validator,this.locale="en",this.init(a||{},b||{})};e.prototype={init:function(b,c){this.catalog=c;for(var d in b)this.addValidator(d,b[d].fn,b[d].priority);a.emit("parsley:validator:init")},setLocale:function(a){if("undefined"==typeof this.catalog[a])throw new Error(a+" is not available in the catalog");return this.locale=a,this},addCatalog:function(a,b,c){return"object"==typeof b&&(this.catalog[a]=b),!0===c?this.setLocale(a):this},addMessage:function(a,b,c){void 0===typeof this.catalog[a]&&(this.catalog[a]={}),this.catalog[a][b]=c},validate:function(){return(new this.Validator.Validator).validate.apply(new Validator.Validator,arguments)},addValidator:function(b,c,d){return this.validators[b]=function(b){return a.extend((new Validator.Assert).Callback(c,b),{priority:d})},this},updateValidator:function(a,b,c){return addValidator(a,b,c)},removeValidator:function(a){return delete this.validators[a],this},getErrorMessage:function(a){var b;return b="type"===a.name?window.ParsleyConfig.i18n[this.locale][a.name][a.requirements]:this.formatMesssage(window.ParsleyConfig.i18n[this.locale][a.name],a.requirements),""!==b?b:window.ParsleyConfig.i18n[this.locale].defaultMessage},formatMesssage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMesssage(a,b[c]);return a}return"string"==typeof a?a.replace(new RegExp("%s","i"),b):""},validators:{notblank:function(){return a.extend((new Validator.Assert).NotBlank(),{priority:2})},required:function(){return a.extend((new Validator.Assert).Required(),{priority:512})},type:function(b){var c;switch(b){case"email":c=(new Validator.Assert).Email();break;case"number":c=(new Validator.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":c=(new Validator.Assert).Regexp("^-?\\d+$");break;case"digits":c=(new Validator.Assert).Regexp("^\\d+$");break;case"alphanum":c=(new Validator.Assert).Regexp("^\\w+$","i");break;case"url":c=(new Validator.Assert).Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)","i");break;default:throw new Error("validator type `"+b+"` is not supported")}return a.extend(c,{priority:256})},pattern:function(b){return a.extend((new Validator.Assert).Regexp(b),{priority:64})},minlength:function(b){return a.extend((new Validator.Assert).Length({min:b}),{priority:30})},maxlength:function(b){return a.extend((new Validator.Assert).Length({max:b}),{priority:30})},length:function(b){return a.extend((new Validator.Assert).Length({min:b[0],max:b[1]}),{priority:32})},mincheck:function(a){return this.minlength(a)},maxcheck:function(a){return this.maxlength(a)},check:function(a){return this.length(a)},min:function(b){return a.extend((new Validator.Assert).GreaterThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},max:function(b){return a.extend((new Validator.Assert).LessThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},range:function(b){return a.extend((new Validator.Assert).Range(b[0],b[1]),{priority:32,requirementsTransformer:function(){for(var a=0;a<b.length;a++)b[a]="string"!=typeof b[a]||isNaN(b[a])?b[a]:parseInt(b[a],10);return b}})},equalto:function(b){return a.extend((new Validator.Assert).EqualTo(b),{priority:256,requirementsTransformer:function(){return a(b).length?a(b).val():b}})}}};var f=function(){this.__class__="ParsleyUI"};f.prototype={listen:function(){return a.listen("parsley:form:init",this,this.setupForm),a.listen("parsley:field:init",this,this.setupField),a.listen("parsley:field:validated",this,this.reflow),a.listen("parsley:form:validated",this,this.focus),a.listen("parsley:field:reset",this,this.reset),a.listen("parsley:form:destroy",this,this.destroy),a.listen("parsley:field:destroy",this,this.destroy),this},reflow:function(a){if("undefined"!=typeof a._ui&&!1!==a._ui.active){var b=this._diff(a.validationResult,a._ui.lastValidationResult);a._ui.lastValidationResult=a.validationResult,a._ui.validatedOnce=!0,this.manageStatusClass(a),this.manageErrorsMessages(a,b),this.actualizeTriggers(a),(b.kept.length||b.added.length)&&"undefined"==typeof a._ui.failedOnce&&this.manageFailingFieldTrigger(a)}},manageStatusClass:function(a){!0===a.validationResult?this._successClass(a):a.validationResult.length>0?this._errorClass(a):this._resetClass(a)},manageErrorsMessages:function(b,c){if("undefined"==typeof b.options.errorsMessagesDisabled){if("undefined"!=typeof b.options.errorMessage)return void(c.added.length||c.kept.length?(0===b._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&b._ui.$errorsWrapper.append(a(b.options.errorTemplate).addClass("parsley-custom-error-message")),b._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(b.options.errorMessage)):b._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove());for(var d=0;d<c.removed.length;d++)this.removeError(b,c.removed[d].assert.name,!0);for(d=0;d<c.added.length;d++)this.addError(b,c.added[d].assert.name,void 0,c.added[d].assert,!0);for(d=0;d<c.kept.length;d++)this.updateError(b,c.kept[d].assert.name,void 0,c.kept[d].assert,!0)}},addError:function(b,c,d,e,f){b._ui.$errorsWrapper.addClass("filled").append(a(b.options.errorTemplate).addClass("parsley-"+c).html(d||this._getErrorMessage(b,e))),!0!==f&&this._errorClass(b)},updateError:function(a,b,c,d,e){a._ui.$errorsWrapper.addClass("filled").find(".parsley-"+b).html(c||this._getErrorMessage(a,d)),!0!==e&&this._errorClass(a)},removeError:function(a,b,c){a._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+b).remove(),!0!==c&&this.manageStatusClass(a)},focus:function(a){if(!0===a.validationResult||"none"===a.options.focus)return a._focusedField=null;a._focusedField=null;for(var b=0;b<a.fields.length;b++)if(!0!==a.fields[b].validationResult&&a.fields[b].validationResult.length>0&&"undefined"==typeof a.fields[b].options.noFocus){if("first"===a.options.focus)return a._focusedField=a.fields[b].$element,a._focusedField.focus();a._focusedField=a.fields[b].$element}return null===a._focusedField?null:a._focusedField.focus()},_getErrorMessage:function(a,b){var c=b.name+"Message";return"undefined"!=typeof a.options[c]?a.options[c]:window.ParsleyValidator.getErrorMessage(b)},_diff:function(a,b,c){for(var d=[],e=[],f=0;f<a.length;f++){for(var g=!1,h=0;h<b.length;h++)if(a[f].assert.name===b[h].assert.name){g=!0;break}g?e.push(a[f]):d.push(a[f])}return{kept:e,added:d,removed:c?[]:this._diff(b,a,!0).added}},setupForm:function(b){b.$element.on("submit.Parsley",!1,a.proxy(b.onSubmitValidate,b)),!1!==b.options.uiEnabled&&b.$element.attr("novalidate","")},setupField:function(b){var c={active:!1};!1!==b.options.uiEnabled&&(c.active=!0,b.$element.attr(b.options.namespace+"id",b.__id__),c.$errorClassHandler=this._manageClassHandler(b),c.errorsWrapperId="parsley-id-"+("undefined"!=typeof b.options.multiple?"multiple-"+b.options.multiple:b.__id__),c.$errorsWrapper=a(b.options.errorsWrapper).attr("id",c.errorsWrapperId),c.lastValidationResult=[],c.validatedOnce=!1,c.validationInformationVisible=!1,b._ui=c,this._insertErrorWrapper(b),this.actualizeTriggers(b))},_manageClassHandler:function(b){if("string"==typeof b.options.classHandler&&a(b.options.classHandler).length)return a(b.options.classHandler);var c=b.options.classHandler(b);return"undefined"!=typeof c&&c.length?c:"undefined"==typeof b.options.multiple?b.$element:b.$element.parent()},_insertErrorWrapper:function(b){var c;if("string"==typeof b.options.errorsContainer){if(a(b.options.errorsContainer+"").length)return a(b.options.errorsContainer).append(b._ui.$errorsWrapper);window.console&&window.console.warn&&window.console.warn("The errors container `"+b.options.errorsContainer+"` does not exist in DOM")}return"function"==typeof b.options.errorsContainer&&(c=b.options.errorsContainer(b)),"undefined"!=typeof c&&c.length?c.append(b._ui.$errorsWrapper):"undefined"==typeof b.options.multiple?b.$element.after(b._ui.$errorsWrapper):b.$element.parent().after(b._ui.$errorsWrapper)},actualizeTriggers:function(b){if(b.$element.off(".Parsley"),!1!==b.options.trigger){var c=b.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");""!==c&&b.$element.on(c.split(" ").join(".Parsley ")+".Parsley",!1,a.proxy("function"==typeof b.eventValidate?b.eventValidate:this.eventValidate,b))}},eventValidate:function(a){new RegExp("key").test(a.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.validate())},manageFailingFieldTrigger:function(b){return b._ui.failedOnce=!0,b.options.multiple&&a("["+b.options.namespace+'multiple="'+b.options.multiple+'"]').each(function(){return new RegExp("change","i").test(a(this).parsley().options.trigger||"")?void 0:a(this).parsley().$element.on("change.ParsleyFailedOnce",!1,a.proxy(b.validate,b))}),new RegExp("keyup","i").test(b.options.trigger||"")?void 0:b.$element.on("keyup.ParsleyFailedOnce",!1,a.proxy(b.validate,b))},reset:function(b){"undefined"!=typeof b._ui&&(b.$element.off(".Parsley"),b.$element.off(".ParsleyFailedOnce"),"ParsleyForm"!==b.__class__&&(b._ui.$errorsWrapper.children().each(function(){a(this).remove()}),this._resetClass(b),b._ui.validatedOnce=!1,b._ui.lastValidationResult=[],b._ui.validationInformationVisible=!1))},destroy:function(a){"undefined"!=typeof a._ui&&(this.reset(a),"ParsleyForm"!==a.__class__&&(a._ui.$errorsWrapper.remove(),delete a._ui))},_successClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.errorClass).addClass(a.options.successClass)},_errorClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.successClass).addClass(a.options.errorClass)},_resetClass:function(a){a._ui.$errorClassHandler.removeClass(a.options.successClass).removeClass(a.options.errorClass)}};var g=function(c,d,e,f){this.__class__="OptionsFactory",this.__id__=b.hash(4),this.formOptions=null,this.fieldOptions=null,this.staticOptions=a.extend(!0,{},c,d,e,{namespace:f})};g.prototype={get:function(a){if("undefined"==typeof a.__class__)throw new Error("Parsley Instance expected");switch(a.__class__){case"Parsley":return this.staticOptions;case"ParsleyForm":return this.getFormOptions(a);case"ParsleyField":return this.getFieldOptions(a);default:throw new Error("Instance "+a.__class__+" is not supported")}},getFormOptions:function(c){return this.formOptions=b.attr(c.$element,this.staticOptions.namespace),a.extend({},this.staticOptions,this.formOptions)},getFieldOptions:function(c){return this.fieldOptions=b.attr(c.$element,this.staticOptions.namespace),null===this.formOptions&&"ParsleyForm"===c.parsleyInstance.__proxy__&&(this.formOptions=getFormOptions(c.parsleyInstance)),a.extend({},this.staticOptions,this.formOptions,this.fieldOptions)}};var h=function(c,d){if(this.__class__="ParsleyForm",this.__id__=b.hash(4),"Parsley"!==b.get(d,"__class__"))throw new Error("You must give a Parsley instance");this.parsleyInstance=d,this.$element=a(c)};h.prototype={init:function(){return this.validationResult=null,this.options=this.parsleyInstance.OptionsFactory.get(this),this._bindFields(),this},onSubmitValidate:function(b){return this.validate(void 0,void 0,b),!1===this.validationResult&&b instanceof a.Event&&b.preventDefault(),this},validate:function(b,c,d){this.submitEvent=d,this.validationResult=!0;var e=[];this._refreshFields(),a.emit("parsley:form:validate",this);for(var f=0;f<this.fields.length;f++)b&&b!==this.fields[f].options.group||(e=this.fields[f].validate(c),!0!==e&&e.length>0&&this.validationResult&&(this.validationResult=!1));return a.emit("parsley:form:validated",this),this.validationResult},isValid:function(a,b){this._refreshFields();for(var c=0;c<this.fields.length;c++)if((!a||a===this.fields[c].options.group)&&!1===this.fields[c].isValid(b))return!1;return!0},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var a=this;return this.fields=[],this.$element.find(this.options.inputs).each(function(){var b=new window.Parsley(this,{},a.parsleyInstance);"ParsleyField"!==b.__class__||b.$element.is(b.options.excluded)||a.fields.push(b)}),this}};var i=function(c,d,e,f,g){if("ParsleyField"!==b.get(c,"__class__"))throw new Error("ParsleyField instance expected");if("function"!=typeof window.ParsleyValidator.validators[d]&&"Assert"!==window.ParsleyValidator.validators[d](e).__parentClass__)throw new Error("Valid validator expected");var h=function(a,c){return"undefined"!=typeof a.options[c+"Priority"]?a.options[c+"Priority"]:b.get(window.ParsleyValidator.validators[c](e),"priority",2)};return f=f||h(c,d),"function"==typeof window.ParsleyValidator.validators[d](e).requirementsTransformer&&(e=window.ParsleyValidator.validators[d](e).requirementsTransformer()),a.extend(window.ParsleyValidator.validators[d](e),{name:d,requirements:e,priority:f,groups:[f],isDomConstraint:g||b.attr(c.$element,c.options.namespace,d)})},j=function(c,d){if(this.__class__="ParsleyField",this.__id__=b.hash(4),"Parsley"!==b.get(d,"__class__"))throw new Error("You must give a Parsley instance");this.parsleyInstance=d,this.$element=a(c),this.options=this.parsleyInstance.OptionsFactory.get(this)};j.prototype={init:function(){if(this.constraints=[],this.validationResult=[],this.$element.is("input[type=radio], input[type=checkbox]")&&"undefined"==typeof this.options.multiple||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")){if("undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?this.options.multiple=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(this.options.multiple=this.$element.attr("id")),"undefined"==typeof this.options.multiple)return window.console&&window.console.warn&&window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name, and id or a multiple option.",this.$element),this.parsleyInstance;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\$)/g,""),b.setAttr(this.$element,this.options.namespace,"multiple",this.options.multiple)}return this.bindConstraints(),this},validate:function(b){return this.value=this.getValue(),a.emit("parsley:field:validate",this),a.emit("parsley:field:"+(this.isValid(b,this.value)?"success":"error"),this),a.emit("parsley:field:validated",this),this.validationResult},getConstraintsSortedPriorities:function(){for(var a=[],b=0;b<this.constraints.length;b++)-1===a.indexOf(this.constraints[b].priority)&&a.push(this.constraints[b].priority);return a.sort(function(a,b){return b-a}),a},isValid:function(a,b){var c=this.getConstraintsSortedPriorities();if(b=b||this.getValue(),this.refreshConstraints(),""===b&&!this.isRequired()&&"undefined"==typeof this.options.validateIfEmpty&&"undefined"==typeof this.options.multiple&&"undefined"==typeof a)return this.validationResult=[];if(!1===this.options.priorityEnabled)return!0===(this.validationResult=this.validateThroughValidator(b,this.constraints,"Any"));for(var d=0;d<c.length;d++)if(!0!==(this.validationResult=this.validateThroughValidator(b,this.constraints,c[d])))return!1;return!0},isRequired:function(){var a=this._constraintIndex("required");return!(-1===a||-1!==a&&!1===this.constraints[a].requirements)},getValue:function(){if("undefined"!=typeof this.options.value)return this.options.value;if("undefined"==typeof this.options.multiple){var b=this.$element.val();return!0===this.options.trimValue?b.replace(/^\s+|\s+$/g,""):b}if(this.$element.is("input[type=radio]"))return a("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').val()||"";if(this.$element.is("input[type=checkbox]")){var c=[];return a("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').each(function(){c.push(a(this).val())}),c.length?c:""}return this.$element.is("select")?null===this.$element.val()?"":this.$element.val():void 0},refreshConstraints:function(){return this.actualizeOptions().bindConstraints()},bindConstraints:function(){for(var a=[],b=0;b<this.constraints.length;b++)!1===this.constraints[b].isDomConstraint&&a.push(this.constraints[b]);this.constraints=a;for(var c in this.options)this.addConstraint(c,this.options[c]);return this.bindHtml5Constraints()},bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,void 0,!0),"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),void 0,!0),"undefined"!=typeof this.$element.attr("min")&&"undefined"!=typeof this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],void 0,!0):"undefined"!=typeof this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),void 0,!0):"undefined"!=typeof this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),void 0,!0);var a=this.$element.attr("type");return"undefined"==typeof a?this:"number"===a?this.addConstraint("type","integer",void 0,!0):new RegExp(a,"i").test("email url range")?this.addConstraint("type",a,void 0,!0):void 0},addConstraint:function(a,b,c,d){if(a=a.toLowerCase(),"function"==typeof window.ParsleyValidator.validators[a]){var e=new i(this,a,b,c,d);-1!==this._constraintIndex(e.name)&&this.removeConstraint(e.name),this.constraints.push(e)}return this},removeConstraint:function(a){for(var b=0;b<this.constraints.length;b++)if(a===this.constraints[b].name){this.constraints.splice(b,1);break}return this},updateConstraint:function(a,b,c){return this.removeConstraint(a).addConstraint(a,b,c)},_constraintIndex:function(a){for(var b=0;b<this.constraints.length;b++)if(a===this.constraints[b].name)return b;return-1}};var k=function(){this.__class__="ParsleyFieldMultiple"};k.prototype={init:function(a){return this.options.multiple=a,b.setAttr(this.$element,this.options.namespace,"multiple",this.options.multiple),this}};var l=a({}),m={};a.listen=function(a){if("undefined"==typeof m[a]&&(m[a]=[]),"function"==typeof arguments[1])return m[a].push({fn:arguments[1]});if("object"==typeof arguments[1]&&"function"==typeof arguments[2])return m[a].push({fn:arguments[2],ctxt:arguments[1]});throw new Error("Wrong parameters")},a.listenTo=function(a,b,c){if("undefined"==typeof m[b]&&(m[b]=[]),!(a instanceof j||a instanceof h))throw new Error("Must give Parsley instance");if("string"!=typeof b||"function"!=typeof c)throw new Error("Wrong parameters");m[b].push({instance:a,fn:c})},a.unsubscribe=function(a,b){if("undefined"!=typeof m[a]){if("string"!=typeof a||"function"!=typeof b)throw new Error("Wrong arguments");for(var c=0;c<m[a].length;c++)if(m[a][c].fn===b)return m[a].splice(c,1)}},a.unsubscribeTo=function(a,b){if("undefined"!=typeof m[b]){if(!(a instanceof j||a instanceof h))throw new Error("Must give Parsley instance");for(var c=0;c<m[b].length;c++)if("undefined"!=typeof m[b][c].instance&&m[b][c].instance.__id__===a.__id__)return m[b].splice(c,1)}},a.unsubscribeAll=function(a){"undefined"!=typeof m[a]&&delete m[a]},a.emit=function(a,b){if("undefined"!=typeof m[a])for(var c=0;c<m[a].length;c++)if("undefined"!=typeof m[a][c].instance){if(b instanceof j||b instanceof h)if(m[a][c].instance.__id__!==b.__id__){if(m[a][c].instance instanceof h&&b instanceof j)for(var d=0;d<m[a][c].instance.fields.length;d++)if(m[a][c].instance.fields[d].__id__===b.__id__){m[a][c].fn.apply(l,Array.prototype.slice.call(arguments,1));continue}}else m[a][c].fn.apply(l,Array.prototype.slice.call(arguments,1))}else m[a][c].fn.apply("undefined"!=typeof m[a][c].ctxt?m[a][c].ctxt:l,Array.prototype.slice.call(arguments,1))},a.subscribed=function(){return m},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.en=a.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,!0);var n=function(c,d,e){if(this.__class__="Parsley",this.__version__="2.0.0-rc4",this.__id__=b.hash(4),"undefined"==typeof c)throw new Error("You must give an element");return this.init(a(c),d,e)};n.prototype={init:function(a,d,e){if(!a.length)throw new Error("You must bind Parsley on an existing element.");if(this.$element=a,this.$element.data("Parsley")){var f=this.$element.data("Parsley");return"undefined"!=typeof e&&"ParsleyField"===f.parsleyInstance.__proxy__&&(f.parsleyInstance=e),f}return this.OptionsFactory=new g(c,b.get(window,"ParsleyConfig",{}),d,this.getNamespace(d)),d=this.OptionsFactory.get(this),this.$element.is("form")||b.attr(this.$element,d.namespace,"validate")&&!this.$element.is(d.inputs)?this.bind("parsleyForm",e):this.$element.is(d.inputs)?this.$element.is("input[type=radio], input[type=checkbox]")&&"undefined"==typeof d.multiple||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")?("undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?d.multiple=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(d.multiple=this.$element.attr("id")),"undefined"==typeof d.multiple?(window.console&&window.console.warn&&window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name, and id or a multiple option.",this.$element),this):(d.multiple=d.multiple.replace(/(:|\.|\[|\]|\$)/g,""),this.bind("parsleyFieldMultiple",e,d.multiple))):this.bind("parsleyField",e):this},getNamespace:function(a){return"undefined"!=typeof this.$element.data("parsleyNamespace")?this.$element.data("parsleyNamespace"):"undefined"!=typeof b.get(a,"namespace")?a.namespace:"undefined"!=typeof b.get(window,"ParsleyConfig.namespace")?window.ParsleyConfig.namespace:c.namespace},bind:function(b,c,e){var f;switch(b){case"parsleyForm":f=a.extend(new h(this.$element,c||this),new d,window.ParsleyExtend).init();break;case"parsleyField":f=a.extend(new j(this.$element,c||this),new d,window.ParsleyExtend).init();break;case"parsleyFieldMultiple":f=a.extend(new j(this.$element,c||this),new d,new k,window.ParsleyExtend).init(e);break;default:throw new Error(b+"is not a supported Parsley type")}return("ParsleyForm"===f.__class__||"ParsleyField"===f.__class__)&&(this.$element.data("Parsley",f),this.__proxy__=f.__class__,a.emit("parsley:"+("parsleyForm"===b?"form":"field")+":init",f)),f}},a.fn.parsley=a.fn.psly=function(b){if(this.length>1){var c=[];return this.each(function(){c.push(a(this).parsley(b))}),c}return a(this).length?new n(this,b):void(window.console&&window.console.warn&&window.console.warn("You must bind Parsley on an existing element."))},window.ParsleyUI="function"==typeof b.get(window.ParsleyConfig,"ParsleyUI")?(new window.ParsleyConfig.ParsleyUI).listen():(new f).listen(),"undefined"==typeof window.ParsleyExtend&&(window.ParsleyExtend={}),"undefined"==typeof window.ParsleyConfig&&(window.ParsleyConfig={}),window.Parsley=window.psly=n,window.ParsleyUtils=b,window.ParsleyValidator=new e(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),!1!==b.get(window,"ParsleyConfig.autoBind")&&a(document).ready(function(){a("[data-parsley-validate]").parsley()})}(window.jQuery);$(function()
{var targets=$('[rel~=tooltip]'),target=false,tooltip=false,title=false;targets.bind('mouseenter',function()
{target=$(this);tip=target.attr('title');tooltip=$('<div id="tooltip"></div>');if(!tip||tip=='')
return false;target.removeAttr('title');tooltip.css('opacity',0).html(tip).appendTo('body');var init_tooltip=function()
{if($(window).width()<tooltip.outerWidth()*1.5)
tooltip.css('max-width',$(window).width()/2);else
tooltip.css('max-width',340);var pos_left=target.offset().left+(target.outerWidth()/2)-(tooltip.outerWidth()/2),pos_top=target.offset().top-tooltip.outerHeight()-20;if(pos_left<0)
{pos_left=target.offset().left+target.outerWidth()/2-20;tooltip.addClass('left');}
else
tooltip.removeClass('left');if(pos_left+tooltip.outerWidth()>$(window).width())
{pos_left=target.offset().left-tooltip.outerWidth()+target.outerWidth()/2+20;tooltip.addClass('right');}
else
tooltip.removeClass('right');if(pos_top<0)
{var pos_top=target.offset().top+target.outerHeight();tooltip.addClass('top');}
else
tooltip.removeClass('top');tooltip.css({left:pos_left,top:pos_top}).animate({top:'+=10',opacity:1},50);};init_tooltip();$(window).resize(init_tooltip);var remove_tooltip=function()
{tooltip.animate({top:'-=10',opacity:0},50,function()
{$(this).remove();});target.attr('title',tip);};target.bind('mouseleave',remove_tooltip);tooltip.bind('click',remove_tooltip);});});(function($){function activate(element,container){container.find('.active').removeClass('active')
element.addClass('active')}
function tab(e){var $this=$(this),href=$this.attr('href'),$ul=$(e.liveFired),$controlled
if(/^#\w+/.test(href)){e.preventDefault()
if($this.hasClass('active')){return}
$href=$(href)
activate($this.parent('li'),$ul)
activate($href,$href.parent())}}
$.fn.tabs=$.fn.pills=function(selector){return this.each(function(){$(this).delegate(selector||'.tabs li > a, .pills > li > a','click',tab)})}
$(document).ready(function(){$('body').tabs('ul[data-tabs] li > a, ul[data-pills] > li > a')})})(window.jQuery||window.ender);(function($,window,document,undefined)
{'use strict';var cssTransitionSupport=function()
{var s=document.body||document.documentElement,s=s.style;if(s.WebkitTransition=='')return'-webkit-';if(s.MozTransition=='')return'-moz-';if(s.OTransition=='')return'-o-';if(s.transition=='')return'';return false;},isCssTransitionSupport=cssTransitionSupport()===false?false:true,cssTransitionTranslateX=function(element,positionX,speed)
{var options={},prefix=cssTransitionSupport();options[prefix+'transform']='translateX('+positionX+')';options[prefix+'transition']=prefix+'transform '+speed+'s linear';element.css(options);},hasTouch=('ontouchstart'in window),hasPointers=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,wasTouched=function(event)
{if(hasTouch)
return true;if(!hasPointers||typeof event==='undefined'||typeof event.pointerType==='undefined')
return false;if(typeof event.MSPOINTER_TYPE_MOUSE!=='undefined')
{if(event.MSPOINTER_TYPE_MOUSE!=event.pointerType)
return true;}
else
if(event.pointerType!='mouse')
return true;return false;};$.fn.imageLightbox=function(options)
{var options=$.extend({selector:'id="imagelightbox"',allowedTypes:'png|jpg|jpeg|gif',animationSpeed:250,preloadNext:true,enableKeyboard:true,quitOnEnd:false,quitOnImgClick:false,quitOnDocClick:true,onStart:false,onEnd:false,onLoadStart:false,onLoadEnd:false},options),targets=$([]),target=$(),image=$(),imageWidth=0,imageHeight=0,swipeDiff=0,inProgress=false,isTargetValid=function(element)
{return $(element).prop('tagName').toLowerCase()=='a'&&(new RegExp('\.('+options.allowedTypes+')$','i')).test($(element).attr('href'));},setImage=function()
{if(!image.length)return true;var screenWidth=$(window).width()*0.8,screenHeight=$(window).height()*0.9,tmpImage=new Image();tmpImage.src=image.attr('src');tmpImage.onload=function()
{imageWidth=tmpImage.width;imageHeight=tmpImage.height;if(imageWidth>screenWidth||imageHeight>screenHeight)
{var ratio=imageWidth/imageHeight>screenWidth/screenHeight?imageWidth/screenWidth:imageHeight/screenHeight;imageWidth/=ratio;imageHeight/=ratio;}
image.css({'width':imageWidth+'px','height':imageHeight+'px','top':($(window).height()-imageHeight)/2+'px','left':($(window).width()-imageWidth)/2+'px'});};},loadImage=function(direction)
{if(inProgress)return false;direction=typeof direction==='undefined'?false:direction=='left'?1:-1;if(image.length)
{if(direction!==false&&(targets.length<2||(options.quitOnEnd===true&&((direction===-1&&targets.index(target)==0)||(direction===1&&targets.index(target)==targets.length-1)))))
{quitLightbox();return false;}
var params={'opacity':0};if(isCssTransitionSupport)cssTransitionTranslateX(image,(100*direction)-swipeDiff+'px',options.animationSpeed/1000);else params.left=parseInt(image.css('left'))+100*direction+'px';image.animate(params,options.animationSpeed,function(){removeImage();});swipeDiff=0;}
inProgress=true;if(options.onLoadStart!==false)options.onLoadStart();setTimeout(function()
{image=$('<img '+options.selector+' />').attr('src',target.attr('href')).load(function()
{image.appendTo('body');setImage();var params={'opacity':1};image.css('opacity',0);if(isCssTransitionSupport)
{cssTransitionTranslateX(image,-100*direction+'px',0);setTimeout(function(){cssTransitionTranslateX(image,0+'px',options.animationSpeed/1000)},50);}
else
{var imagePosLeft=parseInt(image.css('left'));params.left=imagePosLeft+'px';image.css('left',imagePosLeft-100*direction+'px');}
image.animate(params,options.animationSpeed,function()
{inProgress=false;if(options.onLoadEnd!==false)options.onLoadEnd();});if(options.preloadNext)
{var nextTarget=targets.eq(targets.index(target)+1);if(!nextTarget.length)nextTarget=targets.eq(0);$('<img />').attr('src',nextTarget.attr('href')).load();}}).error(function()
{if(options.onLoadEnd!==false)options.onLoadEnd();})
var swipeStart=0,swipeEnd=0,imagePosLeft=0;image.on(hasPointers?'pointerup MSPointerUp':'click',function(e)
{e.preventDefault();if(options.quitOnImgClick)
{quitLightbox();return false;}
if(wasTouched(e.originalEvent))return true;var posX=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;target=targets.eq(targets.index(target)-(imageWidth/2>posX?1:-1));if(!target.length)target=targets.eq(imageWidth/2>posX?targets.length:0);loadImage(imageWidth/2>posX?'left':'right');}).on('touchstart pointerdown MSPointerDown',function(e)
{if(!wasTouched(e.originalEvent)||options.quitOnImgClick)return true;if(isCssTransitionSupport)imagePosLeft=parseInt(image.css('left'));swipeStart=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;}).on('touchmove pointermove MSPointerMove',function(e)
{if(!wasTouched(e.originalEvent)||options.quitOnImgClick)return true;e.preventDefault();swipeEnd=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;swipeDiff=swipeStart-swipeEnd;if(isCssTransitionSupport)cssTransitionTranslateX(image,-swipeDiff+'px',0);else image.css('left',imagePosLeft-swipeDiff+'px');}).on('touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel',function(e)
{if(!wasTouched(e.originalEvent)||options.quitOnImgClick)return true;if(Math.abs(swipeDiff)>50)
{target=targets.eq(targets.index(target)-(swipeDiff<0?1:-1));if(!target.length)target=targets.eq(swipeDiff<0?targets.length:0);loadImage(swipeDiff>0?'right':'left');}
else
{if(isCssTransitionSupport)cssTransitionTranslateX(image,0+'px',options.animationSpeed/1000);else image.animate({'left':imagePosLeft+'px'},options.animationSpeed/2);}});},options.animationSpeed+100);},removeImage=function()
{if(!image.length)return false;image.remove();image=$();},quitLightbox=function()
{if(!image.length)return false;image.animate({'opacity':0},options.animationSpeed,function()
{removeImage();inProgress=false;if(options.onEnd!==false)options.onEnd();});};$(window).on('resize',setImage);if(options.quitOnDocClick)
{$(document).on(hasTouch?'touchend':'click',function(e)
{if(image.length&&!$(e.target).is(image))quitLightbox();})}
if(options.enableKeyboard)
{$(document).on('keyup',function(e)
{if(!image.length)return true;e.preventDefault();if(e.keyCode==27)quitLightbox();if(e.keyCode==37||e.keyCode==39)
{target=targets.eq(targets.index(target)-(e.keyCode==37?1:-1));if(!target.length)target=targets.eq(e.keyCode==37?targets.length:0);loadImage(e.keyCode==37?'left':'right');}});}
$(document).on('click',this.selector,function(e)
{if(!isTargetValid(this))return true;e.preventDefault();if(inProgress)return false;inProgress=false;if(options.onStart!==false)options.onStart();target=$(this);loadImage();});this.each(function()
{if(!isTargetValid(this))return true;targets=targets.add($(this));});this.switchImageLightbox=function(index)
{var tmpTarget=targets.eq(index);if(tmpTarget.length)
{var currentIndex=targets.index(target);target=tmpTarget;loadImage(index<currentIndex?'left':'right');}
return this;};this.quitImageLightbox=function()
{quitLightbox();return this;};return this;};})(jQuery,window,document);;(function(e,t,n,r){"use strict";var i=function(){var e=n.body||n.documentElement,e=e.style;if(e.WebkitTransition=="")return"-webkit-";if(e.MozTransition=="")return"-moz-";if(e.OTransition=="")return"-o-";if(e.transition=="")return"";return false},s=i()===false?false:true,o=function(e,t,n){var r={},s=i();r[s+"transform"]="translateX("+t+")";r[s+"transition"]=s+"transform "+n+"s linear";e.css(r)},u="ontouchstart"in t,a=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,f=function(e){if(u)return true;if(!a||typeof e==="undefined"||typeof e.pointerType==="undefined")return false;if(typeof e.MSPOINTER_TYPE_MOUSE!=="undefined"){if(e.MSPOINTER_TYPE_MOUSE!=e.pointerType)return true}else if(e.pointerType!="mouse")return true;return false};e.fn.imageLightbox=function(r){var r=e.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:true,enableKeyboard:true,quitOnEnd:false,quitOnImgClick:false,quitOnDocClick:true,onStart:false,onEnd:false,onLoadStart:false,onLoadEnd:false},r),i=e([]),l=e(),c=e(),h=0,p=0,d=0,v=false,m=function(t){return e(t).prop("tagName").toLowerCase()=="a"&&(new RegExp(".("+r.allowedTypes+")$","i")).test(e(t).attr("href"))},g=function(){if(!c.length)return true;var n=e(t).width()*.8,r=e(t).height()*.9,i=new Image;i.src=c.attr("src");i.onload=function(){h=i.width;p=i.height;if(h>n||p>r){var s=h/p>n/r?h/n:p/r;h/=s;p/=s}c.css({width:h+"px",height:p+"px",top:(e(t).height()-p)/2+"px",left:(e(t).width()-h)/2+"px"})}},y=function(t){if(v)return false;t=typeof t==="undefined"?false:t=="left"?1:-1;if(c.length){if(t!==false&&(i.length<2||r.quitOnEnd===true&&(t===-1&&i.index(l)==0||t===1&&i.index(l)==i.length-1))){w();return false}var n={opacity:0};if(s)o(c,100*t-d+"px",r.animationSpeed/1e3);else n.left=parseInt(c.css("left"))+100*t+"px";c.animate(n,r.animationSpeed,function(){b()});d=0}v=true;if(r.onLoadStart!==false)r.onLoadStart();setTimeout(function(){c=e("<img "+r.selector+" />").attr("src",l.attr("href")).load(function(){c.appendTo("body");g();var n={opacity:1};c.css("opacity",0);if(s){o(c,-100*t+"px",0);setTimeout(function(){o(c,0+"px",r.animationSpeed/1e3)},50)}else{var u=parseInt(c.css("left"));n.left=u+"px";c.css("left",u-100*t+"px")}c.animate(n,r.animationSpeed,function(){v=false;if(r.onLoadEnd!==false)r.onLoadEnd()});if(r.preloadNext){var a=i.eq(i.index(l)+1);if(!a.length)a=i.eq(0);e("<img />").attr("src",a.attr("href")).load()}}).error(function(){if(r.onLoadEnd!==false)r.onLoadEnd()});var n=0,u=0,p=0;c.on(a?"pointerup MSPointerUp":"click",function(e){e.preventDefault();if(r.quitOnImgClick){w();return false}if(f(e.originalEvent))return true;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;l=i.eq(i.index(l)-(h/2>t?1:-1));if(!l.length)l=i.eq(h/2>t?i.length:0);y(h/2>t?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;if(s)p=parseInt(c.css("left"));n=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;e.preventDefault();u=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;d=n-u;if(s)o(c,-d+"px",0);else c.css("left",p-d+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;if(Math.abs(d)>50){l=i.eq(i.index(l)-(d<0?1:-1));if(!l.length)l=i.eq(d<0?i.length:0);y(d>0?"right":"left")}else{if(s)o(c,0+"px",r.animationSpeed/1e3);else c.animate({left:p+"px"},r.animationSpeed/2)}})},r.animationSpeed+100)},b=function(){if(!c.length)return false;c.remove();c=e()},w=function(){if(!c.length)return false;c.animate({opacity:0},r.animationSpeed,function(){b();v=false;if(r.onEnd!==false)r.onEnd()})};e(t).on("resize",g);if(r.quitOnDocClick){e(n).on(u?"touchend":"click",function(t){if(c.length&&!e(t.target).is(c))w()})}if(r.enableKeyboard){e(n).on("keyup",function(e){if(!c.length)return true;e.preventDefault();if(e.keyCode==27)w();if(e.keyCode==37||e.keyCode==39){l=i.eq(i.index(l)-(e.keyCode==37?1:-1));if(!l.length)l=i.eq(e.keyCode==37?i.length:0);y(e.keyCode==37?"left":"right")}})}e(n).on("click",this.selector,function(t){if(!m(this))return true;t.preventDefault();if(v)return false;v=false;if(r.onStart!==false)r.onStart();l=e(this);y()});this.each(function(){if(!m(this))return true;i=i.add(e(this))});this.switchImageLightbox=function(e){var t=i.eq(e);if(t.length){var n=i.index(l);l=t;y(e<n?"left":"right")}return this};this.quitImageLightbox=function(){w();return this};return this}})(jQuery,window,document);(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else if(typeof exports==="object"){factory(require("jquery"));}else{factory(jQuery);}})(function($){"use strict";var $window=$(window),$document=$(document),location=window.location,TRUE=true,FALSE=false,NULL=null,NAN=NaN,INFINITY=Infinity,STRING_UNDEFINED="undefined",STRING_DIRECTIVE="directive",CROPPER_NAMESPACE=".cropper",REGEXP_DIRECTIVES=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,REGEXP_OPTIONS=/^(x|y|width|height)$/,REGEXP_PROPERTIES=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio|rotate)$/,CLASS_MODAL="cropper-modal",CLASS_HIDDEN="cropper-hidden",CLASS_INVISIBLE="cropper-invisible",CLASS_MOVE="cropper-move",CLASS_CROP="cropper-crop",CLASS_DISABLED="cropper-disabled",EVENT_MOUSE_DOWN="mousedown touchstart",EVENT_MOUSE_MOVE="mousemove touchmove",EVENT_MOUSE_UP="mouseup mouseleave touchend touchleave touchcancel",EVENT_WHEEL="wheel mousewheel DOMMouseScroll",EVENT_RESIZE="resize"+CROPPER_NAMESPACE,EVENT_DBLCLICK="dblclick",EVENT_BUILD="build"+CROPPER_NAMESPACE,EVENT_BUILT="built"+CROPPER_NAMESPACE,EVENT_DRAG_START="dragstart"+CROPPER_NAMESPACE,EVENT_DRAG_MOVE="dragmove"+CROPPER_NAMESPACE,EVENT_DRAG_END="dragend"+CROPPER_NAMESPACE,isNumber=function(n){return typeof n==="number";},toArray=function(obj,offset){var args=[];if(typeof offset==="number"){args.push(offset);}
return args.slice.apply(obj,args);},proxy=function(fn,context){var args=toArray(arguments,2);return function(){return fn.apply(context,args.concat(toArray(arguments)));};},addTimestamp=function(url){var timestamp="timestamp="+(new Date()).getTime();return(url+(url.indexOf("?")===-1?"?":"&")+timestamp);},Cropper=function(element,options){this.element=element;this.$element=$(element);this.defaults=$.extend({},Cropper.DEFAULTS,$.isPlainObject(options)?options:{});this.$original=NULL;this.ready=FALSE;this.built=FALSE;this.cropped=FALSE;this.rotated=FALSE;this.disabled=FALSE;this.replaced=FALSE;this.init();},sqrt=Math.sqrt,min=Math.min,max=Math.max,abs=Math.abs,sin=Math.sin,cos=Math.cos,num=parseFloat;Cropper.prototype={constructor:Cropper,support:{canvas:$.isFunction($("<canvas>")[0].getContext)},init:function(){var defaults=this.defaults;$.each(defaults,function(i,n){switch(i){case"aspectRatio":defaults[i]=abs(num(n))||NAN;break;case"autoCropArea":defaults[i]=abs(num(n))||0.8;break;case"minWidth":case"minHeight":defaults[i]=abs(num(n))||0;break;case"maxWidth":case"maxHeight":defaults[i]=abs(num(n))||INFINITY;break;}});this.image={rotate:0};this.load();},load:function(){var _this=this,$this=this.$element,element=this.element,image=this.image,crossOrigin="",$clone,url;if($this.is("img")){url=$this.prop("src");}else if($this.is("canvas")&&this.support.canvas){url=element.toDataURL();}
if(!url){return;}
if(this.replaced){image.rotate=0;}
if(this.defaults.checkImageOrigin){if($this.prop("crossOrigin")||this.isCrossOriginURL(url)){crossOrigin=" crossOrigin";url=addTimestamp(url);}}
this.$clone=($clone=$("<img"+crossOrigin+' src="'+url+'">'));$clone.one("load",function(){image.naturalWidth=this.naturalWidth||$clone.width();image.naturalHeight=this.naturalHeight||$clone.height();image.aspectRatio=image.naturalWidth/image.naturalHeight;_this.url=url;_this.ready=TRUE;_this.build();});$clone.addClass(CLASS_INVISIBLE).prependTo("body");},isCrossOriginURL:function(url){var parts=url.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);if((parts&&(parts[1]!==location.protocol||parts[2]!==location.hostname||parts[3]!==location.port))){return TRUE;}
return FALSE;},build:function(){var $this=this.$element,defaults=this.defaults,buildEvent,$cropper;if(!this.ready){return;}
if(this.built){this.unbuild();}
$this.one(EVENT_BUILD,defaults.build);buildEvent=$.Event(EVENT_BUILD);$this.trigger(buildEvent);if(buildEvent.isDefaultPrevented()){return;}
this.$cropper=($cropper=$(Cropper.TEMPLATE));$this.addClass(CLASS_HIDDEN);this.$clone.removeClass(CLASS_INVISIBLE).prependTo($cropper);if(!this.rotated){this.$original=this.$clone.clone();this.$original.addClass(CLASS_HIDDEN).prependTo(this.$cropper);this.originalImage=$.extend({},this.image);}
this.$container=$this.parent();this.$container.append($cropper);this.$canvas=$cropper.find(".cropper-canvas");this.$dragger=$cropper.find(".cropper-dragger");this.$viewer=$cropper.find(".cropper-viewer");defaults.autoCrop?(this.cropped=TRUE):this.$dragger.addClass(CLASS_HIDDEN);defaults.modal&&this.$canvas.addClass(CLASS_MODAL);!defaults.dashed&&this.$dragger.find(".cropper-dashed").addClass(CLASS_HIDDEN);!defaults.movable&&this.$dragger.find(".cropper-face").data(STRING_DIRECTIVE,"move");!defaults.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(CLASS_HIDDEN);this.addListeners();this.initPreview();this.built=TRUE;defaults.dragCrop&&this.setDragMode("crop");this.update();this.replaced=FALSE;$this.one(EVENT_BUILT,defaults.built);$this.trigger(EVENT_BUILT);},unbuild:function(){if(!this.built){return;}
this.built=FALSE;this.removeListeners();this.$preview.empty();this.$preview=NULL;this.$dragger=NULL;this.$canvas=NULL;this.$container=NULL;this.$cropper.remove();this.$cropper=NULL;},update:function(data){this.initContainer();this.initCropper();this.initImage();this.initDragger();if(data){this.setData(data,TRUE);this.setDragMode("crop");}else{this.setData(this.defaults.data);}},resize:function(){clearTimeout(this.resizing);this.resizing=setTimeout($.proxy(this.update,this,this.getData()),200);},preview:function(){var image=this.image,dragger=this.dragger,width=image.width,height=image.height,left=dragger.left-image.left,top=dragger.top-image.top;this.$viewer.find("img").css({width:width,height:height,marginLeft:-left,marginTop:-top});this.$preview.each(function(){var $this=$(this),ratio=$this.width()/dragger.width;$this.find("img").css({width:width*ratio,height:height*ratio,marginLeft:-left*ratio,marginTop:-top*ratio});});},addListeners:function(){var defaults=this.defaults;this.$element.on(EVENT_DRAG_START,defaults.dragstart).on(EVENT_DRAG_MOVE,defaults.dragmove).on(EVENT_DRAG_END,defaults.dragend);this.$cropper.on(EVENT_MOUSE_DOWN,$.proxy(this.dragstart,this)).on(EVENT_DBLCLICK,$.proxy(this.dblclick,this));if(defaults.zoomable){this.$cropper.on(EVENT_WHEEL,$.proxy(this.wheel,this));}
if(defaults.multiple){this.$cropper.on(EVENT_MOUSE_MOVE,$.proxy(this.dragmove,this)).on(EVENT_MOUSE_UP,$.proxy(this.dragend,this));}else{$document.on(EVENT_MOUSE_MOVE,(this._dragmove=proxy(this.dragmove,this))).on(EVENT_MOUSE_UP,(this._dragend=proxy(this.dragend,this)));}
$window.on(EVENT_RESIZE,(this._resize=proxy(this.resize,this)));},removeListeners:function(){var defaults=this.defaults;this.$element.off(EVENT_DRAG_START,defaults.dragstart).off(EVENT_DRAG_MOVE,defaults.dragmove).off(EVENT_DRAG_END,defaults.dragend);this.$cropper.off(EVENT_MOUSE_DOWN,this.dragstart).off(EVENT_DBLCLICK,this.dblclick);if(defaults.zoomable){this.$cropper.off(EVENT_WHEEL,this.wheel);}
if(defaults.multiple){this.$cropper.off(EVENT_MOUSE_MOVE,this.dragmove).off(EVENT_MOUSE_UP,this.dragend);}else{$document.off(EVENT_MOUSE_MOVE,this._dragmove).off(EVENT_MOUSE_UP,this._dragend);}
$window.off(EVENT_RESIZE,this._resize);},initPreview:function(){var img='<img src="'+this.url+'">';this.$preview=$(this.defaults.preview);this.$viewer.html(img);this.$preview.html(img).find("img").css("cssText","min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;");},initContainer:function(){var $container=this.$container;this.container={width:max($container.width(),300),height:max($container.height(),150)};},initCropper:function(){var container=this.container,image=this.image,cropper;if(((image.naturalWidth*container.height/image.naturalHeight)-container.width)>=0){cropper={width:container.width,height:container.width/image.aspectRatio,left:0};cropper.top=(container.height-cropper.height)/2;}else{cropper={width:container.height*image.aspectRatio,height:container.height,top:0};cropper.left=(container.width-cropper.width)/2;}
this.$cropper.css({width:cropper.width,height:cropper.height,left:cropper.left,top:cropper.top});this.cropper=cropper;},initImage:function(){var image=this.image,cropper=this.cropper,defaultImage={_width:cropper.width,_height:cropper.height,width:cropper.width,height:cropper.height,left:0,top:0,ratio:cropper.width/image.naturalWidth};this.defaultImage=$.extend({},image,defaultImage);if(image._width!==cropper.width||image._height!==cropper.height){$.extend(image,defaultImage);}else{image=$.extend({},defaultImage,image);if(this.replaced){image.ratio=defaultImage.ratio;}}
this.image=image;this.renderImage();},renderImage:function(mode){var image=this.image;if(mode==="zoom"){image.left-=(image.width-image.oldWidth)/2;image.top-=(image.height-image.oldHeight)/2;}
image.left=min(max(image.left,image._width-image.width),0);image.top=min(max(image.top,image._height-image.height),0);this.$clone.css({width:image.width,height:image.height,marginLeft:image.left,marginTop:image.top});if(mode){this.defaults.done(this.getData());this.preview();}},initDragger:function(){var defaults=this.defaults,cropper=this.cropper,aspectRatio=defaults.aspectRatio||this.image.aspectRatio,ratio=this.image.ratio,autoCropDragger,dragger;if(((cropper.height*aspectRatio)-cropper.width)>=0){dragger={height:cropper.width/aspectRatio,width:cropper.width,left:0,top:(cropper.height-(cropper.width/aspectRatio))/2,maxWidth:cropper.width,maxHeight:cropper.width/aspectRatio};}else{dragger={height:cropper.height,width:cropper.height*aspectRatio,left:(cropper.width-(cropper.height*aspectRatio))/2,top:0,maxWidth:cropper.height*aspectRatio,maxHeight:cropper.height};}
dragger.minWidth=0;dragger.minHeight=0;if(defaults.aspectRatio){if(isFinite(defaults.maxWidth)){dragger.maxWidth=min(dragger.maxWidth,defaults.maxWidth*ratio);dragger.maxHeight=dragger.maxWidth/aspectRatio;}else if(isFinite(defaults.maxHeight)){dragger.maxHeight=min(dragger.maxHeight,defaults.maxHeight*ratio);dragger.maxWidth=dragger.maxHeight*aspectRatio;}
if(defaults.minWidth>0){dragger.minWidth=max(0,defaults.minWidth*ratio);dragger.minHeight=dragger.minWidth/aspectRatio;}else if(defaults.minHeight>0){dragger.minHeight=max(0,defaults.minHeight*ratio);dragger.minWidth=dragger.minHeight*aspectRatio;}}else{dragger.maxWidth=min(dragger.maxWidth,defaults.maxWidth*ratio);dragger.maxHeight=min(dragger.maxHeight,defaults.maxHeight*ratio);dragger.minWidth=max(0,defaults.minWidth*ratio);dragger.minHeight=max(0,defaults.minHeight*ratio);}
dragger.minWidth=min(dragger.maxWidth,dragger.minWidth);dragger.minHeight=min(dragger.maxHeight,dragger.minHeight);autoCropDragger=$.extend({},dragger);autoCropDragger.height=dragger.height*defaults.autoCropArea;autoCropDragger.width=dragger.width*defaults.autoCropArea;autoCropDragger.left=(cropper.width-autoCropDragger.width)/2;autoCropDragger.top=(cropper.height-autoCropDragger.height)/2;autoCropDragger.oldLeft=dragger.oldLeft=dragger.left;autoCropDragger.oldTop=dragger.oldTop=dragger.top;this.autoCropDragger=autoCropDragger;this.defaultDragger=$.extend({},dragger);this.dragger=dragger;},renderDragger:function(){var dragger=this.dragger,cropper=this.cropper;if(dragger.width>dragger.maxWidth){dragger.width=dragger.maxWidth;dragger.left=dragger.oldLeft;}else if(dragger.width<dragger.minWidth){dragger.width=dragger.minWidth;dragger.left=dragger.oldLeft;}
if(dragger.height>dragger.maxHeight){dragger.height=dragger.maxHeight;dragger.top=dragger.oldTop;}else if(dragger.height<dragger.minHeight){dragger.height=dragger.minHeight;dragger.top=dragger.oldTop;}
dragger.left=min(max(dragger.left,0),cropper.width-dragger.width);dragger.top=min(max(dragger.top,0),cropper.height-dragger.height);dragger.oldLeft=dragger.left;dragger.oldTop=dragger.top;this.dragger=dragger;if(!this.disabled){this.defaults.done(this.getData());}
this.$dragger.css({width:dragger.width,height:dragger.height,left:dragger.left,top:dragger.top});this.preview();},reset:function(deep){if(!this.cropped){return;}
if(deep){this.defaults.data={};}
this.image=$.extend({},this.defaultImage);this.renderImage();this.dragger=$.extend({},this.defaultDragger);this.setData(this.defaults.data);},clear:function(){if(!this.cropped){return;}
this.cropped=FALSE;this.setData({x:0,y:0,width:0,height:0});this.$canvas.removeClass(CLASS_MODAL);this.$dragger.addClass(CLASS_HIDDEN);},destroy:function(){var $this=this.$element;if(!this.ready){return;}
this.unbuild();$this.removeClass(CLASS_HIDDEN).removeData("cropper");if(this.rotated){$this.attr("src",this.$original.attr("src"));}},replace:function(url,rotated){var _this=this,$this=this.$element,element=this.element,context;if(url&&url!==this.url&&url!==$this.attr("src")){if(!rotated){this.rotated=FALSE;this.replaced=TRUE;}
if($this.is("img")){$this.attr("src",url);this.load();}else if($this.is("canvas")&&this.support.canvas){context=element.getContext("2d");$('<img src="'+url+'">').one("load",function(){element.width=this.width;element.height=this.height;context.clearRect(0,0,element.width,element.height);context.drawImage(this,0,0);_this.load();});}}},setData:function(data,once){var cropper=this.cropper,dragger=this.dragger,image=this.image,aspectRatio=this.defaults.aspectRatio;if(!this.built||typeof data===STRING_UNDEFINED){return;}
if(data===NULL||$.isEmptyObject(data)){dragger=$.extend({},this.autoCropDragger);}
if($.isPlainObject(data)&&!$.isEmptyObject(data)){if(!once){this.defaults.data=data;}
data=this.transformData(data);if(isNumber(data.x)&&data.x<=cropper.width-image.left){dragger.left=data.x+image.left;}
if(isNumber(data.y)&&data.y<=cropper.height-image.top){dragger.top=data.y+image.top;}
if(aspectRatio){if(isNumber(data.width)&&data.width<=dragger.maxWidth&&data.width>=dragger.minWidth){dragger.width=data.width;dragger.height=dragger.width/aspectRatio;}else if(isNumber(data.height)&&data.height<=dragger.maxHeight&&data.height>=dragger.minHeight){dragger.height=data.height;dragger.width=dragger.height*aspectRatio;}}else{if(isNumber(data.width)&&data.width<=dragger.maxWidth&&data.width>=dragger.minWidth){dragger.width=data.width;}
if(isNumber(data.height)&&data.height<=dragger.maxHeight&&data.height>=dragger.minHeight){dragger.height=data.height;}}}
this.dragger=dragger;this.renderDragger();},getData:function(rounded){var dragger=this.dragger,image=this.image,data={};if(this.built){data={x:dragger.left-image.left,y:dragger.top-image.top,width:dragger.width,height:dragger.height};data=this.transformData(data,TRUE,rounded);}
return data;},transformData:function(data,reversed,rounded){var ratio=this.image.ratio,result={};$.each(data,function(i,n){n=num(n);if(REGEXP_OPTIONS.test(i)&&!isNaN(n)){result[i]=reversed?(rounded?Math.round(n/ratio):n/ratio):n*ratio;}});return result;},setAspectRatio:function(aspectRatio){var freeRatio=aspectRatio==="auto";aspectRatio=num(aspectRatio);if(freeRatio||(!isNaN(aspectRatio)&&aspectRatio>0)){this.defaults.aspectRatio=freeRatio?NAN:aspectRatio;if(this.built){this.initDragger();this.renderDragger();}}},getImageData:function(){var data={};if(this.ready){$.each(this.image,function(name,value){if(REGEXP_PROPERTIES.test(name)){data[name]=value;}});}
return data;},getDataURL:function(options,type,quality){var canvas=$("<canvas>")[0],data=this.getData(),dataURL="",context;if(!$.isPlainObject(options)){quality=type;type=options;options={};}
options=$.extend({width:data.width,height:data.height},options);if(this.cropped&&this.support.canvas){canvas.width=options.width;canvas.height=options.height;context=canvas.getContext("2d");if(type==="image/jpeg"){context.fillStyle="#fff";context.fillRect(0,0,options.width,options.height);}
context.drawImage(this.$clone[0],data.x,data.y,data.width,data.height,0,0,options.width,options.height);dataURL=canvas.toDataURL(type,quality);}
return dataURL;},setDragMode:function(mode){var $canvas=this.$canvas,defaults=this.defaults,cropable=FALSE,movable=FALSE;if(!this.built||this.disabled){return;}
switch(mode){case"crop":if(defaults.dragCrop){cropable=TRUE;$canvas.data(STRING_DIRECTIVE,mode);}
break;case"move":movable=TRUE;$canvas.data(STRING_DIRECTIVE,mode);break;default:$canvas.removeData(STRING_DIRECTIVE);}
$canvas.toggleClass(CLASS_CROP,cropable).toggleClass(CLASS_MOVE,movable);},enable:function(){if(this.built){this.disabled=FALSE;this.$cropper.removeClass(CLASS_DISABLED);}},disable:function(){if(this.built){this.disabled=TRUE;this.$cropper.addClass(CLASS_DISABLED);}},rotate:function(degree){var image=this.image;degree=num(degree)||0;if(!this.built||degree===0||this.disabled||!this.defaults.rotatable||!this.support.canvas){return;}
this.rotated=TRUE;degree=(image.rotate=(image.rotate+degree)%360);this.replace(this.getRotatedDataURL(degree),true);},getRotatedDataURL:function(degree){var canvas=$("<canvas>")[0],context=canvas.getContext("2d"),arc=degree*Math.PI/180,deg=abs(degree)%180,acuteAngle=deg>90?(180-deg):deg,acuteAngleArc=acuteAngle*Math.PI/180,originalImage=this.originalImage,naturalWidth=originalImage.naturalWidth,naturalHeight=originalImage.naturalHeight,width=abs(naturalWidth*cos(acuteAngleArc)+naturalHeight*sin(acuteAngleArc)),height=abs(naturalWidth*sin(acuteAngleArc)+naturalHeight*cos(acuteAngleArc));canvas.width=width;canvas.height=height;context.save();context.translate(width/2,height/2);context.rotate(arc);context.drawImage(this.$original[0],-naturalWidth/2,-naturalHeight/2,naturalWidth,naturalHeight);context.restore();return canvas.toDataURL();},zoom:function(delta){var image=this.image,width,height,range;delta=num(delta);if(!this.built||!delta||this.disabled||!this.defaults.zoomable){return;}
width=image.width*(1+delta);height=image.height*(1+delta);range=width/image._width;if(range>10){return;}
if(range<1){width=image._width;height=image._height;}
if(range<=1){this.setDragMode("crop");}else{this.setDragMode("move");}
image.oldWidth=image.width;image.oldHeight=image.height;image.width=width;image.height=height;image.ratio=image.width/image.naturalWidth;this.renderImage("zoom");},dblclick:function(){if(this.disabled){return;}
if(this.$canvas.hasClass(CLASS_CROP)){this.setDragMode("move");}else{this.setDragMode("crop");}},wheel:function(event){var e=event.originalEvent,msDeltaY=117.25,mozDelatY=5,webkitDelatY=166.66665649414062,zoomDelta=0.1,delta;if(this.disabled){return;}
event.preventDefault();if(e.deltaY){delta=e.deltaY;delta=delta%mozDelatY===0?delta/mozDelatY:delta%msDeltaY===0?delta/msDeltaY:delta/webkitDelatY;}else{delta=e.wheelDelta?-e.wheelDelta/120:(e.detail?e.detail/3:0);}
this.zoom(delta*zoomDelta);},dragstart:function(event){var touches=event.originalEvent.touches,e=event,directive,dragStartEvent,touchesLength;if(this.disabled){return;}
if(touches){touchesLength=touches.length;if(touchesLength>1){if(this.defaults.zoomable&&touchesLength===2){e=touches[1];this.startX2=e.pageX;this.startY2=e.pageY;directive="zoom";}else{return;}}
e=touches[0];}
directive=directive||$(e.target).data(STRING_DIRECTIVE);if(REGEXP_DIRECTIVES.test(directive)){event.preventDefault();dragStartEvent=$.Event(EVENT_DRAG_START);this.$element.trigger(dragStartEvent);if(dragStartEvent.isDefaultPrevented()){return;}
this.directive=directive;this.cropping=FALSE;this.startX=e.pageX;this.startY=e.pageY;if(directive==="crop"){this.cropping=TRUE;this.$canvas.addClass(CLASS_MODAL);}}},dragmove:function(event){var touches=event.originalEvent.touches,e=event,dragMoveEvent,touchesLength;if(this.disabled){return;}
if(touches){touchesLength=touches.length;if(touchesLength>1){if(this.defaults.zoomable&&touchesLength===2){e=touches[1];this.endX2=e.pageX;this.endY2=e.pageY;}else{return;}}
e=touches[0];}
if(this.directive){event.preventDefault();dragMoveEvent=$.Event(EVENT_DRAG_MOVE);this.$element.trigger(dragMoveEvent);if(dragMoveEvent.isDefaultPrevented()){return;}
this.endX=e.pageX;this.endY=e.pageY;this.dragging();}},dragend:function(event){var dragEndEvent;if(this.disabled){return;}
if(this.directive){event.preventDefault();dragEndEvent=$.Event(EVENT_DRAG_END);this.$element.trigger(dragEndEvent);if(dragEndEvent.isDefaultPrevented()){return;}
if(this.cropping){this.cropping=FALSE;this.$canvas.toggleClass(CLASS_MODAL,this.cropped&&this.defaults.modal);}
this.directive="";}},dragging:function(){var directive=this.directive,image=this.image,cropper=this.cropper,maxWidth=cropper.width,maxHeight=cropper.height,dragger=this.dragger,width=dragger.width,height=dragger.height,left=dragger.left,top=dragger.top,right=left+width,bottom=top+height,renderable=TRUE,defaults=this.defaults,aspectRatio=defaults.aspectRatio,range={x:this.endX-this.startX,y:this.endY-this.startY},offset;if(aspectRatio){range.X=range.y*aspectRatio;range.Y=range.x/aspectRatio;}
switch(directive){case"all":left+=range.x;top+=range.y;break;case"e":if(range.x>=0&&(right>=maxWidth||aspectRatio&&(top<=0||bottom>=maxHeight))){renderable=FALSE;break;}
width+=range.x;if(aspectRatio){height=width/aspectRatio;top-=range.Y/2;}
if(width<0){directive="w";width=0;}
break;case"n":if(range.y<=0&&(top<=0||aspectRatio&&(left<=0||right>=maxWidth))){renderable=FALSE;break;}
height-=range.y;top+=range.y;if(aspectRatio){width=height*aspectRatio;left+=range.X/2;}
if(height<0){directive="s";height=0;}
break;case"w":if(range.x<=0&&(left<=0||aspectRatio&&(top<=0||bottom>=maxHeight))){renderable=FALSE;break;}
width-=range.x;left+=range.x;if(aspectRatio){height=width/aspectRatio;top+=range.Y/2;}
if(width<0){directive="e";width=0;}
break;case"s":if(range.y>=0&&(bottom>=maxHeight||aspectRatio&&(left<=0||right>=maxWidth))){renderable=FALSE;break;}
height+=range.y;if(aspectRatio){width=height*aspectRatio;left-=range.X/2;}
if(height<0){directive="n";height=0;}
break;case"ne":if(aspectRatio){if(range.y<=0&&(top<=0||right>=maxWidth)){renderable=FALSE;break;}
height-=range.y;top+=range.y;width=height*aspectRatio;}else{if(range.x>=0){if(right<maxWidth){width+=range.x;}else if(range.y<=0&&top<=0){renderable=FALSE;}}else{width+=range.x;}
if(range.y<=0){if(top>0){height-=range.y;top+=range.y;}}else{height-=range.y;top+=range.y;}}
if(height<0){directive="sw";height=0;width=0;}
break;case"nw":if(aspectRatio){if(range.y<=0&&(top<=0||left<=0)){renderable=FALSE;break;}
height-=range.y;top+=range.y;width=height*aspectRatio;left+=range.X;}else{if(range.x<=0){if(left>0){width-=range.x;left+=range.x;}else if(range.y<=0&&top<=0){renderable=FALSE;}}else{width-=range.x;left+=range.x;}
if(range.y<=0){if(top>0){height-=range.y;top+=range.y;}}else{height-=range.y;top+=range.y;}}
if(height<0){directive="se";height=0;width=0;}
break;case"sw":if(aspectRatio){if(range.x<=0&&(left<=0||bottom>=maxHeight)){renderable=FALSE;break;}
width-=range.x;left+=range.x;height=width/aspectRatio;}else{if(range.x<=0){if(left>0){width-=range.x;left+=range.x;}else if(range.y>=0&&bottom>=maxHeight){renderable=FALSE;}}else{width-=range.x;left+=range.x;}
if(range.y>=0){if(bottom<maxHeight){height+=range.y;}}else{height+=range.y;}}
if(width<0){directive="ne";height=0;width=0;}
break;case"se":if(aspectRatio){if(range.x>=0&&(right>=maxWidth||bottom>=maxHeight)){renderable=FALSE;break;}
width+=range.x;height=width/aspectRatio;}else{if(range.x>=0){if(right<maxWidth){width+=range.x;}else if(range.y>=0&&bottom>=maxHeight){renderable=FALSE;}}else{width+=range.x;}
if(range.y>=0){if(bottom<maxHeight){height+=range.y;}}else{height+=range.y;}}
if(width<0){directive="nw";height=0;width=0;}
break;case"move":image.left+=range.x;image.top+=range.y;this.renderImage("move");renderable=FALSE;break;case"zoom":if(defaults.zoomable){this.zoom(function(x,y,x1,y1,x2,y2){return(sqrt(x2*x2+y2*y2)-sqrt(x1*x1+y1*y1))/sqrt(x*x+y*y);}(image.width,image.height,abs(this.startX-this.startX2),abs(this.startY-this.startY2),abs(this.endX-this.endX2),abs(this.endY-this.endY2)));this.endX2=this.startX2;this.endY2=this.startY2;}
break;case"crop":if(range.x&&range.y){offset=this.$cropper.offset();left=this.startX-offset.left;top=this.startY-offset.top;width=dragger.minWidth;height=dragger.minHeight;if(range.x>0){if(range.y>0){directive="se";}else{directive="ne";top-=height;}}else{if(range.y>0){directive="sw";left-=width;}else{directive="nw";left-=width;top-=height;}}
if(!this.cropped){this.cropped=TRUE;this.$dragger.removeClass(CLASS_HIDDEN);}}
break;}
if(renderable){dragger.width=width;dragger.height=height;dragger.left=left;dragger.top=top;this.directive=directive;this.renderDragger();}
this.startX=this.endX;this.startY=this.endY;}};Cropper.TEMPLATE=(function(source,words){words=words.split(",");return source.replace(/\d+/g,function(i){return words[i];});})('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-dragger"><1 6="5-viewer"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,directive,data,point,cropper,class,line,dashed");Cropper.DEFAULTS={aspectRatio:"auto",autoCropArea:0.8,data:{},done:$.noop,preview:"",multiple:FALSE,autoCrop:TRUE,dragCrop:TRUE,dashed:TRUE,modal:TRUE,movable:TRUE,resizable:TRUE,zoomable:TRUE,rotatable:TRUE,checkImageOrigin:TRUE,minWidth:0,minHeight:0,maxWidth:INFINITY,maxHeight:INFINITY,build:NULL,built:NULL,dragstart:NULL,dragmove:NULL,dragend:NULL};Cropper.setDefaults=function(options){$.extend(Cropper.DEFAULTS,options);};Cropper.other=$.fn.cropper;$.fn.cropper=function(options){var args=toArray(arguments,1),result;this.each(function(){var $this=$(this),data=$this.data("cropper"),fn;if(!data){$this.data("cropper",(data=new Cropper(this,options)));}
if(typeof options==="string"&&$.isFunction((fn=data[options]))){result=fn.apply(data,args);}});return(typeof result!==STRING_UNDEFINED?result:this);};$.fn.cropper.Constructor=Cropper;$.fn.cropper.setDefaults=Cropper.setDefaults;$.fn.cropper.noConflict=function(){$.fn.cropper=Cropper.other;return this;};});function RGBColor(color_string)
{this.ok=false;if(color_string.charAt(0)=='#'){color_string=color_string.substr(1,6);}
color_string=color_string.replace(/ /g,'');color_string=color_string.toLowerCase();var simple_colors={aliceblue:'f0f8ff',antiquewhite:'faebd7',aqua:'00ffff',aquamarine:'7fffd4',azure:'f0ffff',beige:'f5f5dc',bisque:'ffe4c4',black:'000000',blanchedalmond:'ffebcd',blue:'0000ff',blueviolet:'8a2be2',brown:'a52a2a',burlywood:'deb887',cadetblue:'5f9ea0',chartreuse:'7fff00',chocolate:'d2691e',coral:'ff7f50',cornflowerblue:'6495ed',cornsilk:'fff8dc',crimson:'dc143c',cyan:'00ffff',darkblue:'00008b',darkcyan:'008b8b',darkgoldenrod:'b8860b',darkgray:'a9a9a9',darkgreen:'006400',darkkhaki:'bdb76b',darkmagenta:'8b008b',darkolivegreen:'556b2f',darkorange:'ff8c00',darkorchid:'9932cc',darkred:'8b0000',darksalmon:'e9967a',darkseagreen:'8fbc8f',darkslateblue:'483d8b',darkslategray:'2f4f4f',darkturquoise:'00ced1',darkviolet:'9400d3',deeppink:'ff1493',deepskyblue:'00bfff',dimgray:'696969',dodgerblue:'1e90ff',feldspar:'d19275',firebrick:'b22222',floralwhite:'fffaf0',forestgreen:'228b22',fuchsia:'ff00ff',gainsboro:'dcdcdc',ghostwhite:'f8f8ff',gold:'ffd700',goldenrod:'daa520',gray:'808080',green:'008000',greenyellow:'adff2f',honeydew:'f0fff0',hotpink:'ff69b4',indianred:'cd5c5c',indigo:'4b0082',ivory:'fffff0',khaki:'f0e68c',lavender:'e6e6fa',lavenderblush:'fff0f5',lawngreen:'7cfc00',lemonchiffon:'fffacd',lightblue:'add8e6',lightcoral:'f08080',lightcyan:'e0ffff',lightgoldenrodyellow:'fafad2',lightgrey:'d3d3d3',lightgreen:'90ee90',lightpink:'ffb6c1',lightsalmon:'ffa07a',lightseagreen:'20b2aa',lightskyblue:'87cefa',lightslateblue:'8470ff',lightslategray:'778899',lightsteelblue:'b0c4de',lightyellow:'ffffe0',lime:'00ff00',limegreen:'32cd32',linen:'faf0e6',magenta:'ff00ff',maroon:'800000',mediumaquamarine:'66cdaa',mediumblue:'0000cd',mediumorchid:'ba55d3',mediumpurple:'9370d8',mediumseagreen:'3cb371',mediumslateblue:'7b68ee',mediumspringgreen:'00fa9a',mediumturquoise:'48d1cc',mediumvioletred:'c71585',midnightblue:'191970',mintcream:'f5fffa',mistyrose:'ffe4e1',moccasin:'ffe4b5',navajowhite:'ffdead',navy:'000080',oldlace:'fdf5e6',olive:'808000',olivedrab:'6b8e23',orange:'ffa500',orangered:'ff4500',orchid:'da70d6',palegoldenrod:'eee8aa',palegreen:'98fb98',paleturquoise:'afeeee',palevioletred:'d87093',papayawhip:'ffefd5',peachpuff:'ffdab9',peru:'cd853f',pink:'ffc0cb',plum:'dda0dd',powderblue:'b0e0e6',purple:'800080',red:'ff0000',rosybrown:'bc8f8f',royalblue:'4169e1',saddlebrown:'8b4513',salmon:'fa8072',sandybrown:'f4a460',seagreen:'2e8b57',seashell:'fff5ee',sienna:'a0522d',silver:'c0c0c0',skyblue:'87ceeb',slateblue:'6a5acd',slategray:'708090',snow:'fffafa',springgreen:'00ff7f',steelblue:'4682b4',tan:'d2b48c',teal:'008080',thistle:'d8bfd8',tomato:'ff6347',turquoise:'40e0d0',violet:'ee82ee',violetred:'d02090',wheat:'f5deb3',white:'ffffff',whitesmoke:'f5f5f5',yellow:'ffff00',yellowgreen:'9acd32'};for(var key in simple_colors){if(color_string==key){color_string=simple_colors[key];}}
var color_defs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:['rgb(123, 234, 45)','rgb(255,234,245)'],process:function(bits){return[parseInt(bits[1]),parseInt(bits[2]),parseInt(bits[3])];}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:['#00ff00','336699'],process:function(bits){return[parseInt(bits[1],16),parseInt(bits[2],16),parseInt(bits[3],16)];}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:['#fb0','f0f'],process:function(bits){return[parseInt(bits[1]+bits[1],16),parseInt(bits[2]+bits[2],16),parseInt(bits[3]+bits[3],16)];}}];for(var i=0;i<color_defs.length;i++){var re=color_defs[i].re;var processor=color_defs[i].process;var bits=re.exec(color_string);if(bits){channels=processor(bits);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true;}}
this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return'rgb('+this.r+', '+this.g+', '+this.b+')';}
this.toHex=function(){var r=this.r.toString(16);var g=this.g.toString(16);var b=this.b.toString(16);if(r.length==1)r='0'+r;if(g.length==1)g='0'+g;if(b.length==1)b='0'+b;return'#'+r+g+b;}
this.getHelpXML=function(){var examples=new Array();for(var i=0;i<color_defs.length;i++){var example=color_defs[i].example;for(var j=0;j<example.length;j++){examples[examples.length]=example[j];}}
for(var sc in simple_colors){examples[examples.length]=sc;}
var xml=document.createElement('ul');xml.setAttribute('id','rgbcolor-examples');for(var i=0;i<examples.length;i++){try{var list_item=document.createElement('li');var list_color=new RGBColor(examples[i]);var example_div=document.createElement('div');example_div.style.cssText='margin: 3px; '
+'border: 1px solid black; '
+'background:'+list_color.toHex()+'; '
+'color:'+list_color.toHex();example_div.appendChild(document.createTextNode('test'));var list_item_value=document.createTextNode(' '+examples[i]+' -> '+list_color.toRGB()+' -> '+list_color.toHex());list_item.appendChild(example_div);list_item.appendChild(list_item_value);xml.appendChild(list_item);}catch(e){}}
return xml;}}
function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}
var csrftoken=getCookie('csrftoken');function csrfSafeMethod(method){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));}
function sameOrigin(url){var host=document.location.host;var protocol=document.location.protocol;var sr_origin='//'+host;var origin=protocol+sr_origin;return(url==origin||url.slice(0,origin.length+1)==origin+'/')||(url==sr_origin||url.slice(0,sr_origin.length+1)==sr_origin+'/')||!(/^(\/\/|http:|https:).*/.test(url));}
$.ajaxSetup({beforeSend:function(xhr,settings){if(!csrfSafeMethod(settings.type)&&sameOrigin(settings.url)){xhr.setRequestHeader("X-CSRFToken",csrftoken);}}});$(document).ready(function(){stickyFooter();});$(window).on('resize',function(){stickyFooter();});function isTooLightYIQ(hexcolor){color=new RGBColor(hexcolor);var yiq=((color.r*299)+(color.g*587)+(color.b*114))/1000;return yiq>=128;}
function stickyFooter(){$('.slidingContent2').css('min-height',$(window).height()*.75);}
$("#goToTopOfPage").click(function(){$('html, body').animate({scrollTop:0},'slow');});$("#goToTopOfPageXS").click(function(){$('html, body').animate({scrollTop:0},'slow');});$(window).resize(function(){var mode=checkMode();if(mode=='xs'){$("#nonMobileMenContent").css("display","none");$("#mobileMenContent").css("display","");$("#nonMobileWomenContent").css("display","none");$("#mobileWomenContent").css("display","");}
else
{$("#nonMobileMenContent").css("display","");$("#mobileMenContent").css("display","none");$("#nonMobileWomenContent").css("display","");$("#mobileWomenContent").css("display","none");$('.navbarSliding').removeAttr('style');$('.slidingContent').removeAttr('style');}});$(window).load(function(){var mode=checkMode();if(mode=='xs'){$("#nonMobileMenContent").css("display","none");$("#mobileMenContent").css("display","");$("#nonMobileWomenContent").css("display","none");$("#mobileWomenContent").css("display","");}
else{$("#nonMobileMenContent").css("display","");$("#mobileMenContent").css("display","none");$("#nonMobileWomenContent").css("display","");$("#mobileWomenContent").css("display","none");}});$(window).scroll(function(){if($(window).scrollTop()>10){$('.navbar-header').css('top',$(window).scrollTop());}});$(document).ready(function(){var menu="close";$('.menu-toggle').click(function(){if(menu=="close"){$('.slidingContent').css('left','70%');$('.slidingContent').css('opacity','.05');$('.slidingContent').css('position','fixed');$('.slidingContent').css('pointer-events','none');$('.navbarSliding').css('width','70%');$('.navbarSliding').css('left','70%');menu="open";}
else{$('.slidingContent').css('left','0%');$('.slidingContent').css('opacity','1');$('.slidingContent').css('position','relative');$('.slidingContent').css('pointer-events','auto');$('.navbarSliding').css('width','0%');$('.navbarSliding').css('left','0%');menu="close";}});var self=$(this);var url="/load_cart";ajax_req=$.ajax({url:url,type:"GET",dataType:'json',success:function(data,textStatus,jqXHR){$.each(data,function(index,item)
{if(item.msg==''){item.image="{{ MEDIA_URL }}"+item.image;AddCartItem(item);cartCount()}
else{$('#messageId').html(item.msg);$('#messageModal').modal('show');}});},error:function(data,textStatus,jqXHR){}});cartCount();});$(document).on("submit",".loginForm",function(e){e.preventDefault();var self=$(this),url=self.attr("action"),ajax_req=$.ajax({url:url,type:"POST",data:{username:self.find("#id_username").val(),password:self.find("#id_password").val(),remember_me:self.find("#id_remember_me").val()},success:function(data,textStatus,jqXHR){if(location.pathname=="/notifications"){location.href="/";}else{location.reload();}},error:function(data,textStatus,jqXHR){clear_django_messages(self.find(".message_area"));clear_form_field_errors(".loginPopupForm");var errors=$.parseJSON(data.responseText);$.each(errors,function(index,value){if(index==="__all__"){django_message(value[0],"error",self.find(".message_area"));}else{apply_form_field_error(self[0].id,index,value);}});}});});$("a.dropdown-toggle.hidden-xs").click(function(){$("#id_username.textinput.textInput").val("");$("#id_password.textinput.textInput").val("");});$("#navLogin").click(function()
{$("#id_username.textinput.textInput").val("");$("#id_password.textinput.textInput").val("");});var cartTotal;var cartJson,cartState;cartState=sessionStorage.getItem("cartState");cartJson=JSON.parse(cartState||"{}");function cartCount()
{ajax_req=$.ajax({url:"/total_cart_items",type:"GET",success:function(data,textStatus,jqXHR){if(data.count>0){$('#cartCountId').text(data.count);$('#cartCountId').removeClass("hidden");$('#carttotal').removeClass("hidden");$('#divider').removeClass("hidden");$('#shoppingcartcheckout').removeClass("hidden");$('#noItem').addClass("hidden");$('#tagIconId').removeClass("tinvilleDrayGray");$('#tagIconId').addClass("tinvilleOrange");}
else{$('#cartCountId').addClass("hidden");$('#carttotal').addClass("hidden");$('#divider').addClass("hidden");$('#shoppingcartcheckout').addClass("hidden");$('#noItem').removeClass("hidden");$('#tagIconId').removeClass("tinvilleOrange");$('#tagIconId').addClass("tinvilleDrayGray");}},error:function(data,textStatus,jqXHR){}});}
$(function(){cartState=sessionStorage.getItem("cartState");cartJson=JSON.parse(cartState||"{}");aggregateTotal();var _IsOpen=cartJson["IsOpen"];});$("#mobileNavButton").click(function()
{navbarClicked();});function navbarClicked()
{cartState=sessionStorage.getItem("cartState");cartJson=JSON.parse(cartState||"{}");var IsOpen=false;cartJson["IsOpen"]=IsOpen;sessionStorage.setItem("cartState",JSON.stringify(cartJson));}
function cartToggleBtn()
{cartState=sessionStorage.getItem("cartState");cartJson=JSON.parse(cartState||"{}");var IsOpen=cartJson["IsOpen"];if(IsOpen===undefined||IsOpen===true)
IsOpen=false;else
IsOpen=true;cartJson["IsOpen"]=IsOpen;sessionStorage.setItem("cartState",JSON.stringify(cartJson));}
function LoadCartItemDiv(cartItem)
{var rowdiv=$('<div/>',{'class':'row'});var cartitemdiv=$('<li/>',{'class':'shoppingcartitem col-xs-12','id':"lineId"+cartItem.Id});var itemThumbnail=$('<img/>',{'src':cartItem.image,'class':'img-responsive shoppingcartthumbnail'});var thumbnailDiv=$('<div/>',{'class':'shoppingcartthumbnaildiv'});itemThumbnail.appendTo(thumbnailDiv);thumbnailDiv.appendTo(cartitemdiv);var itemInfoDiv=$('<div/>',{'class':'shoppingcartiteminfo'});var itemTitle=$('<div/>',{'class':'shoppingcartitemTitle ','text':cartItem.title});itemTitle.appendTo(itemInfoDiv);var itemDescription=$('<div/>',{'class':'shoppingcartitemDescription','text':"Color: "+cartItem.color});itemDescription.appendTo(itemInfoDiv);var itemSize=$('<div/>',{'class':'shoppingcartitemDescription','text':"Size: "+cartItem.size});itemSize.appendTo(itemInfoDiv);var itemQty=$('<div/>',{'class':'shoppingcartitemQty','text':"Qty:"+cartItem.qty});itemQty.appendTo(itemInfoDiv);itemInfoDiv.appendTo(cartitemdiv);var removeBtnDiv=$('<div/>',{'class':'shoppingcartremovebtn'});var delBtnId='deleteBtnId_'+cartItem.Id;var removeBtn=$('<a/>',{'onclick':'RemoveCartItem('+cartItem.Id+')','id':delBtnId,'class':'shoppingcartBtn','html':'<img src="{{ STATIC_URL }}img/delete.png" width="20" height="20">'});removeBtn.appendTo(removeBtnDiv);removeBtnDiv.appendTo(cartitemdiv);var price='$'+(cartItem.qty*cartItem.price);var priceDiv=$('<div/>',{'class':'shoppingcartitemPrice','text':price});priceDiv.appendTo(cartitemdiv);cartitemdiv.appendTo(rowdiv);rowdiv.appendTo("#shoppingcartitems");$(".shoppingcartitemTitle").text(function(index,currentText){return currentText.substr(0,15);});}
function aggregateTotal()
{var url="/cart_total";ajax_req=$.ajax({url:url,type:"GET",success:function(data,textStatus,jqXHR){$('#carttotal').text('Total: $'+data.total);},error:function(data,textStatus,jqXHR){}});}
function AddCartItem(cartItem)
{if($("#lineId"+cartItem.Id).length===0){LoadCartItemDiv(cartItem);aggregateTotal();}}
function RemoveCartItem(itemId)
{var self=$(this);var url="/delete_item_to_cart";var ajax_req=$.ajax({url:url,type:"POST",data:{Id:itemId},success:function(data,textStatus,jqXHR){},error:function(data,textStatus,jqXHR){}});$('#lineId'+itemId).remove();aggregateTotal();cartCount();}
$("#shoppingcartitems").slimScroll({});window.ParsleyValidator.addValidator('cardnum',function(value){return Stripe.card.validateCardNumber(value);},32).addMessage('en','cardnum','Invalid card number');window.ParsleyValidator.addValidator('cardexpiry',function(value){var month=$("[data-stripe='exp-month']")[0].value;var year=$("[data-stripe='exp-year']")[0].value;return Stripe.card.validateExpiry(month,year);},33).addMessage('en','cardexpiry','Invalid card expiration date');window.ParsleyValidator.addValidator('cardcvc',function(value){return Stripe.card.validateCVC(value);},34).addMessage('en','cardcvc','Invalid card verification code');$("[data-parsley-group='cardexpiry']").keyup(function(){$("[data-parsley-group='cardexpiry']").each(function(){$(this).parsley().validate();})});$(".parsley-form").parsley({successClass:'has-success',errorClass:'has-error',classHandler:function(el){return el.$element.closest(".form-group");},errorsWrapper:"<span class=\'help-block\'></span>",errorTemplate:"<span></span>"});$('.pull-down').each(function(){$(this).css('margin-top',$(this).parent().height()-$(this).height())});$('a[data-toggle="tab"]').on('shown.bs.tab',function(e){stickyFooter();});(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else if(typeof exports==="object"){factory(require("jquery"));}else{factory(jQuery);}})(function($){"use strict";var $window=$(window),$document=$(document),location=window.location,TRUE=true,FALSE=false,NULL=null,NAN=NaN,INFINITY=Infinity,STRING_UNDEFINED="undefined",STRING_DIRECTIVE="directive",CROPPER_NAMESPACE=".cropper",REGEXP_DIRECTIVES=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,REGEXP_OPTIONS=/^(x|y|width|height)$/,REGEXP_PROPERTIES=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio|rotate)$/,CLASS_MODAL="cropper-modal",CLASS_HIDDEN="cropper-hidden",CLASS_INVISIBLE="cropper-invisible",CLASS_MOVE="cropper-move",CLASS_CROP="cropper-crop",CLASS_DISABLED="cropper-disabled",EVENT_MOUSE_DOWN="mousedown touchstart",EVENT_MOUSE_MOVE="mousemove touchmove",EVENT_MOUSE_UP="mouseup mouseleave touchend touchleave touchcancel",EVENT_WHEEL="wheel mousewheel DOMMouseScroll",EVENT_RESIZE="resize"+CROPPER_NAMESPACE,EVENT_DBLCLICK="dblclick",EVENT_BUILD="build"+CROPPER_NAMESPACE,EVENT_BUILT="built"+CROPPER_NAMESPACE,EVENT_DRAG_START="dragstart"+CROPPER_NAMESPACE,EVENT_DRAG_MOVE="dragmove"+CROPPER_NAMESPACE,EVENT_DRAG_END="dragend"+CROPPER_NAMESPACE,isNumber=function(n){return typeof n==="number";},toArray=function(obj,offset){var args=[];if(typeof offset==="number"){args.push(offset);}
return args.slice.apply(obj,args);},proxy=function(fn,context){var args=toArray(arguments,2);return function(){return fn.apply(context,args.concat(toArray(arguments)));};},addTimestamp=function(url){var timestamp="timestamp="+(new Date()).getTime();return(url+(url.indexOf("?")===-1?"?":"&")+timestamp);},Cropper=function(element,options){this.element=element;this.$element=$(element);this.defaults=$.extend({},Cropper.DEFAULTS,$.isPlainObject(options)?options:{});this.$original=NULL;this.ready=FALSE;this.built=FALSE;this.cropped=FALSE;this.rotated=FALSE;this.disabled=FALSE;this.replaced=FALSE;this.init();},sqrt=Math.sqrt,min=Math.min,max=Math.max,abs=Math.abs,sin=Math.sin,cos=Math.cos,num=parseFloat;Cropper.prototype={constructor:Cropper,support:{canvas:$.isFunction($("<canvas>")[0].getContext)},init:function(){var defaults=this.defaults;$.each(defaults,function(i,n){switch(i){case"aspectRatio":defaults[i]=abs(num(n))||NAN;break;case"autoCropArea":defaults[i]=abs(num(n))||0.8;break;case"minWidth":case"minHeight":defaults[i]=abs(num(n))||0;break;case"maxWidth":case"maxHeight":defaults[i]=abs(num(n))||INFINITY;break;}});this.image={rotate:0};this.load();},load:function(){var _this=this,$this=this.$element,element=this.element,image=this.image,crossOrigin="",$clone,url;if($this.is("img")){url=$this.prop("src");}else if($this.is("canvas")&&this.support.canvas){url=element.toDataURL();}
if(!url){return;}
if(this.replaced){image.rotate=0;}
if(this.defaults.checkImageOrigin){if($this.prop("crossOrigin")||this.isCrossOriginURL(url)){crossOrigin=" crossOrigin";url=addTimestamp(url);}}
this.$clone=($clone=$("<img"+crossOrigin+' src="'+url+'">'));$clone.one("load",function(){image.naturalWidth=this.naturalWidth||$clone.width();image.naturalHeight=this.naturalHeight||$clone.height();image.aspectRatio=image.naturalWidth/image.naturalHeight;_this.url=url;_this.ready=TRUE;_this.build();});$clone.addClass(CLASS_INVISIBLE).prependTo("body");},isCrossOriginURL:function(url){var parts=url.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);if((parts&&(parts[1]!==location.protocol||parts[2]!==location.hostname||parts[3]!==location.port))){return TRUE;}
return FALSE;},build:function(){var $this=this.$element,defaults=this.defaults,buildEvent,$cropper;if(!this.ready){return;}
if(this.built){this.unbuild();}
$this.one(EVENT_BUILD,defaults.build);buildEvent=$.Event(EVENT_BUILD);$this.trigger(buildEvent);if(buildEvent.isDefaultPrevented()){return;}
this.$cropper=($cropper=$(Cropper.TEMPLATE));$this.addClass(CLASS_HIDDEN);this.$clone.removeClass(CLASS_INVISIBLE).prependTo($cropper);if(!this.rotated){this.$original=this.$clone.clone();this.$original.addClass(CLASS_HIDDEN).prependTo(this.$cropper);this.originalImage=$.extend({},this.image);}
this.$container=$this.parent();this.$container.append($cropper);this.$canvas=$cropper.find(".cropper-canvas");this.$dragger=$cropper.find(".cropper-dragger");this.$viewer=$cropper.find(".cropper-viewer");defaults.autoCrop?(this.cropped=TRUE):this.$dragger.addClass(CLASS_HIDDEN);defaults.modal&&this.$canvas.addClass(CLASS_MODAL);!defaults.dashed&&this.$dragger.find(".cropper-dashed").addClass(CLASS_HIDDEN);!defaults.movable&&this.$dragger.find(".cropper-face").data(STRING_DIRECTIVE,"move");!defaults.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(CLASS_HIDDEN);this.addListeners();this.initPreview();this.built=TRUE;defaults.dragCrop&&this.setDragMode("crop");this.update();this.replaced=FALSE;$this.one(EVENT_BUILT,defaults.built);$this.trigger(EVENT_BUILT);},unbuild:function(){if(!this.built){return;}
this.built=FALSE;this.removeListeners();this.$preview.empty();this.$preview=NULL;this.$dragger=NULL;this.$canvas=NULL;this.$container=NULL;this.$cropper.remove();this.$cropper=NULL;},update:function(data){this.initContainer();this.initCropper();this.initImage();this.initDragger();if(data){this.setData(data,TRUE);this.setDragMode("crop");}else{this.setData(this.defaults.data);}},resize:function(){clearTimeout(this.resizing);this.resizing=setTimeout($.proxy(this.update,this,this.getData()),200);},preview:function(){var image=this.image,dragger=this.dragger,width=image.width,height=image.height,left=dragger.left-image.left,top=dragger.top-image.top;this.$viewer.find("img").css({width:width,height:height,marginLeft:-left,marginTop:-top});this.$preview.each(function(){var $this=$(this),ratio=$this.width()/dragger.width;$this.find("img").css({width:width*ratio,height:height*ratio,marginLeft:-left*ratio,marginTop:-top*ratio});});},addListeners:function(){var defaults=this.defaults;this.$element.on(EVENT_DRAG_START,defaults.dragstart).on(EVENT_DRAG_MOVE,defaults.dragmove).on(EVENT_DRAG_END,defaults.dragend);this.$cropper.on(EVENT_MOUSE_DOWN,$.proxy(this.dragstart,this)).on(EVENT_DBLCLICK,$.proxy(this.dblclick,this));if(defaults.zoomable){this.$cropper.on(EVENT_WHEEL,$.proxy(this.wheel,this));}
if(defaults.multiple){this.$cropper.on(EVENT_MOUSE_MOVE,$.proxy(this.dragmove,this)).on(EVENT_MOUSE_UP,$.proxy(this.dragend,this));}else{$document.on(EVENT_MOUSE_MOVE,(this._dragmove=proxy(this.dragmove,this))).on(EVENT_MOUSE_UP,(this._dragend=proxy(this.dragend,this)));}
$window.on(EVENT_RESIZE,(this._resize=proxy(this.resize,this)));},removeListeners:function(){var defaults=this.defaults;this.$element.off(EVENT_DRAG_START,defaults.dragstart).off(EVENT_DRAG_MOVE,defaults.dragmove).off(EVENT_DRAG_END,defaults.dragend);this.$cropper.off(EVENT_MOUSE_DOWN,this.dragstart).off(EVENT_DBLCLICK,this.dblclick);if(defaults.zoomable){this.$cropper.off(EVENT_WHEEL,this.wheel);}
if(defaults.multiple){this.$cropper.off(EVENT_MOUSE_MOVE,this.dragmove).off(EVENT_MOUSE_UP,this.dragend);}else{$document.off(EVENT_MOUSE_MOVE,this._dragmove).off(EVENT_MOUSE_UP,this._dragend);}
$window.off(EVENT_RESIZE,this._resize);},initPreview:function(){var img='<img src="'+this.url+'">';this.$preview=$(this.defaults.preview);this.$viewer.html(img);this.$preview.html(img).find("img").css("cssText","min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;");},initContainer:function(){var $container=this.$container;this.container={width:max($container.width(),300),height:max($container.height(),150)};},initCropper:function(){var container=this.container,image=this.image,cropper;if(((image.naturalWidth*container.height/image.naturalHeight)-container.width)>=0){cropper={width:container.width,height:container.width/image.aspectRatio,left:0};cropper.top=(container.height-cropper.height)/2;}else{cropper={width:container.height*image.aspectRatio,height:container.height,top:0};cropper.left=(container.width-cropper.width)/2;}
this.$cropper.css({width:cropper.width,height:cropper.height,left:cropper.left,top:cropper.top});this.cropper=cropper;},initImage:function(){var image=this.image,cropper=this.cropper,defaultImage={_width:cropper.width,_height:cropper.height,width:cropper.width,height:cropper.height,left:0,top:0,ratio:cropper.width/image.naturalWidth};this.defaultImage=$.extend({},image,defaultImage);if(image._width!==cropper.width||image._height!==cropper.height){$.extend(image,defaultImage);}else{image=$.extend({},defaultImage,image);if(this.replaced){image.ratio=defaultImage.ratio;}}
this.image=image;this.renderImage();},renderImage:function(mode){var image=this.image;if(mode==="zoom"){image.left-=(image.width-image.oldWidth)/2;image.top-=(image.height-image.oldHeight)/2;}
image.left=min(max(image.left,image._width-image.width),0);image.top=min(max(image.top,image._height-image.height),0);this.$clone.css({width:image.width,height:image.height,marginLeft:image.left,marginTop:image.top});if(mode){this.defaults.done(this.getData());this.preview();}},initDragger:function(){var defaults=this.defaults,cropper=this.cropper,aspectRatio=defaults.aspectRatio||this.image.aspectRatio,ratio=this.image.ratio,autoCropDragger,dragger;if(((cropper.height*aspectRatio)-cropper.width)>=0){dragger={height:cropper.width/aspectRatio,width:cropper.width,left:0,top:(cropper.height-(cropper.width/aspectRatio))/2,maxWidth:cropper.width,maxHeight:cropper.width/aspectRatio};}else{dragger={height:cropper.height,width:cropper.height*aspectRatio,left:(cropper.width-(cropper.height*aspectRatio))/2,top:0,maxWidth:cropper.height*aspectRatio,maxHeight:cropper.height};}
dragger.minWidth=0;dragger.minHeight=0;if(defaults.aspectRatio){if(isFinite(defaults.maxWidth)){dragger.maxWidth=min(dragger.maxWidth,defaults.maxWidth*ratio);dragger.maxHeight=dragger.maxWidth/aspectRatio;}else if(isFinite(defaults.maxHeight)){dragger.maxHeight=min(dragger.maxHeight,defaults.maxHeight*ratio);dragger.maxWidth=dragger.maxHeight*aspectRatio;}
if(defaults.minWidth>0){dragger.minWidth=max(0,defaults.minWidth*ratio);dragger.minHeight=dragger.minWidth/aspectRatio;}else if(defaults.minHeight>0){dragger.minHeight=max(0,defaults.minHeight*ratio);dragger.minWidth=dragger.minHeight*aspectRatio;}}else{dragger.maxWidth=min(dragger.maxWidth,defaults.maxWidth*ratio);dragger.maxHeight=min(dragger.maxHeight,defaults.maxHeight*ratio);dragger.minWidth=max(0,defaults.minWidth*ratio);dragger.minHeight=max(0,defaults.minHeight*ratio);}
dragger.minWidth=min(dragger.maxWidth,dragger.minWidth);dragger.minHeight=min(dragger.maxHeight,dragger.minHeight);autoCropDragger=$.extend({},dragger);autoCropDragger.height=dragger.height*defaults.autoCropArea;autoCropDragger.width=dragger.width*defaults.autoCropArea;autoCropDragger.left=(cropper.width-autoCropDragger.width)/2;autoCropDragger.top=(cropper.height-autoCropDragger.height)/2;autoCropDragger.oldLeft=dragger.oldLeft=dragger.left;autoCropDragger.oldTop=dragger.oldTop=dragger.top;this.autoCropDragger=autoCropDragger;this.defaultDragger=$.extend({},dragger);this.dragger=dragger;},renderDragger:function(){var dragger=this.dragger,cropper=this.cropper;if(dragger.width>dragger.maxWidth){dragger.width=dragger.maxWidth;dragger.left=dragger.oldLeft;}else if(dragger.width<dragger.minWidth){dragger.width=dragger.minWidth;dragger.left=dragger.oldLeft;}
if(dragger.height>dragger.maxHeight){dragger.height=dragger.maxHeight;dragger.top=dragger.oldTop;}else if(dragger.height<dragger.minHeight){dragger.height=dragger.minHeight;dragger.top=dragger.oldTop;}
dragger.left=min(max(dragger.left,0),cropper.width-dragger.width);dragger.top=min(max(dragger.top,0),cropper.height-dragger.height);dragger.oldLeft=dragger.left;dragger.oldTop=dragger.top;this.dragger=dragger;if(!this.disabled){this.defaults.done(this.getData());}
this.$dragger.css({width:dragger.width,height:dragger.height,left:dragger.left,top:dragger.top});this.preview();},reset:function(deep){if(!this.cropped){return;}
if(deep){this.defaults.data={};}
this.image=$.extend({},this.defaultImage);this.renderImage();this.dragger=$.extend({},this.defaultDragger);this.setData(this.defaults.data);},clear:function(){if(!this.cropped){return;}
this.cropped=FALSE;this.setData({x:0,y:0,width:0,height:0});this.$canvas.removeClass(CLASS_MODAL);this.$dragger.addClass(CLASS_HIDDEN);},destroy:function(){var $this=this.$element;if(!this.ready){return;}
this.unbuild();$this.removeClass(CLASS_HIDDEN).removeData("cropper");if(this.rotated){$this.attr("src",this.$original.attr("src"));}},replace:function(url,rotated){var _this=this,$this=this.$element,element=this.element,context;if(url&&url!==this.url&&url!==$this.attr("src")){if(!rotated){this.rotated=FALSE;this.replaced=TRUE;}
if($this.is("img")){$this.attr("src",url);this.load();}else if($this.is("canvas")&&this.support.canvas){context=element.getContext("2d");$('<img src="'+url+'">').one("load",function(){element.width=this.width;element.height=this.height;context.clearRect(0,0,element.width,element.height);context.drawImage(this,0,0);_this.load();});}}},setData:function(data,once){var cropper=this.cropper,dragger=this.dragger,image=this.image,aspectRatio=this.defaults.aspectRatio;if(!this.built||typeof data===STRING_UNDEFINED){return;}
if(data===NULL||$.isEmptyObject(data)){dragger=$.extend({},this.autoCropDragger);}
if($.isPlainObject(data)&&!$.isEmptyObject(data)){if(!once){this.defaults.data=data;}
data=this.transformData(data);if(isNumber(data.x)&&data.x<=cropper.width-image.left){dragger.left=data.x+image.left;}
if(isNumber(data.y)&&data.y<=cropper.height-image.top){dragger.top=data.y+image.top;}
if(aspectRatio){if(isNumber(data.width)&&data.width<=dragger.maxWidth&&data.width>=dragger.minWidth){dragger.width=data.width;dragger.height=dragger.width/aspectRatio;}else if(isNumber(data.height)&&data.height<=dragger.maxHeight&&data.height>=dragger.minHeight){dragger.height=data.height;dragger.width=dragger.height*aspectRatio;}}else{if(isNumber(data.width)&&data.width<=dragger.maxWidth&&data.width>=dragger.minWidth){dragger.width=data.width;}
if(isNumber(data.height)&&data.height<=dragger.maxHeight&&data.height>=dragger.minHeight){dragger.height=data.height;}}}
this.dragger=dragger;this.renderDragger();},getData:function(rounded){var dragger=this.dragger,image=this.image,data={};if(this.built){data={x:dragger.left-image.left,y:dragger.top-image.top,width:dragger.width,height:dragger.height};data=this.transformData(data,TRUE,rounded);}
return data;},transformData:function(data,reversed,rounded){var ratio=this.image.ratio,result={};$.each(data,function(i,n){n=num(n);if(REGEXP_OPTIONS.test(i)&&!isNaN(n)){result[i]=reversed?(rounded?Math.round(n/ratio):n/ratio):n*ratio;}});return result;},setAspectRatio:function(aspectRatio){var freeRatio=aspectRatio==="auto";aspectRatio=num(aspectRatio);if(freeRatio||(!isNaN(aspectRatio)&&aspectRatio>0)){this.defaults.aspectRatio=freeRatio?NAN:aspectRatio;if(this.built){this.initDragger();this.renderDragger();}}},getImageData:function(){var data={};if(this.ready){$.each(this.image,function(name,value){if(REGEXP_PROPERTIES.test(name)){data[name]=value;}});}
return data;},getDataURL:function(options,type,quality){var canvas=$("<canvas>")[0],data=this.getData(),dataURL="",context;if(!$.isPlainObject(options)){quality=type;type=options;options={};}
options=$.extend({width:data.width,height:data.height},options);if(this.cropped&&this.support.canvas){canvas.width=options.width;canvas.height=options.height;context=canvas.getContext("2d");if(type==="image/jpeg"){context.fillStyle="#fff";context.fillRect(0,0,options.width,options.height);}
context.drawImage(this.$clone[0],data.x,data.y,data.width,data.height,0,0,options.width,options.height);dataURL=canvas.toDataURL(type,quality);}
return dataURL;},setDragMode:function(mode){var $canvas=this.$canvas,defaults=this.defaults,cropable=FALSE,movable=FALSE;if(!this.built||this.disabled){return;}
switch(mode){case"crop":if(defaults.dragCrop){cropable=TRUE;$canvas.data(STRING_DIRECTIVE,mode);}
break;case"move":movable=TRUE;$canvas.data(STRING_DIRECTIVE,mode);break;default:$canvas.removeData(STRING_DIRECTIVE);}
$canvas.toggleClass(CLASS_CROP,cropable).toggleClass(CLASS_MOVE,movable);},enable:function(){if(this.built){this.disabled=FALSE;this.$cropper.removeClass(CLASS_DISABLED);}},disable:function(){if(this.built){this.disabled=TRUE;this.$cropper.addClass(CLASS_DISABLED);}},rotate:function(degree){var image=this.image;degree=num(degree)||0;if(!this.built||degree===0||this.disabled||!this.defaults.rotatable||!this.support.canvas){return;}
this.rotated=TRUE;degree=(image.rotate=(image.rotate+degree)%360);this.replace(this.getRotatedDataURL(degree),true);},getRotatedDataURL:function(degree){var canvas=$("<canvas>")[0],context=canvas.getContext("2d"),arc=degree*Math.PI/180,deg=abs(degree)%180,acuteAngle=deg>90?(180-deg):deg,acuteAngleArc=acuteAngle*Math.PI/180,originalImage=this.originalImage,naturalWidth=originalImage.naturalWidth,naturalHeight=originalImage.naturalHeight,width=abs(naturalWidth*cos(acuteAngleArc)+naturalHeight*sin(acuteAngleArc)),height=abs(naturalWidth*sin(acuteAngleArc)+naturalHeight*cos(acuteAngleArc));canvas.width=width;canvas.height=height;context.save();context.translate(width/2,height/2);context.rotate(arc);context.drawImage(this.$original[0],-naturalWidth/2,-naturalHeight/2,naturalWidth,naturalHeight);context.restore();return canvas.toDataURL();},zoom:function(delta){var image=this.image,width,height,range;delta=num(delta);if(!this.built||!delta||this.disabled||!this.defaults.zoomable){return;}
width=image.width*(1+delta);height=image.height*(1+delta);range=width/image._width;if(range>10){return;}
if(range<1){width=image._width;height=image._height;}
if(range<=1){this.setDragMode("crop");}else{this.setDragMode("move");}
image.oldWidth=image.width;image.oldHeight=image.height;image.width=width;image.height=height;image.ratio=image.width/image.naturalWidth;this.renderImage("zoom");},dblclick:function(){if(this.disabled){return;}
if(this.$canvas.hasClass(CLASS_CROP)){this.setDragMode("move");}else{this.setDragMode("crop");}},wheel:function(event){var e=event.originalEvent,msDeltaY=117.25,mozDelatY=5,webkitDelatY=166.66665649414062,zoomDelta=0.1,delta;if(this.disabled){return;}
event.preventDefault();if(e.deltaY){delta=e.deltaY;delta=delta%mozDelatY===0?delta/mozDelatY:delta%msDeltaY===0?delta/msDeltaY:delta/webkitDelatY;}else{delta=e.wheelDelta?-e.wheelDelta/120:(e.detail?e.detail/3:0);}
this.zoom(delta*zoomDelta);},dragstart:function(event){var touches=event.originalEvent.touches,e=event,directive,dragStartEvent,touchesLength;if(this.disabled){return;}
if(touches){touchesLength=touches.length;if(touchesLength>1){if(this.defaults.zoomable&&touchesLength===2){e=touches[1];this.startX2=e.pageX;this.startY2=e.pageY;directive="zoom";}else{return;}}
e=touches[0];}
directive=directive||$(e.target).data(STRING_DIRECTIVE);if(REGEXP_DIRECTIVES.test(directive)){event.preventDefault();dragStartEvent=$.Event(EVENT_DRAG_START);this.$element.trigger(dragStartEvent);if(dragStartEvent.isDefaultPrevented()){return;}
this.directive=directive;this.cropping=FALSE;this.startX=e.pageX;this.startY=e.pageY;if(directive==="crop"){this.cropping=TRUE;this.$canvas.addClass(CLASS_MODAL);}}},dragmove:function(event){var touches=event.originalEvent.touches,e=event,dragMoveEvent,touchesLength;if(this.disabled){return;}
if(touches){touchesLength=touches.length;if(touchesLength>1){if(this.defaults.zoomable&&touchesLength===2){e=touches[1];this.endX2=e.pageX;this.endY2=e.pageY;}else{return;}}
e=touches[0];}
if(this.directive){event.preventDefault();dragMoveEvent=$.Event(EVENT_DRAG_MOVE);this.$element.trigger(dragMoveEvent);if(dragMoveEvent.isDefaultPrevented()){return;}
this.endX=e.pageX;this.endY=e.pageY;this.dragging();}},dragend:function(event){var dragEndEvent;if(this.disabled){return;}
if(this.directive){event.preventDefault();dragEndEvent=$.Event(EVENT_DRAG_END);this.$element.trigger(dragEndEvent);if(dragEndEvent.isDefaultPrevented()){return;}
if(this.cropping){this.cropping=FALSE;this.$canvas.toggleClass(CLASS_MODAL,this.cropped&&this.defaults.modal);}
this.directive="";}},dragging:function(){var directive=this.directive,image=this.image,cropper=this.cropper,maxWidth=cropper.width,maxHeight=cropper.height,dragger=this.dragger,width=dragger.width,height=dragger.height,left=dragger.left,top=dragger.top,right=left+width,bottom=top+height,renderable=TRUE,defaults=this.defaults,aspectRatio=defaults.aspectRatio,range={x:this.endX-this.startX,y:this.endY-this.startY},offset;if(aspectRatio){range.X=range.y*aspectRatio;range.Y=range.x/aspectRatio;}
switch(directive){case"all":left+=range.x;top+=range.y;break;case"e":if(range.x>=0&&(right>=maxWidth||aspectRatio&&(top<=0||bottom>=maxHeight))){renderable=FALSE;break;}
width+=range.x;if(aspectRatio){height=width/aspectRatio;top-=range.Y/2;}
if(width<0){directive="w";width=0;}
break;case"n":if(range.y<=0&&(top<=0||aspectRatio&&(left<=0||right>=maxWidth))){renderable=FALSE;break;}
height-=range.y;top+=range.y;if(aspectRatio){width=height*aspectRatio;left+=range.X/2;}
if(height<0){directive="s";height=0;}
break;case"w":if(range.x<=0&&(left<=0||aspectRatio&&(top<=0||bottom>=maxHeight))){renderable=FALSE;break;}
width-=range.x;left+=range.x;if(aspectRatio){height=width/aspectRatio;top+=range.Y/2;}
if(width<0){directive="e";width=0;}
break;case"s":if(range.y>=0&&(bottom>=maxHeight||aspectRatio&&(left<=0||right>=maxWidth))){renderable=FALSE;break;}
height+=range.y;if(aspectRatio){width=height*aspectRatio;left-=range.X/2;}
if(height<0){directive="n";height=0;}
break;case"ne":if(aspectRatio){if(range.y<=0&&(top<=0||right>=maxWidth)){renderable=FALSE;break;}
height-=range.y;top+=range.y;width=height*aspectRatio;}else{if(range.x>=0){if(right<maxWidth){width+=range.x;}else if(range.y<=0&&top<=0){renderable=FALSE;}}else{width+=range.x;}
if(range.y<=0){if(top>0){height-=range.y;top+=range.y;}}else{height-=range.y;top+=range.y;}}
if(height<0){directive="sw";height=0;width=0;}
break;case"nw":if(aspectRatio){if(range.y<=0&&(top<=0||left<=0)){renderable=FALSE;break;}
height-=range.y;top+=range.y;width=height*aspectRatio;left+=range.X;}else{if(range.x<=0){if(left>0){width-=range.x;left+=range.x;}else if(range.y<=0&&top<=0){renderable=FALSE;}}else{width-=range.x;left+=range.x;}
if(range.y<=0){if(top>0){height-=range.y;top+=range.y;}}else{height-=range.y;top+=range.y;}}
if(height<0){directive="se";height=0;width=0;}
break;case"sw":if(aspectRatio){if(range.x<=0&&(left<=0||bottom>=maxHeight)){renderable=FALSE;break;}
width-=range.x;left+=range.x;height=width/aspectRatio;}else{if(range.x<=0){if(left>0){width-=range.x;left+=range.x;}else if(range.y>=0&&bottom>=maxHeight){renderable=FALSE;}}else{width-=range.x;left+=range.x;}
if(range.y>=0){if(bottom<maxHeight){height+=range.y;}}else{height+=range.y;}}
if(width<0){directive="ne";height=0;width=0;}
break;case"se":if(aspectRatio){if(range.x>=0&&(right>=maxWidth||bottom>=maxHeight)){renderable=FALSE;break;}
width+=range.x;height=width/aspectRatio;}else{if(range.x>=0){if(right<maxWidth){width+=range.x;}else if(range.y>=0&&bottom>=maxHeight){renderable=FALSE;}}else{width+=range.x;}
if(range.y>=0){if(bottom<maxHeight){height+=range.y;}}else{height+=range.y;}}
if(width<0){directive="nw";height=0;width=0;}
break;case"move":image.left+=range.x;image.top+=range.y;this.renderImage("move");renderable=FALSE;break;case"zoom":if(defaults.zoomable){this.zoom(function(x,y,x1,y1,x2,y2){return(sqrt(x2*x2+y2*y2)-sqrt(x1*x1+y1*y1))/sqrt(x*x+y*y);}(image.width,image.height,abs(this.startX-this.startX2),abs(this.startY-this.startY2),abs(this.endX-this.endX2),abs(this.endY-this.endY2)));this.endX2=this.startX2;this.endY2=this.startY2;}
break;case"crop":if(range.x&&range.y){offset=this.$cropper.offset();left=this.startX-offset.left;top=this.startY-offset.top;width=dragger.minWidth;height=dragger.minHeight;if(range.x>0){if(range.y>0){directive="se";}else{directive="ne";top-=height;}}else{if(range.y>0){directive="sw";left-=width;}else{directive="nw";left-=width;top-=height;}}
if(!this.cropped){this.cropped=TRUE;this.$dragger.removeClass(CLASS_HIDDEN);}}
break;}
if(renderable){dragger.width=width;dragger.height=height;dragger.left=left;dragger.top=top;this.directive=directive;this.renderDragger();}
this.startX=this.endX;this.startY=this.endY;}};Cropper.TEMPLATE=(function(source,words){words=words.split(",");return source.replace(/\d+/g,function(i){return words[i];});})('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-dragger"><1 6="5-viewer"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,directive,data,point,cropper,class,line,dashed");Cropper.DEFAULTS={aspectRatio:"auto",autoCropArea:0.8,data:{},done:$.noop,preview:"",multiple:FALSE,autoCrop:TRUE,dragCrop:TRUE,dashed:TRUE,modal:TRUE,movable:TRUE,resizable:TRUE,zoomable:TRUE,rotatable:TRUE,checkImageOrigin:TRUE,minWidth:0,minHeight:0,maxWidth:INFINITY,maxHeight:INFINITY,build:NULL,built:NULL,dragstart:NULL,dragmove:NULL,dragend:NULL};Cropper.setDefaults=function(options){$.extend(Cropper.DEFAULTS,options);};Cropper.other=$.fn.cropper;$.fn.cropper=function(options){var args=toArray(arguments,1),result;this.each(function(){var $this=$(this),data=$this.data("cropper"),fn;if(!data){$this.data("cropper",(data=new Cropper(this,options)));}
if(typeof options==="string"&&$.isFunction((fn=data[options]))){result=fn.apply(data,args);}});return(typeof result!==STRING_UNDEFINED?result:this);};$.fn.cropper.Constructor=Cropper;$.fn.cropper.setDefaults=Cropper.setDefaults;$.fn.cropper.noConflict=function(){$.fn.cropper=Cropper.other;return this;};});jQuery.fn.farbtastic=function(callback){$.farbtastic(this,callback);return this;};jQuery.farbtastic=function(container,callback){var container=$(container).get(0);return container.farbtastic||(container.farbtastic=new jQuery._farbtastic(container,callback));}
jQuery._farbtastic=function(container,callback){var fb=this;$(container).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var e=$('.farbtastic',container);fb.wheel=$('.wheel',container).get(0);fb.radius=84;fb.square=100;fb.width=194;if(navigator.appVersion.match(/MSIE [0-6]\./)){$('*',e).each(function(){if(this.currentStyle.backgroundImage!='none'){var image=this.currentStyle.backgroundImage;image=this.currentStyle.backgroundImage.substring(5,image.length-2);$(this).css({'backgroundImage':'none','filter':"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+image+"')"});}});}
fb.linkTo=function(callback){if(typeof fb.callback=='object'){$(fb.callback).unbind('keyup',fb.updateValue);}
fb.color=null;if(typeof callback=='function'){fb.callback=callback;}
else if(typeof callback=='object'||typeof callback=='string'){fb.callback=$(callback);fb.callback.bind('keyup',fb.updateValue);if(fb.callback.get(0).value){fb.setColor(fb.callback.get(0).value);}}
return this;}
fb.updateValue=function(event){if(this.value&&this.value!=fb.color){fb.setColor(this.value);}}
fb.setColor=function(color){var unpack=fb.unpack(color);if(fb.color!=color&&unpack){fb.color=color;fb.rgb=unpack;fb.hsl=fb.RGBToHSL(fb.rgb);fb.updateDisplay();}
return this;}
fb.setHSL=function(hsl){fb.hsl=hsl;fb.rgb=fb.HSLToRGB(hsl);fb.color=fb.pack(fb.rgb);fb.updateDisplay();return this;}
fb.widgetCoords=function(event){var x,y;var el=event.target||event.srcElement;var reference=fb.wheel;if(typeof event.offsetX!='undefined'){var pos={x:event.offsetX,y:event.offsetY};var e=el;while(e){e.mouseX=pos.x;e.mouseY=pos.y;pos.x+=e.offsetLeft;pos.y+=e.offsetTop;e=e.offsetParent;}
var e=reference;var offset={x:0,y:0}
while(e){if(typeof e.mouseX!='undefined'){x=e.mouseX-offset.x;y=e.mouseY-offset.y;break;}
offset.x+=e.offsetLeft;offset.y+=e.offsetTop;e=e.offsetParent;}
e=el;while(e){e.mouseX=undefined;e.mouseY=undefined;e=e.offsetParent;}}
else{var pos=fb.absolutePosition(reference);x=(event.pageX||0*(event.clientX+$('html').get(0).scrollLeft))-pos.x;y=(event.pageY||0*(event.clientY+$('html').get(0).scrollTop))-pos.y;}
return{x:x-fb.width/2,y:y-fb.width/2};}
fb.mousedown=function(event){if(!document.dragging){$(document).bind('mousemove',fb.mousemove).bind('mouseup',fb.mouseup);document.dragging=true;}
var pos=fb.widgetCoords(event);fb.circleDrag=Math.max(Math.abs(pos.x),Math.abs(pos.y))*2>fb.square;fb.mousemove(event);return false;}
fb.mousemove=function(event){var pos=fb.widgetCoords(event);if(fb.circleDrag){var hue=Math.atan2(pos.x,-pos.y)/6.28;if(hue<0)hue+=1;fb.setHSL([hue,fb.hsl[1],fb.hsl[2]]);}
else{var sat=Math.max(0,Math.min(1,-(pos.x/fb.square)+.5));var lum=Math.max(0,Math.min(1,-(pos.y/fb.square)+.5));fb.setHSL([fb.hsl[0],sat,lum]);}
return false;}
fb.mouseup=function(){$(document).unbind('mousemove',fb.mousemove);$(document).unbind('mouseup',fb.mouseup);document.dragging=false;}
fb.updateDisplay=function(){var angle=fb.hsl[0]*6.28;$('.h-marker',e).css({left:Math.round(Math.sin(angle)*fb.radius+fb.width/2)+'px',top:Math.round(-Math.cos(angle)*fb.radius+fb.width/2)+'px'});$('.sl-marker',e).css({left:Math.round(fb.square*(.5-fb.hsl[1])+fb.width/2)+'px',top:Math.round(fb.square*(.5-fb.hsl[2])+fb.width/2)+'px'});$('.color',e).css('backgroundColor',fb.pack(fb.HSLToRGB([fb.hsl[0],1,0.5])));if(typeof fb.callback=='object'){$(fb.callback).css({backgroundColor:fb.color,color:fb.hsl[2]>0.5?'#000':'#fff'});$(fb.callback).each(function(){if(this.value&&this.value!=fb.color){this.value=fb.color;}});}
else if(typeof fb.callback=='function'){fb.callback.call(fb,fb.color);}}
fb.absolutePosition=function(el){var r={x:el.offsetLeft,y:el.offsetTop};if(el.offsetParent){var tmp=fb.absolutePosition(el.offsetParent);r.x+=tmp.x;r.y+=tmp.y;}
return r;};fb.pack=function(rgb){var r=Math.round(rgb[0]*255);var g=Math.round(rgb[1]*255);var b=Math.round(rgb[2]*255);return'#'+(r<16?'0':'')+r.toString(16)+
(g<16?'0':'')+g.toString(16)+
(b<16?'0':'')+b.toString(16);}
fb.unpack=function(color){if(color.length==7){return[parseInt('0x'+color.substring(1,3))/255,parseInt('0x'+color.substring(3,5))/255,parseInt('0x'+color.substring(5,7))/255];}
else if(color.length==4){return[parseInt('0x'+color.substring(1,2))/15,parseInt('0x'+color.substring(2,3))/15,parseInt('0x'+color.substring(3,4))/15];}}
fb.HSLToRGB=function(hsl){var m1,m2,r,g,b;var h=hsl[0],s=hsl[1],l=hsl[2];m2=(l<=0.5)?l*(s+1):l+s-l*s;m1=l*2-m2;return[this.hueToRGB(m1,m2,h+0.33333),this.hueToRGB(m1,m2,h),this.hueToRGB(m1,m2,h-0.33333)];}
fb.hueToRGB=function(m1,m2,h){h=(h<0)?h+1:((h>1)?h-1:h);if(h*6<1)return m1+(m2-m1)*h*6;if(h*2<1)return m2;if(h*3<2)return m1+(m2-m1)*(0.66666-h)*6;return m1;}
fb.RGBToHSL=function(rgb){var min,max,delta,h,s,l;var r=rgb[0],g=rgb[1],b=rgb[2];min=Math.min(r,Math.min(g,b));max=Math.max(r,Math.max(g,b));delta=max-min;l=(min+max)/2;s=0;if(l>0&&l<1){s=delta/(l<0.5?(2*l):(2-2*l));}
h=0;if(delta>0){if(max==r&&max!=g)h+=(g-b)/delta;if(max==g&&max!=b)h+=(2+(b-r)/delta);if(max==b&&max!=r)h+=(4+(r-g)/delta);h/=6;}
return[h,s,l];}
$('*',e).mousedown(fb.mousedown);fb.setColor('#000000');if(callback){fb.linkTo(callback);}}
$(window).load(function(){$("#").addClass("active");});(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','','auto');ga('send','pageview');$("#tinvilleTagBanner").css("height","50px");$("#tinvilleTagBanner").css("top","0px");$("#tinvilleTagBanner").css("margin-top","0px");$(".shopColor").css("color","#AED4EF");var textColor=isTooLightYIQ("#AED4EF")?'#777':'#e7e5e6';$(".shopTitleColor").css("color",textColor);$(".shopBackgroundColor").css("background-color","#AED4EF");$("a.name").text(function(index,currentText){if(currentText.length>20){$('a.name').attr('rel','tooltip');}
return currentText.substr(0,20);});$(function(){var tabType="Default";$("#aboutHighlight").toggle();if(tabType!==null&&tabType=='about')
{$("#aboutTabAnchor").click();$("#aboutTabAnchorXS").click();$("#minMaxIcon").click();setTimeout(function(){$("#aboutHighlight").toggle("highlight");},1000);setTimeout(function(){$("#aboutHighlight").toggle("highlight");},8000);}});$("#shopTabLinkXS").click(function(){$("#shopTabLinkXS").addClass("shopMenuActiveColor");$("#aboutTabAnchorXS").removeClass("shopMenuActiveColor");});$("#aboutTabAnchorXS").click(function(){$("#shopTabLinkXS").removeClass("shopMenuActiveColor");$("#aboutTabAnchorXS").addClass("shopMenuActiveColor");});$('#filterGender').change(function(){updateItemView(true)});$('#filterType').change(function(){updateItemView(false)});$('#filterSort').change(function(){updateItemView(false)});function updateItemView(changeGender){var genderFilter=$("#filterGender option:selected").attr("value");var typeFilter=$("#filterType option:selected").attr("value");var sortFilter=$("#filterSort option:selected").attr("value");$("#shopItems").load(" #shopItems",{genderfilter:genderFilter,typefilter:typeFilter,sortfilter:sortFilter},function(){$(this).children().unwrap()});if(genderFilter.match("All"))
genderFilter="All";if(changeGender)
refreshtypes(genderFilter);}
var myresponse;function refreshtypes(genderFilter){myresponse=$.getJSON("/Demo/edit/getTypes/"+genderFilter,function(data){var list=[];list.push('<option value="View All Types"><i>View All Types</i></option>');$.each(data.types,function(key,value)
{list.push('<option value="'+value+'">'+value+'</option>');});$('#filterType').html(list.join(''));$('#filterType').val("View All Types");});}
$('#id_product_image').change
(function()
{$("#id_product_image1").removeClass("hidden");});$('#id_product_image1').change
(function()
{$("#id_product_image2").removeClass("hidden");});$('#id_product_image2').change
(function()
{$("#id_product_image3").removeClass("hidden");});$('#id_product_image3').change
(function()
{$("#id_product_image4").removeClass("hidden");});$("#emptyShopCon").css("border-style","dashed");$("#emptyShopCon").css("border-color","darkgray");$("#emptyShopCon").css("margin-bottom","30px");$("#shopTabLink").removeClass("active");$("#aboutTabLink").removeClass("active");$("#editLink").addClass("active");$(document).on("submit","#color",function(e){e.preventDefault();var self=$(this);var url=self.attr("action");var ajax_req=$.ajax({url:url,type:"POST",data:{color:document.getElementById("id_color").value},success:function(data,textStatus,jqXHR){clear_django_messages(self.find("#shopEditor_message_area"));clear_form_field_errors("#color");$(".shopColor").css("color",document.getElementById("id_color").value);$(".shopBackgroundColor").css("background-color",document.getElementById("id_color").value);var textColor=isTooLightYIQ(document.getElementById("id_color").value)?'#777':'#e7e5e6';$(".shopTitleColor").css("color",textColor);document.getElementById('shopEditor_message_area').innerHTML="Color "+document.getElementById("id_color").value+" has been applied"},error:function(data,textStatus,jqXHR){clear_django_messages(self.find("#shopEditor_message_area"));clear_form_field_errors("#color");document.getElementById('shopEditor_message_area').innerHTML="";var errors=$.parseJSON(data.responseText);$.each(errors,function(index,value){if(index==="__all__"){django_message(value[0],"error",self.find("#shopEditor_message_area"));}else{apply_form_field_error(self[0].id,index,value);}});}});});$(document).ready(function(){$('#addOrEditItem').parsley().subscribe('parsley:form:validate',function(formInstance){if(formInstance.isValid()){$("input[type=submit]").attr("disabled","disabled");return;}
formInstance.submitEvent.preventDefault();$('.parsley-errors-list').addClass("filled bootstrapError help-block");});document.getElementById("id_price").attributes["data-parsley-type"]="decimal";document.getElementById("id_price").attributes["type"].value="decimal";if($("#emptyShopId").length>0){document.getElementById('emptyShopId').innerHTML="Items go here..."}
resizeEditor();showImageFields();});var htmlString="<div>\
  This is a string.\
</div>";var colorQuantityTableHead=""+"<div class='accordion-body collapse collapse-colors-quantity col-xs-12' style='padding-right: 0; padding-left: 6px; '>"+"<div class='accordion-inner table-responsive'>"+"<table class='table'>"+"<thead>"+"<tr>"+"<td class='col-xs-8'><b>Color</b></td>"+"<td class='col-xs-4'><b>Qty</b></td>"+"</tr>"+"</thead>"+"<tbody>"+"</tbody>"+"</table>"+"</div>"+"</div>";function sizeSetTemplate(required){var sizeSetTemplate=""+"<div id='sizeSetSelectionTemplate' class='accordion-group sizeSetSelectionTemplate'>"+"<div class='accordion-heading'><div id='div_id_sizeSetSelection' class='form-group'>"+"<div class='controls row'>"+"<div class='col-xs-10'>"+"<select class='sizeSetSelection select form-control' id='id_sizeSetSelection' name='sizeSetSelection' "+required+">"+"<option value='' selected='selected'>Choose a size...</option>"+""+"<option value='1'>XXS</option>"+""+"<option value='2'>XS</option>"+""+"<option value='3'>SM</option>"+""+"<option value='4'>MD</option>"+""+"<option value='5'>LG</option>"+""+"<option value='6'>XL</option>"+""+"<option value='7'>XXL</option>"+""+"</select>"+"</div>"+"<div class='col-xs-2'>"+"<button id='id_clearSizes' class='shoppingcartBtn' value='Clear' onclick='clearSizeRow(\"sizeSetSelectionTemplateTEMPLATENUM\")'>"+"<img src='/static/img/delete.png' width='20' height='20'/>"+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+colorQuantityTableHead;return sizeSetTemplate;}
function sizeDimensionTemplate(required){var sizeDimensionTemplate=""+"<div id='sizeDimensionSelectionTemplate' class='accordion-group sizeDimensionSelectionTemplate'>"+"<div class='accordion-heading'><div id='div_id_sizeDimensionSelection' class='form-group'>"+"<div class='controls row'>"+"<div class='col-xs-4'>"+"<input class='sizeDimensionSelection numberinput form-control dimensionWidth' id='id_sizeDimensionSelectionWidth' name='sizeDimWidth' type='decimal' placeholder = 'Type a width'"+required+">"+"</div>"+"<div class='col-xs-2 dimensionSplit'>X</div>"+"<div class='col-xs-4'>"+"<input class='sizeDimensionSelection numberinput form-control dimensionLength' id='id_sizeDimensionSelectionLength' name='sizeDimLength' type='decimal' placeholder = 'Type a length'"+required+">"+"</div>"+"<div class='col-xs-2'>"+"<button id='id_clearSizes' class='shoppingcartBtn'  value='Clear' onclick='clearSizeRow(\"sizeDimensionSelectionTemplateTEMPLATENUM\")'>"+"<img src='/static/img/delete.png' width='20' height='20'/>"+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+colorQuantityTableHead;return sizeDimensionTemplate;}
function sizeNumberTemplate(required){var sizeNumberTemplate=""+"<div id='sizeNumberSelectionTemplate' class='accordion-group sizeNumberSelectionTemplate'>"+"<div class='accordion-heading'><div id='div_id_sizeNumberSelection' class='form-group'>"+"<div class='controls row'>"+"<div class='col-xs-10'>"+"<input class='sizeNumberSelection numberinput form-control'"+required+" id='id_sizeNumberSelection' name='sizeNumberSelection' type='decimal' placeholder = 'Type a size'>"+"</div>"+"<div class='col-xs-2'>"+"<button id='id_clearSizes' value='Clear' class='shoppingcartBtn' onclick=''clearSizeRow(\"sizeNumberSelectionTemplateTEMPLATENUM\")'>"+"<img src='/static/img/delete.png' width='20' height='20'/>"+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+colorQuantityTableHead;return sizeNumberTemplate;}
function rowColorQuantityTemplate(required){numRequired="data-parsley-required='true' data-parsley-required-message='This field is required.' data-parsley-type='number' data-parsley-type-digits-message='Enter a number.' data-parsley-type-number-message='Enter a number.'";if(required==="")
numRequired="";var rowColorQuantityTemplate=""+"<tr class='row-color-quantity rowColorQuantityTemplate' id='rowColorQuantityTemplate'>"+"<td style=' padding: 8px 2px 0px 2px; '>"+"<div class='row-color >"+"<div id='div_id_colorSelection' class='form-group'>"+"<div class='controls'>"+"<select class='select form-control colorSelect'"+required+" id='id_colorSelection' name='colorSelection' placeholder='Choose a color'>"+"<option value='' selected='selected'>Choose a color...</option>"+""+"<option value='8'>Red</option>"+""+"<option value='9'>Blue</option>"+""+"<option value='10'>Green</option>"+""+"<option value='11'>Black</option>"+""+"<option value='12'>White</option>"+""+"<option value='13'>Pink</option>"+""+"<option value='14'>Brown</option>"+""+"<option value='15'>Gray</option>"+""+"<option value='16'>Yellow</option>"+""+"<option value='17'>Violet</option>"+""+"<option value='18'>Orange</option>"+""+"</select>"+"</div>"+"</div>"+"</div>"+"</td>"+"<td style=' padding: 8px 0px 0px 0px; '>"+"<div id='div_id_quantityField' class='form-group'>"+"<div class='controls'>"+"<input class='numberinput form-control quantityField'"+numRequired+"id='id_quantityField' name='quantityField' type='number' value='1'>"+"</div>"+"</div>"+"</td>"+"<td style=' padding: 8px 0px 0px 0px; '>"+"<button id='id_clearColorQuantity' value='Clear' class='shoppingcartBtn' onclick='clearColorRow(\"rowColorQuantityTemplateTEMPLATENUM\")'>"+"<img src='/static/img/delete.png' width='20' height='20' />"+"</button>"+"</td>"+"</tr>";return rowColorQuantityTemplate;}
const SizeTypeInfo={"1":{"sizeTemplateClass":".sizeSetSelectionTemplate","sizeSelectionClass":".sizeSetSelection","selectedValueType":'$("option:selected", this)'},"2":{"sizeTemplateClass":".sizeDimensionSelectionTemplate","sizeSelectionClass":".sizeDimensionSelection","selectedValueType":'$(this).val()'},"3":{"sizeTemplateClass":".sizeNumberSelectionTemplate","sizeSelectionClass":".sizeNumberSelection","selectedValueType":'$(this).val()'}};$("#id_sizeVariation").change(function(){$('#formContent').animate({scrollTop:$('#formContent')[0].scrollHeight},500);var selectedValue=$("#id_sizeVariation option:selected");var sizesFieldSet=$("#sizesFieldSet");sizesFieldSet.removeClass("hidden");var sizeType=selectedValue[0].value;var sizeTypeString=sizeTypeStringFromNum(sizeType);var sizeTemplateClass=SizeTypeInfo[sizeType]['sizeTemplateClass'];var sizeSelectionClass=SizeTypeInfo[sizeType]['sizeSelectionClass'];var selectedValueType=SizeTypeInfo[sizeType]['selectedValueType'];RemoveWrongSizeTypes(sizeTypeString);addNewSizeRow(sizeTypeString);wireEventHandlersForVariants(sizesFieldSet,sizeTypeString,sizeSelectionClass,sizeTemplateClass,selectedValueType);});function wireEventHandlersForVariants(sizesFieldSet,sizeTypeString,sizeSelectionClass,sizeTemplateClass,selectedValueType){sizesFieldSet.on("change keyup",sizeSelectionClass,function(e){if($(this).closest('.accordion-group').next().length=="0"){addNewColorAndQuantityRow($(this).parents(sizeTemplateClass).attr("id")+"_",$(this).parents(".accordion-group").find("tbody"));}
var selectedValue=eval(selectedValueType);var sizesFieldSet=$("#sizesFieldSet");if(selectedValue[0].value!="0"){if($(this).closest('.accordion-group').next().length=="0"){$('#formContent').animate({scrollTop:$('#formContent')[0].scrollHeight},500);addNewSizeRow(sizeTypeString);}}});sizesFieldSet.on("change",".row-color",function(e){var selectedValue=$("option:selected",this);var sizesFieldSet=$("#sizesFieldSet");var editorPanelHeight;var currentPanel;editorPanelHeight=.85;maxHeight=$(window).height()*editorPanelHeight;if(selectedValue[0].value!=0){var colorsAndQuantitiesTable=$(".table",$(this).parents(".accordion-group")[0]);if($(this).closest('.rowColorQuantityTemplate').next().length=="0"){addNewColorAndQuantityRow(colorsAndQuantitiesTable.parents(sizeTemplateClass).attr("id")+"_",colorsAndQuantitiesTable,false);currentPanel=$(this).closest('.rowColorQuantityTemplate').next().position().top+$(this).closest(sizeTemplateClass).next().position().top-$(this).closest('.rowColorQuantityTemplate').next().height();$('#formContent').animate({scrollTop:currentPanel},500);}}})}
var arSizeRows=[];var arColorRows=[];var sizeRequired="data-parsley-required='true' data-parsley-required-message='This field is required.' required";var sizeDimRequired="data-parsley-required='true' data-parsley-required-message='This field is required.' data-parsley-type='number' data-parsley-type-digits-message='Enter a number.' data-parsley-type-number-message='Enter a number.'";var sizeNumRequired="data-parsley-required='true' data-parsley-required-message='This field is required.' data-parsley-type='number' data-parsley-type-digits-message='Enter a number.' data-parsley-type-number-message='Enter a number.'";function clearColorRow(strRowToClear)
{var strRowId="#"+strRowToClear;var indexToRemove=arColorRows.indexOf(strRowToClear);$(strRowId).remove();arColorRows.splice(indexToRemove,1);}
function clearSizeRow(strRowToClear)
{var strRowId="#"+strRowToClear;var indexToRemove=arSizeRows.indexOf(strRowToClear);$(strRowId).remove();arSizeRows.splice(indexToRemove,1);}
function addNewSizeRow(sizeType){var sizeTemplateName;var templateName;switch(sizeType){case"sizeSet":sizeTemplateName="sizeSetSelectionTemplate";templateName=sizeSetTemplate(sizeRequired);sizeRequired="";break;case"sizeDim":sizeTemplateName="sizeDimensionSelectionTemplate";templateName=sizeDimensionTemplate(sizeDimRequired);sizeDimRequired="";break;case"sizeNum":sizeTemplateName="sizeNumberSelectionTemplate";templateName=sizeNumberTemplate(sizeNumRequired);sizeNumRequired="";break}
$("#sizesFieldSet").append(templateName);var $newSizeSelection=$("#"+sizeTemplateName);var counter=GetNewCounter($newSizeSelection,sizeTemplateName,0);appendSuffixToAttribute($newSizeSelection,"id",counter);var newInnerHTML=$newSizeSelection.html().replace("TEMPLATENUM",counter);$newSizeSelection.html(newInnerHTML);if(arSizeRows.length!=0&&arSizeRows[0].indexOf(sizeTemplateName)==-1)
{arSizeRows=[];}
arSizeRows[arSizeRows.length]=($($newSizeSelection).attr('id'));var prefix=$newSizeSelection[0].id+"_";$newSizeSelection.find('[id]').each(function(){var $th=$(this);var newID=$th.attr('id').replace(/\w+$/,function(str){return prefix+str;});$th.attr('id',newID);});$newSizeSelection.find('[name]').each(function(){var $th=$(this);var newName=$th.attr('name').replace(/\w+$/,function(str){return prefix+str;});$th.attr('name',newName);});return $newSizeSelection;}
function addNewColorAndQuantityRow(prefix,appendTo,required){if(typeof(required)==='undefined')required=true;var rowQtyRequired="";if(required===true)
rowQtyRequired="data-parsley-required='true' data-parsley-required-message='This field is required.' required";var colorsAndQuantities=$(".collapse-colors-quantity",appendTo.parents(".accordion-group")[0]);colorsAndQuantities.collapse('show');$(appendTo).append(rowColorQuantityTemplate(rowQtyRequired));var $newColorQuantityRow=$("#rowColorQuantityTemplate");var counter=GetNewCounter($newColorQuantityRow,"rowColorQuantityTemplate",0);prependPrefixToAttribute($newColorQuantityRow,"id",prefix);appendSuffixToAttribute($newColorQuantityRow,"id",counter);var newInnerHTML=$newColorQuantityRow.html().replace("TEMPLATENUM",counter);newInnerHTML=newInnerHTML.replace("rowColorQuantityTemplate",prefix+"rowColorQuantityTemplate");$newColorQuantityRow.html(newInnerHTML);arColorRows[arColorRows.length]=($($newColorQuantityRow).attr('id'));$newColorQuantityRow.find('[id]').each(function(){var $th=$(this);var newID=$th.attr('id').replace(/\w+$/,function(str){return prefix+str+counter;});$th.attr('id',newID);});$newColorQuantityRow.find('[name]').each(function(){var $th=$(this);var newName=$th.attr('name').replace(/\w+$/,function(str){return prefix+str+counter;});$th.attr('name',newName);});return $newColorQuantityRow;}
function RemoveWrongSizeTypes(newSizeType){switch(newSizeType){case"sizeSet":$(".sizeDimensionSelectionTemplate").each(function(){(this).remove();});$(".sizeNumberSelectionTemplate").each(function(){(this).remove();});break;case"sizeDim":$(".sizeSetSelectionTemplate").each(function(){(this).remove();});$(".sizeNumberSelectionTemplate").each(function(){(this).remove();});break;case"sizeNum":$(".sizeSetSelectionTemplate").each(function(){(this).remove();});$(".sizeDimensionSelectionTemplate").each(function(){(this).remove();});break}}
function GetNewCounter($element,classFromPrevious,initial){var counter=initial;var numberAtEndOfId;if($element.prev().hasClass(classFromPrevious))
{if(numberAtEndOfId=$element.prev().attr('id').match(/(\d+)$/))
{counter=parseInt(numberAtEndOfId[0],10)+1;}}
return counter;}
function ReplaceNumberAtEndOfString(string,newNumber){var newString=string.replace(/[_0-9]+$/,newNumber);return newString}
function appendSuffixToAttribute(element,attr,suffix){element.attr(attr,element.attr(attr)+suffix);}
function prependPrefixToAttribute(element,attr,prefix){element.attr(attr,prefix+element.attr(attr));}
function sizeTypeStringFromNum(num){switch(num){case"1":return"sizeSet";case"2":return"sizeDim";case"3":return"sizeNum";default:return"";}}
function populateProductVariantsInfo(){$.getJSON("/Demo/edit//getVariants/size",function(data){var sizeType=data["sizetype"];var sizeTypeString=sizeTypeStringFromNum(sizeType);var sizeTemplateClass=SizeTypeInfo[sizeType]['sizeTemplateClass'];var sizeSelectionClass=SizeTypeInfo[sizeType]['sizeSelectionClass'];var selectedValueType=SizeTypeInfo[sizeType]['selectedValueType'];var sizesFieldSet=$("#sizesFieldSet");sizesFieldSet.removeClass("hidden");wireEventHandlersForVariants(sizesFieldSet,sizeTypeString,sizeSelectionClass,sizeTemplateClass,selectedValueType);$.each(data.variants,function(key,value){var sizeRow=addNewSizeRow(sizeTypeString);populateInitialDataForSizeRow(sizeRow,sizeTypeString,key);var prefix=sizeRow.attr("id")+"_";var appendTo=sizeRow.find("tbody");$.each(value,function(key,value){var colorQuantityRow=addNewColorAndQuantityRow(prefix,appendTo);populateInitialDataForColorAndQuantityRow(colorQuantityRow,value.color,value.quantity);});addNewColorAndQuantityRow(prefix,appendTo,false);});addNewSizeRow(sizeTypeString);});}
function populateInitialDataForSizeRow(sizeRow,sizeType,size){switch(sizeType){case"sizeSet":sizeRow.find('.sizeSetSelection option').each(function(){if($(this).text()==size.toUpperCase()){$(this).attr('selected','selected');}});break;case"sizeDim":var dims=size.split(" x ");sizeRow.find('.dimensionWidth').val(dims[0]);sizeRow.find('.dimensionLength').val(dims[1]);break;case"sizeNum":sizeRow.find('.sizeNumberSelection').val(size);break;}}
function populateInitialDataForColorAndQuantityRow(colorQuantityRow,color,quantity){colorQuantityRow.find('.colorSelect option').each(function(){if($(this).text()==color){$(this).attr('selected','selected');}});colorQuantityRow.find('.quantityField').val(quantity);}
$(window).resize(function(){if($("#emptyShopId").length>0){document.getElementById('emptyShopId').innerHTML="Items go here..."}
resizeEditor();});$("#optionContent li").click(function(){$("#optionsXS").text($(this).text()+" (click here for editor options)");$("#shopEditor_message_area").empty();resizeEditor();});optionsXSMargin=20;editorHeightRatio=0.85;$("#optionsXS").click(function(){var currentFormPanelHeight;var maxFormHeight;var transitionHeight;currentFormPanelHeight=$("#secondColumn").outerHeight();maxFormHeight=Math.round($(window).height()*editorHeightRatio);$("#optionContent").height(maxFormHeight-
$("#optionsXS").outerHeight()+optionsXSMargin-
$("#buttonContainer").outerHeight()-
$("#shopEditorTitle").outerHeight()-
parseInt($("#cornerRadius").css('border-top-width'))-
parseInt($("#cornerRadius").css('border-bottom-width'))-
parseInt($("#shopEditorHeading").css('padding-bottom'))-
parseInt($("#formPanel").css('border-top-width'))-
parseInt($("#formPanel").css('padding-bottom')));transitionHeight=$("#optionContent").outerHeight()+$("#optionsXS").outerHeight();if($("#optionPanel").outerHeight()==$("#optionsXS").outerHeight()+optionsXSMargin)
{$("#optionPanel").velocity({height:transitionHeight},{duration:300});$("#formPanel").velocity({height:currentFormPanelHeight-transitionHeight},{duration:300});$("#formContent").velocity({height:currentFormPanelHeight-transitionHeight},{duration:300});}
else
{resizeEditor();}});function resizeEditor(){var maxFormHeight;var editorPanelHeight;var buttonHeight;var optionPanelHeight;var editorHeight;var maxHeight;var formTransitionHeight;var excess;buttonHeight=$("#buttonContainer").outerHeight();if(checkMode()=='xs')
{$("#optionPanel").css({'padding-top':'0px','padding-bottom':'0px','margin-bottom':'10px'});$("#formPanel").css({'padding-top':'0px','padding-bottom':'0px'});optionPanelHeight=$("#optionsXS").outerHeight()+optionsXSMargin;maxFormHeight=$(window).height()*editorHeightRatio;formTransitionHeight=maxFormHeight-optionPanelHeight-
$("#shopEditorTitle").outerHeight()-
$("#buttonContainer").outerHeight()-
parseInt($("#cornerRadius").css('border-top-width'))-
parseInt($("#cornerRadius").css('border-bottom-width'));$("#optionPanel").velocity({height:optionPanelHeight},{duration:300});$("#optionContent").velocity({height:optionPanelHeight},{duration:300});$("#formPanel").velocity({height:formTransitionHeight},{duration:300});$("#formContent").velocity({height:formTransitionHeight},{duration:300});}
else
{$("#optionPanel").css({'padding-top':'15px','padding-bottom':'15px'});$("#formPanel").css({'padding-top':'15px','padding-bottom':'15px'});editorPanelHeight=0.80;excess=$("#shopEditorTitle").outerHeight()+
parseInt($("#cornerRadius").css('border-top-width'))+
parseInt($("#cornerRadius").css('border-bottom-width'))+
parseInt($("#shopEditorHeading").css('padding-bottom'));maxHeight=$(window).height()*editorPanelHeight;$("#optionPanel").velocity({height:maxHeight-excess},300);$("#formPanel").velocity({height:maxHeight-excess-buttonHeight},300);$("#optionContent").velocity({height:maxHeight-excess},300);$("#formContent").velocity({height:maxHeight-excess-buttonHeight},300);}}
var jsonDel,delState;$('.itemDelete').click(function(e){var chevron,jsonDel,parentId,delState;delState=sessionStorage.getItem("del-state");jsonDel=JSON.parse(delState||"{}");parentId="editorPanels";chevron="false";jsonDel[parentId]=chevron;return sessionStorage.setItem("del-state",JSON.stringify(jsonDel));});delState=sessionStorage.getItem("del-state");jsonDel=JSON.parse(delState||"{}");$(function(){$.each(jsonDel,function(containerId,isHidden){if(isHidden==="false"){$("#minMaxIcon").removeClass("glyphicon-chevron-down");$("#minMaxIcon").addClass("glyphicon-chevron-up");sessionStorage.removeItem("del-state");return $("#"+containerId).collapse('hide');}
else{return $("#"+containerId).collapse('show');}});});var json,tabsState;$('a[data-toggle="pill"]').click(function(e){var href,json,parentId,tabsState;tabsState=sessionStorage.getItem("tabs-state");json=JSON.parse(tabsState||"{}");parentId=$(e.target).parents("ul.nav.nav-pills").attr("id");href=$(e.target).attr('href');json[parentId]=href;return sessionStorage.setItem("tabs-state",JSON.stringify(json));});tabsState=sessionStorage.getItem("tabs-state");json=JSON.parse(tabsState||"{}");$.each(json,function(containerId,href){return $("#"+containerId+" a[href="+href+"]").tab('show');});$("#optionContent").slimScroll({});$("#formContent").slimScroll({});$("#shopEditorTitle").click(function(){$("#minMaxIcon").toggleClass("glyphicon-chevron-up");$("#minMaxIcon").toggleClass("glyphicon-chevron-down");});function DeleteConfirmation(slug){$('#deleteModal').modal('show');$('#okDeleteBtn').click({param1:slug},function(event){var href="/demo/edit/delete_product/";window.location=href+event.data.param1;});}
function getCenterBoxSelection(ratio_width,ratio_height,image_width,image_height){var ratio=ratio_width/ratio_height;if(image_width<image_height*ratio){offset=Math.round((image_height-(image_width/ratio))/2);return[0,offset,image_width,image_height-offset]}
var offset=Math.round((image_width-(image_height*ratio))/2);return[offset,0,image_width-offset,image_height];}
function readURL(input,cropping_img,ratio_width,ratio_height){if(input.files&&input.files[0]){var reader=new FileReader();reader.onload=function(e){if(cropping_img in jcrop){var thumbnail=$('#'+cropping_img).next('.jcrop-image').children('img');var img=new Image();img.src=reader.result;jcrop[cropping_img].setImage(reader.result,function(){this.setOptions({aspectRatio:ratio_width/ratio_height,setSelect:getCenterBoxSelection(ratio_width,ratio_height,img.width,img.height),trueSize:[img.width,img.height],});})}};reader.readAsDataURL(input.files[0]);}}
$("#id_banner").change(function(){readURL(this,'id_bannerCropping-image',1779,364);});$("#id_mobileBanner").change(function(){readURL(this,'id_mobileBannerCropping-image',968,642);});$("#id_aboutImg").change(function(){readURL(this,'id_aboutImgCropping-image',155,155);});$("#id_images-0-original").change(function(){readURL(this,'id_images-0-cropping-image',400,500);$('#div_id_images-1-original').removeClass("hidden");$('#div_id_images-1-cropping').removeClass('hidden');$('#div_id_images-1-DELETE').removeClass('hidden');});$("#id_images-1-original").change(function(){readURL(this,'id_images-1-cropping-image',400,500);$('#div_id_images-2-original').removeClass("hidden");$('#div_id_images-2-cropping').removeClass('hidden');$('#div_id_images-2-DELETE').removeClass('hidden');});$("#id_images-2-original").change(function(){readURL(this,'id_images-2-cropping-image',400,500);$('#div_id_images-3-original').removeClass("hidden");$('#div_id_images-3-cropping').removeClass('hidden');$('#div_id_images-3-DELETE').removeClass('hidden');});$("#id_images-3-original").change(function(){readURL(this,'id_images-3-cropping-image',400,500);$('#div_id_images-4-original').removeClass("hidden");$('#div_id_images-4-cropping').removeClass('hidden');$('#div_id_images-4-DELETE').removeClass('hidden');});$("#id_images-4-original").change(function(){readURL(this,'id_images-4-cropping-image',400,500);});function showImageFields(){$('#div_id_images-1-original').addClass('hidden');$('#div_id_images-2-original').addClass('hidden');$('#div_id_images-3-original').addClass('hidden');$('#div_id_images-4-original').addClass('hidden');$('#div_id_images-1-cropping').addClass('hidden');$('#div_id_images-2-cropping').addClass('hidden');$('#div_id_images-3-cropping').addClass('hidden');$('#div_id_images-4-cropping').addClass('hidden');$('#div_id_images-1-DELETE').addClass('hidden');$('#div_id_images-2-DELETE').addClass('hidden');$('#div_id_images-3-DELETE').addClass('hidden');$('#div_id_images-4-DELETE').addClass('hidden');var visibleImages=[$('#div_id_images-0-original a[target="_blank"]').length,$('#div_id_images-1-original a[target="_blank"]').length,$('#div_id_images-2-original a[target="_blank"]').length,$('#div_id_images-3-original a[target="_blank"]').length];if(visibleImages[0]){$('#div_id_images-1-original').removeClass("hidden");$('#div_id_images-1-cropping').removeClass('hidden');$('#div_id_images-1-DELETE').removeClass('hidden');}
if(visibleImages[1]){$('#div_id_images-2-original').removeClass("hidden");$('#div_id_images-2-cropping').removeClass('hidden');$('#div_id_images-2-DELETE').removeClass('hidden');}
if(visibleImages[2]){$('#div_id_images-3-original').removeClass("hidden");$('#div_id_images-3-cropping').removeClass('hidden');$('#div_id_images-3-DELETE').removeClass('hidden');}
if(visibleImages[3]){$('#div_id_images-4-original').removeClass("hidden");$('#div_id_images-4-cropping').removeClass('hidden');$('#div_id_images-4-DELETE').removeClass('hidden');}}
{% extends "designer_shop/shopperbase.html" %}
{% load thumbnail %}
{% load purchase_info_tags %}

{% block css %}
    {{ block.super }}
{% endblock css %}

{% block content %}
    {{ block.super }}


<!-- Nav tabs -->
<ul class="nav nav-tabs shopBackgroundColor" role="tablist">
    <li class="active shopTabStyle"><a href="#shopTab" role="tab" data-toggle="tab"z>Home</a></li>
    <li class="shopTabStyle"><a href="#aboutTab" role="tab" data-toggle="tab">About</a></li>
    <li class="shopTabStyle"><a href="#landingTab" role="tab" data-toggle="tab">Landing</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content ">
    <div class="navTab tab-pane active" id="shopTab">
        <div class="container">
            {% if user.email == shop.user.email%}
            <div id="editLink">
                <a class="whhg-edit editIcon" href="{{ shop.get_absolute_url }}edit"> </a>
            </div>
            {% endif %}
            <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-4">
                <select class="select form-control filterTabs" id="filterGender" name="genderFilter">
                    <option>View All</option>
                    {% for genders in shopgenders %}
                        <option>{{ genders.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-4">
                <select class="select form-control filterTabs" id="filterType" name="typeFilter">
                    <option>View All Types</option>
                    {% for category in shopcategories %}
                        {% if category.numchild == 0 %}
                            <option class="">{{ category.name }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>

            <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-4">
                <select class="select form-control filterTabs" id = "filterPrice" name="priceFilter">
                    <option>All Prices</option>
                    <option>$0-$50</option>
                    <option>$50-$100</option>
                </select>
            </div>
            {% include "designer_shop/shop_items.html" %}
        </div>
    </div>
    <div class="navTab tab-pane" id="aboutTab">{{ shop.aboutContent | safe }}</div>
    <div class="navTab tab-pane" id="landingTab"><p>Stuff for Landing</p></div>
</div>

{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script>

    $('#filterGender').change( function() {updateItemView()})
    $('#filterType').change( function() {updateItemView()})
    $('#filterPrice').change( function() {updateItemView()})

    function updateItemView(){
        var genderFilter = $("#filterGender option:selected").text()
        var typeFilter = $("#filterType option:selected").text()
        var priceFilter = $("#filterPrice option:selected").text()
        $("#shopItems").load(" #shopItems", {genderfilter: genderFilter, typefilter: typeFilter, pricefilter: priceFilter}, function(){$(this).children().unwrap()});
    }

    </script>
{% endblock %}


{% extends "base.html" %}
{% load i18n %}
{% load thumbnail %}
{% load purchase_info_tags %}
{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/designer_shop/styles.css" />
{% endblock css %}

{% block content %}
    {{ block.super }}

    <a href="/"><img id="tinyTinvillelogo" class="pull-left" src="{{ STATIC_URL }}img/tinyTinvillelogo.png"></a>
{#    need to add something if a designer does not have a banner#}
{#    this will be decribed at a later time#}
  {% if shop.banner %}
    <img src="{{shop.banner.url}}" class="shopBanner img-responsive full-screen" />
  {% endif %}

{#  This section is the info banner for a shop  #}
  <div class="container infoBanner full-screen shopBackgroundColor"></div>

  <div class="container">
      {% if shop.aboutContent %}
          <div id="aboutLink" class="shopBackgroundColor">
            <div class="whhg-batman aboutIcon"> </div>
{#          <button type="button" class="whhg-batman aboutIcon btn btn-default" data-container="body" data-toggle="popover" data-placement="bottom" data-content="{{ shop.aboutContent | safe }}">BIO</button>#}
          </div>



      {% endif %}

    <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
              {{ shop }} Bio
            </a>
          </h4>
        </div>
        <div id="collapseOne" class="panel-collapse collapse">
          <div class="panel-body">
            {{ shop.aboutContent | safe }}
          </div>
        </div>
    </div>

      {% if user.email == shop.user.email%}
        <div id="editLink" class="shopBackgroundColor">
            <a class="whhg-edit editIcon" href="{{ shop.get_absolute_url }}edit"> </a>
        </div>
      {% endif %}

      <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-4">
         <select class="select form-control filterTabs "  id="filterTab1" onselect="colourFunction()" name="Filter1">
            <option class="option2">View All</option>
              {% for category in categories %}
                {% if category.depth == 1 %}
                    <option class="">{{ category.name }}</option>
                {% endif %}
             {% endfor %}
          </select>
      </div>

      <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-4">
          <select class="select form-control filterTabs " >
            <option>View All Types</option>
            {% for category in categories %}
                {% if category.depth == 3 %}
                    <option class="">{{ category.name }}</option>
                {% endif %}
             {% endfor %}
          </select>
      </div>

      <div class="col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-4">
          <select class="select form-control filterTabs">
            <option>All Prices</option>
            <option>$0-$50</option>
            <option>$50-$100</option>
          </select>
      </div>
  </div>

  <div class="container">
    <div class="row">
      <div class=" ">
        <div class="shopItems row">
          {% for product in products %}
            {% purchase_info_for_product request product as session %}
            {% if product.is_top_level %}
              <div class="col-xs-6 col-sm-4 col-md-2 col-lg-2">
                  <div class="thumbnail shopItem shopBorderColor">
                    {% if product.primary_image and product.primary_image.original.url %}
                        {% with image=product.primary_image %}
                            {% thumbnail image.original "200x250" upscale=False as thumb %}
                            <a href="{{ image.original.url }}" rel="lightbox_{{ product.upc|default:"-" }}" class="sub-image">
                                <img src="{{ thumb.url }}" alt="{{ product.get_title }}" data-description=" class="img-responsive"
                                    {% if image.caption %}{{ image.caption }}{% endif %}">
                            </a>
                            {% endthumbnail %}
                        {% endwith %}
                    {% else %}
                            -
                    {% endif %}

                  <div class="caption">
                      <span class="name shopColor">{{product.get_title}}</span>
                      <span class="price shopColor">${{session.price.excl_tax}}</span>
                      <span class="shopColor">{{ session.availability.message }}</span>
                  </div>
                  </div>
               </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script>



{#    function colourFunction() {#}
{#        var myselect = document.getElementById("select1"),#}
{#        colour = myselect.options[myselect.selectedIndex].className;#}
{#        myselect.className = "option2";#}
{#        myselect.blur();#}
{#    }#}

    $("#tinvilleTagBanner").remove();
    $(".shopColor").css("color", "{{ shop.color }}");
    $(".shopBackgroundColor").css("background-color", "{{ shop.color }}");


    </script>

{% endblock %}


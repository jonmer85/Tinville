{% extends "home.html" %}
{% load i18n %}
{% block body_class %}{{ block.super }} about{% endblock %}
{% block css %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/designer_shop/styles.css" />
{% endblock css %}
{% block content %}
{{ block.super }}
<div id="shopEditor">
    <div id ="shopEditorWindow" class="row col-sm-12 panel-group navbar-fixed-bottom" id="accordion">
        <div id="cornerRadius" class="cornerRadius panel panel-default">
            <div id="shopEditorHeading" class="panel-heading">
                <h4 id="shopEditorTitle" class="panel-title">
                    <b>Shop Editor</b>
                    <a id="resizeIcon" class="editorControlButton glyphicon glyphicon-resize-full pull-right hidden-xs"></a>
                    <a id="minMaxIcon" data-toggle="collapse" data-parent="#accordion" href="#editorPanels" class="editorControlButton glyphicon glyphicon-chevron-down pull-right"></a>
                </h4>
            <div id="editorPanels" class="row panel-collapse collapse in">
                <div id="optionPanel" class="container col-sm-3 panel-body editorPanel shopEditorElementTop">
                    <a id="optionsXS" class="row hidden-lg hidden-md hidden-sm panel-heading">Options</a>
                    <ul id="optionContent" class="nav nav-pills nav-stacked shopEditorElementTop">
                        <li class="active">
                            <a href="#banner" data-toggle="pill">Banner</a>
                        </li>
                        <li>
                            <a href="#logo" data-toggle="pill">Logo</a>
                        </li>
                        <li>
                            <a href="#about" data-toggle="pill">About</a>
                        </li>
                        <li>
                            <a href="#addItems" data-toggle="pill">Add Items 1</a>
                        </li>
                        <li>
                            <a href="#addItems" data-toggle="pill">Add Items 2</a>
                        </li>
                        <li>
                            <a href="#addItems" data-toggle="pill">Add Items 3</a>
                        </li>
                        <li>
                            <a href="#addItems" data-toggle="pill">Add Items 4</a>
                        </li>
                        <li>
                            <a href="#addItems" data-toggle="pill">Add Items 5</a>
                        </li>
                        <li>
                            <a href="#addItems" data-toggle="pill">Add Items 6</a>
                        </li>
                        <li>
                            <a href="#addItems" data-toggle="pill">Add Items 7</a>
                        </li>
                    </ul>
                </div>
                <div class="container col-sm-9">
                    <div id="formPanel" class="editorPanel panel-body shopEditorElementBottom">
                        <div id="formContent" class="tab-content panel-content shopEditorElementBottom">
                            <div class="tab-pane active" id="banner">
                                <p> 1 Insert Banner form here.</p>
                                <p> 2 Insert Banner form here.</p>
                                <p> 3 Insert Banner form here.</p>
                                <p> 4 Insert Banner form here.</p>
                                <p> 5 Insert Banner form here.</p>
                                <p> 6 Insert Banner form here.</p>
                                <p> 7 Insert Banner form here.</p>
                                <p> 8 Insert Banner form here.</p>
                                <p> 9 Insert Banner form here.</p>
                                <p> 10 Insert Banner form here.</p>
                                <p> 11 Insert Banner form here.</p>
                                <p> 12 Insert Banner form here.</p>
                                <p> 13 Insert Banner form here.</p>
                                <p> 14 Insert Banner form here.</p>
                                <p> 15 Insert Banner form here.</p>
                                <p> 16 Insert Banner form here.</p>
                                <p> 17 Insert Banner form here.</p>
                                <p> 18 Insert Banner form here.</p>
                                <p> 19 Insert Banner form here.</p>
                                <p> 20 Insert Banner form here.</p>
                                <p> 21 Insert Banner form here.</p>
                                <p> 22 Insert Banner form here.</p>
                                <p> 23 Insert Banner form here.</p>
                                <p> 24 Insert Banner form here.</p>
                                <p> 25 Insert Banner form here.</p>
                                <p> 26 Insert Banner form here.</p>
                                <p> 27 Insert Banner form here.</p>
                                <p> 28 Insert Banner form here.</p>
                                <p> 29 Insert Banner form here.</p>
                                <p> 30 Insert Banner form here.</p>
                                <p> 31 Insert Banner form here.</p>
                                <p> 32 Insert Banner form here.</p>
                            </div>
                            <div class="tab-pane" id="logo">
                                Insert Logo form here.
                            </div>
                            <div class="tab-pane" id="about">
                                Insert About form here.
                            </div>
                            <div class="tab-pane" id="addItems">
                                {%  load crispy_forms_tags %}
                                {% crispy productCreationForm %}
                            </div>
                        </div>

                    </div>
                    <div id="buttonContainer" class="container col-sm-12 pull-right">
                            <button class="btn btn-primary tinvilleButton pull-right">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block javascript %}

<script>

$("#id_sizeVariation").change(function() {
    var selectedValue = $("#id_sizeVariation option:selected");
    if (selectedValue[0].value == "1"){
        //sizeVariation handler
    }

});

$("#id_sizeSetSelection").change(function() {
    var selectedValue = $("#id_sizeSetSelection option:selected");
    if (selectedValue[0].value != "0") {
        $("#collapse1").collapse('show');
    }
    else {
        $("#collapse1").collapse('hide')

    }

});


$("#resizeIcon").click(function() {
   $(this).toggleClass("glyphicon-resize-full");
   $(this).toggleClass("glyphicon-resize-small");
   resizeEditor();
});

$("#minMaxIcon").click(function() {
   $(this).toggleClass("glyphicon-chevron-up");
   $(this).toggleClass("glyphicon-chevron-down");
   $("#resizeIcon").toggleClass("hidden");

{#    alert ($(this).hasClass("glyphicon-chevron-down"));#}
{#    if ($(this).hasClass("glyphicon-chevron-down")==true) {#}
{#        alert("hi");#}
{#        resizeEditor();#}
{#    }#}
});

var loaded;
loaded = false;
$(window).resize(function() {
   if (loaded == true) {
           resizeEditor();
   }
});

$(window).load(function() {
    loaded=true;
    resizeEditor();
});

$("#optionsXS").click(function() {
    var currentFormPanelHeight;
    var currentFormContentHeight;
    var maxFormHeight;
    var transitionHeight;
    currentFormPanelHeight = $("#formPanel").outerHeight();
    currentFormContentHeight = $("#formContent").outerHeight();
    maxFormHeight = $(window).height()*0.90
    if ($("#optionContent").outerHeight() > maxFormHeight-
                $("#shopEditorTitle").outerHeight()-
                $("#optionsXS").outerHeight()-
                $("#buttonContainer").outerHeight()-
                parseInt($("#cornerRadius").css('border-top-width'))-
                parseInt($("#cornerRadius").css('border-bottom-width'))-
                parseInt($("#shopEditorHeading").css('padding-bottom'))-
                parseInt($("#formPanel").css('border-top-width'))-
                parseInt($("#formPanel").css('padding-top')))
    {
        $("#optionContent").height(maxFormHeight-
                $("#optionsXS").outerHeight()-
                $("#shopEditorTitle").outerHeight()-
                $("#buttonContainer").outerHeight()-
                parseInt($("#cornerRadius").css('border-top-width'))-
                parseInt($("#cornerRadius").css('border-bottom-width'))-
                parseInt($("#shopEditorHeading").css('padding-bottom'))-
                parseInt($("#formPanel").css('border-top-width'))-
                parseInt($("#formPanel").css('padding-top')));
                transitionHeight = $("#optionContent").outerHeight()+$("#optionsXS").outerHeight();
    }
    else
    {
        transitionHeight = $("#optionContent").outerHeight();
    }
    if ($("#optionPanel").outerHeight()==$("#optionsXS").outerHeight())
    {
        $("#optionPanel").transition({height: transitionHeight},{duration: 300});

        $("#formPanel").transition({height: currentFormPanelHeight-transitionHeight+
                        $("#shopEditorTitle").outerHeight()+
                        parseInt($("#cornerRadius").css('border-top-width'))+
                        parseInt($("#cornerRadius").css('border-bottom-width'))},{duration: 300});
        $("#formContent").transition({height: currentFormContentHeight-transitionHeight+
                        $("#shopEditorTitle").outerHeight()+
                        parseInt($("#formPanel").css('border-top-width'))}, {duration: 300});
    }
    else
    {
        resizeEditor();
    }
});

$("#optionContent li").click(function (){
    $("#optionsXS").text($(this).text()+" (click here for editor options)");
    resizeEditor();
})

function resizeEditor() {
    var maxFormHeight;
    var editorPanelHeight;
    var buttonHeight;
    var optionPanelHeight;
    var editorHeight;
    var maxHeight;
    var formTransitionHeight;

    buttonHeight = $("#buttonContainer").height();

    if (checkMode() == 'xs')
    {
        $("#optionPanel").css({'padding-top' : '0px', 'padding-bottom' : '0px'});
        $("#formPanel").css({'padding-top' : '0px', 'padding-bottom' : '10px'});
        optionPanelHeight = $("#optionsXS").outerHeight();
        editorHeight = 0.90;
        maxFormHeight = Math.round($(window).height()*editorHeight);
        formTransitionHeight = maxFormHeight-optionPanelHeight-
                $("#shopEditorTitle").outerHeight()-
                $("#buttonContainer").outerHeight()
        $("#optionPanel").transition({height:optionPanelHeight},{duration: 300});
        $("#optionContent").transition({height: $("#optionContent").parent().height()},{duration: 300});
        $("#formPanel").transition({height:formTransitionHeight}, {duration: 300});
        $("#formContent").transition({height: formTransitionHeight-
                parseInt($("#formPanel").css('border-top-width'))-
                parseInt($("#formPanel").css('padding-top'))}, {duration: 300});
    }
    else
    {
        $("#optionPanel").css({'padding-top' : '15px', 'padding-bottom' : '15px'});
        $("#formPanel").css({'padding-top' : '15px', 'padding-bottom' : '15px'});
        editorPanelHeight = 0.35;
        if ($("#resizeIcon").hasClass("glyphicon-resize-small") == true)
        {
            editorPanelHeight = 0.75;
        }
        maxHeight = $(window).height()*editorPanelHeight;
        $("#optionPanel").transition({height:maxHeight-60+buttonHeight},300);
        $("#formPanel").transition({height:maxHeight-60},300);
        $("#optionContent").transition({height: maxHeight-60+buttonHeight},300);
        $("#formContent").transition({height: maxHeight-60},300);
    }
}

$(function(){
    $("#optionContent").slimScroll({
        height: 'auto'
    });
}).resize();

$(function(){
    $("#formContent").slimScroll({
       height: 'auto'
    });
}).resize();

</script>

{% endblock %}
